window.tinymce=window.tinymce||{base:"/assets/tinymce",suffix:""},function(e,t){"use strict";function n(e,t){for(var n,i=[],r=0;r<e.length;++r){if(n=a[e[r]]||o(e[r]),!n)throw"module definition dependecy not found: "+e[r];i.push(n)}t.apply(null,i)}function i(e,i,o){if("string"!=typeof e)throw"invalid module definition, module id must be defined and be a string";if(i===t)throw"invalid module definition, dependencies must be specified";if(o===t)throw"invalid module definition, definition function must be specified";n(i,function(){a[e]=o.apply(null,arguments)})}function o(t){for(var n=e,i=t.split(/[.\/]/),o=0;o<i.length;++o){if(!n[i[o]])return;n=n[i[o]]}return n}function r(n){for(var i=0;i<n.length;i++){for(var o=e,r=n[i],s=r.split(/[.\/]/),l=0;l<s.length-1;++l)o[s[l]]===t&&(o[s[l]]={}),o=o[s[l]];o[s[s.length-1]]=a[r]}}var a={};/**
 * EventUtils.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/dom/EventUtils",[],function(){function e(e,t,n,i){e.addEventListener?e.addEventListener(t,n,i||!1):e.attachEvent&&e.attachEvent("on"+t,n)}function t(e,t,n,i){e.removeEventListener?e.removeEventListener(t,n,i||!1):e.detachEvent&&e.detachEvent("on"+t,n)}function n(e,t){function n(){return!1}function i(){return!0}var o,r,l=t||{};for(o in e)s[o]||(l[o]=e[o]);if(l.target||(l.target=l.srcElement||document),e&&a.test(e.type)&&e.pageX===r&&e.clientX!==r){var c=l.target.ownerDocument||document,d=c.documentElement,u=c.body;l.pageX=e.clientX+(d&&d.scrollLeft||u&&u.scrollLeft||0)-(d&&d.clientLeft||u&&u.clientLeft||0),l.pageY=e.clientY+(d&&d.scrollTop||u&&u.scrollTop||0)-(d&&d.clientTop||u&&u.clientTop||0)}return l.preventDefault=function(){l.isDefaultPrevented=i,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},l.stopPropagation=function(){l.isPropagationStopped=i,e&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0)},l.stopImmediatePropagation=function(){l.isImmediatePropagationStopped=i,l.stopPropagation()},l.isDefaultPrevented||(l.isDefaultPrevented=n,l.isPropagationStopped=n,l.isImmediatePropagationStopped=n),l}function i(n,i,o){function r(){o.domLoaded||(o.domLoaded=!0,i(c))}function a(){("complete"===l.readyState||"interactive"===l.readyState&&l.body)&&(t(l,"readystatechange",a),r())}function s(){try{l.documentElement.doScroll("left")}catch(e){return void setTimeout(s,0)}r()}var l=n.document,c={type:"ready"};return o.domLoaded?void i(c):(l.addEventListener?"complete"===l.readyState?r():e(n,"DOMContentLoaded",r):(e(l,"readystatechange",a),l.documentElement.doScroll&&n.self===n.top&&s()),void e(n,"load",r))}function o(){function o(e,t){var n,i,o,r,a=f[t];if(n=a&&a[e.type])for(i=0,o=n.length;o>i;i++)if(r=n[i],r&&r.func.call(r.scope,e)===!1&&e.preventDefault(),e.isImmediatePropagationStopped())return}var a,s,l,c,d,u=this,f={};s=r+(+new Date).toString(32),c="onmouseenter"in document.documentElement,l="onfocusin"in document.documentElement,d={mouseenter:"mouseover",mouseleave:"mouseout"},a=1,u.domLoaded=!1,u.events=f,u.bind=function(t,r,h,m){function g(e){o(n(e||I.event),p)}var p,E,v,T,C,b,y,I=window;if(t&&3!==t.nodeType&&8!==t.nodeType){for(t[s]?p=t[s]:(p=a++,t[s]=p,f[p]={}),m=m||t,r=r.split(" "),v=r.length;v--;)T=r[v],b=g,C=y=!1,"DOMContentLoaded"===T&&(T="ready"),u.domLoaded&&"ready"===T&&"complete"==t.readyState?h.call(m,n({type:T})):(c||(C=d[T],C&&(b=function(e){var t,i;if(t=e.currentTarget,i=e.relatedTarget,i&&t.contains)i=t.contains(i);else for(;i&&i!==t;)i=i.parentNode;i||(e=n(e||I.event),e.type="mouseout"===e.type?"mouseleave":"mouseenter",e.target=t,o(e,p))})),l||"focusin"!==T&&"focusout"!==T||(y=!0,C="focusin"===T?"focus":"blur",b=function(e){e=n(e||I.event),e.type="focus"===e.type?"focusin":"focusout",o(e,p)}),E=f[p][T],E?"ready"===T&&u.domLoaded?h({type:T}):E.push({func:h,scope:m}):(f[p][T]=E=[{func:h,scope:m}],E.fakeName=C,E.capture=y,E.nativeHandler=b,"ready"===T?i(t,b,u):e(t,C||T,b,y)));return t=E=0,h}},u.unbind=function(e,n,i){var o,r,a,l,c,d;if(!e||3===e.nodeType||8===e.nodeType)return u;if(o=e[s]){if(d=f[o],n){for(n=n.split(" "),a=n.length;a--;)if(c=n[a],r=d[c]){if(i)for(l=r.length;l--;)if(r[l].func===i){var h=r.nativeHandler,m=r.fakeName,g=r.capture;r=r.slice(0,l).concat(r.slice(l+1)),r.nativeHandler=h,r.fakeName=m,r.capture=g,d[c]=r}i&&0!==r.length||(delete d[c],t(e,r.fakeName||c,r.nativeHandler,r.capture))}}else{for(c in d)r=d[c],t(e,r.fakeName||c,r.nativeHandler,r.capture);d={}}for(c in d)return u;delete f[o];try{delete e[s]}catch(p){e[s]=null}}return u},u.fire=function(e,t,i){var r;if(!e||3===e.nodeType||8===e.nodeType)return u;i=n(null,i),i.type=t,i.target=e;do r=e[s],r&&o(i,r),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow;while(e&&!i.isPropagationStopped());return u},u.clean=function(e){var t,n,i=u.unbind;if(!e||3===e.nodeType||8===e.nodeType)return u;if(e[s]&&i(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName)for(i(e),n=e.getElementsByTagName("*"),t=n.length;t--;)e=n[t],e[s]&&i(e);return u},u.destroy=function(){f={}},u.cancel=function(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}}var r="mce-data-",a=/^(?:mouse|contextmenu)|click/,s={keyLocation:1,layerX:1,layerY:1,returnValue:1};return o.Event=new o,o.Event.bind(window,"ready",function(){}),o}),/**
 * Sizzle.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 *
 * @ignore-file
 */
/*
 * Sizzle CSS Selector Engine
 *  Copyright, The Dojo Foundation
 *  Released under the MIT, BSD, and GPL Licenses.
 *  More information: http://sizzlejs.com/
 */
i("tinymce/dom/Sizzle",[],function(){function e(e){return ge.test(e+"")}function n(){var e,t=[];return e=function(n,i){return t.push(n+=" ")>I.cacheLength&&delete e[t.shift()],e[n]=i,i}}function i(e){return e[F]=!0,e}function o(e){var t=w.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t=null}}function r(e,t,n,i){var o,r,a,s,l,c,f,h,m,g;if((t?t.ownerDocument||t:M)!==w&&x(t),t=t||w,n=n||[],!e||"string"!=typeof e)return n;if(1!==(s=t.nodeType)&&9!==s)return[];if(N&&!i){if(o=pe.exec(e))if(a=o[1]){if(9===s){if(r=t.getElementById(a),!r||!r.parentNode)return n;if(r.id===a)return n.push(r),n}else if(t.ownerDocument&&(r=t.ownerDocument.getElementById(a))&&P(t,r)&&r.id===a)return n.push(r),n}else{if(o[2])return Q.apply(n,t.getElementsByTagName(e)),n;if((a=o[3])&&$.getElementsByClassName&&t.getElementsByClassName)return Q.apply(n,t.getElementsByClassName(a)),n}if($.qsa&&!A.test(e)){if(f=!0,h=F,m=t,g=9===s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){for(c=d(e),(f=t.getAttribute("id"))?h=f.replace(Te,"\\$&"):t.setAttribute("id",h),h="[id='"+h+"'] ",l=c.length;l--;)c[l]=h+u(c[l]);m=me.test(e)&&t.parentNode||t,g=c.join(",")}if(g)try{return Q.apply(n,m.querySelectorAll(g)),n}catch(p){}finally{f||t.removeAttribute("id")}}}return T(e.replace(le,"$1"),t,n,i)}function a(e,t){var n=t&&e,i=n&&(~t.sourceIndex||X)-(~e.sourceIndex||X);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function s(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function l(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function c(e){return i(function(t){return t=+t,i(function(n,i){for(var o,r=e([],n.length,t),a=r.length;a--;)n[o=r[a]]&&(n[o]=!(i[o]=n[o]))})})}function d(e,t){var n,i,o,a,s,l,c,d=q[e+" "];if(d)return t?0:d.slice(0);for(s=e,l=[],c=I.preFilter;s;){(!n||(i=ce.exec(s)))&&(i&&(s=s.slice(i[0].length)||s),l.push(o=[])),n=!1,(i=de.exec(s))&&(n=i.shift(),o.push({value:n,type:i[0].replace(le," ")}),s=s.slice(n.length));for(a in I.filter)!(i=he[a].exec(s))||c[a]&&!(i=c[a](i))||(n=i.shift(),o.push({value:n,type:a,matches:i}),s=s.slice(n.length));if(!n)break}return t?s.length:s?r.error(e):q(e,l).slice(0)}function u(e){for(var t=0,n=e.length,i="";n>t;t++)i+=e[t].value;return i}function f(e,t,n){var i=t.dir,o=n&&"parentNode"===i,r=z++;return t.first?function(t,n,r){for(;t=t[i];)if(1===t.nodeType||o)return e(t,n,r)}:function(t,n,a){var s,l,c,d=H+" "+r;if(a){for(;t=t[i];)if((1===t.nodeType||o)&&e(t,n,a))return!0}else for(;t=t[i];)if(1===t.nodeType||o)if(c=t[F]||(t[F]={}),(l=c[i])&&l[0]===d){if((s=l[1])===!0||s===y)return s===!0}else if(l=c[i]=[d],l[1]=e(t,n,a)||y,l[1]===!0)return!0}}function h(e){return e.length>1?function(t,n,i){for(var o=e.length;o--;)if(!e[o](t,n,i))return!1;return!0}:e[0]}function m(e,t,n,i,o){for(var r,a=[],s=0,l=e.length,c=null!=t;l>s;s++)(r=e[s])&&(!n||n(r,i,o))&&(a.push(r),c&&t.push(s));return a}function g(e,t,n,o,r,a){return o&&!o[F]&&(o=g(o)),r&&!r[F]&&(r=g(r,a)),i(function(i,a,s,l){var c,d,u,f=[],h=[],g=a.length,p=i||v(t||"*",s.nodeType?[s]:s,[]),E=!e||!i&&t?p:m(p,f,e,s,l),T=n?r||(i?e:g||o)?[]:a:E;if(n&&n(E,T,s,l),o)for(c=m(T,h),o(c,[],s,l),d=c.length;d--;)(u=c[d])&&(T[h[d]]=!(E[h[d]]=u));if(i){if(r||e){if(r){for(c=[],d=T.length;d--;)(u=T[d])&&c.push(E[d]=u);r(null,T=[],c,l)}for(d=T.length;d--;)(u=T[d])&&(c=r?te.call(i,u):f[d])>-1&&(i[c]=!(a[c]=u))}}else T=m(T===a?T.splice(g,T.length):T),r?r(null,a,T,l):Q.apply(a,T)})}function p(e){for(var t,n,i,o=e.length,r=I.relative[e[0].type],a=r||I.relative[" "],s=r?1:0,l=f(function(e){return e===t},a,!0),c=f(function(e){return te.call(t,e)>-1},a,!0),d=[function(e,n,i){return!r&&(i||n!==_)||((t=n).nodeType?l(e,n,i):c(e,n,i))}];o>s;s++)if(n=I.relative[e[s].type])d=[f(h(d),n)];else{if(n=I.filter[e[s].type].apply(null,e[s].matches),n[F]){for(i=++s;o>i&&!I.relative[e[i].type];i++);return g(s>1&&h(d),s>1&&u(e.slice(0,s-1)).replace(le,"$1"),n,i>s&&p(e.slice(s,i)),o>i&&p(e=e.slice(i)),o>i&&u(e))}d.push(n)}return h(d)}function E(e,t){var n=0,o=t.length>0,a=e.length>0,s=function(i,s,l,c,d){var u,f,h,g=[],p=0,E="0",v=i&&[],T=null!=d,C=_,b=i||a&&I.find.TAG("*",d&&s.parentNode||s),O=H+=null==C?1:Math.random()||.1;for(T&&(_=s!==w&&s,y=n);null!=(u=b[E]);E++){if(a&&u){for(f=0;h=e[f++];)if(h(u,s,l)){c.push(u);break}T&&(H=O,y=++n)}o&&((u=!h&&u)&&p--,i&&v.push(u))}if(p+=E,o&&E!==p){for(f=0;h=t[f++];)h(v,g,s,l);if(i){if(p>0)for(;E--;)v[E]||g[E]||(g[E]=J.call(c));g=m(g)}Q.apply(c,g),T&&!i&&g.length>0&&p+t.length>1&&r.uniqueSort(c)}return T&&(H=O,_=C),v};return o?i(s):s}function v(e,t,n){for(var i=0,o=t.length;o>i;i++)r(e,t[i],n);return n}function T(e,t,n,i){var o,r,a,s,l,c=d(e);if(!i&&1===c.length){if(r=c[0]=c[0].slice(0),r.length>2&&"ID"===(a=r[0]).type&&9===t.nodeType&&N&&I.relative[r[1].type]){if(t=(I.find.ID(a.matches[0].replace(be,ye),t)||[])[0],!t)return n;e=e.slice(r.shift().value.length)}for(o=he.needsContext.test(e)?0:r.length;o--&&(a=r[o],!I.relative[s=a.type]);)if((l=I.find[s])&&(i=l(a.matches[0].replace(be,ye),me.test(r[0].type)&&t.parentNode||t))){if(r.splice(o,1),e=i.length&&u(r),!e)return Q.apply(n,i),n;break}}return R(e,c)(i,t,!N,n,me.test(e)),n}function C(){}var b,y,I,O,D,R,_,k,K,x,w,S,N,A,L,B,P,F="sizzle"+-new Date,M=window.document,$={},H=0,z=0,V=n(),q=n(),U=n(),W=!1,j=function(){return 0},G=typeof t,X=1<<31,Y=[],J=Y.pop,Z=Y.push,Q=Y.push,ee=Y.slice,te=Y.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},ne="[\\x20\\t\\r\\n\\f]",ie="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",oe=ie.replace("w","w#"),re="([*^$|!~]?=)",ae="\\["+ne+"*("+ie+")"+ne+"*(?:"+re+ne+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+oe+")|)|)"+ne+"*\\]",se=":("+ie+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+ae.replace(3,8)+")*)|.*)\\)|)",le=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),ce=new RegExp("^"+ne+"*,"+ne+"*"),de=new RegExp("^"+ne+"*([\\x20\\t\\r\\n\\f>+~])"+ne+"*"),ue=new RegExp(se),fe=new RegExp("^"+oe+"$"),he={ID:new RegExp("^#("+ie+")"),CLASS:new RegExp("^\\.("+ie+")"),NAME:new RegExp("^\\[name=['\"]?("+ie+")['\"]?\\]"),TAG:new RegExp("^("+ie.replace("w","w*")+")"),ATTR:new RegExp("^"+ae),PSEUDO:new RegExp("^"+se),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},me=/[\x20\t\r\n\f]*[+~]/,ge=/^[^{]+\{\s*\[native code/,pe=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,Ee=/^(?:input|select|textarea|button)$/i,ve=/^h\d$/i,Te=/'|\\/g,Ce=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,be=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,ye=function(e,t){var n="0x"+t-65536;return n!==n?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)};try{Q.apply(Y=ee.call(M.childNodes),M.childNodes),Y[M.childNodes.length].nodeType}catch(Ie){Q={apply:Y.length?function(e,t){Z.apply(e,ee.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}D=r.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},x=r.setDocument=function(n){var i=n?n.ownerDocument||n:M;return i!==w&&9===i.nodeType&&i.documentElement?(w=i,S=i.documentElement,N=!D(i),$.getElementsByTagName=o(function(e){return e.appendChild(i.createComment("")),!e.getElementsByTagName("*").length}),$.attributes=o(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return"boolean"!==t&&"string"!==t}),$.getElementsByClassName=o(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",e.getElementsByClassName&&e.getElementsByClassName("e").length?(e.lastChild.className="e",2===e.getElementsByClassName("e").length):!1}),$.getByName=o(function(e){e.id=F+0,e.appendChild(w.createElement("a")).setAttribute("name",F),e.appendChild(w.createElement("i")).setAttribute("name",F),S.appendChild(e);var t=i.getElementsByName&&i.getElementsByName(F).length===2+i.getElementsByName(F+0).length;return S.removeChild(e),t}),$.sortDetached=o(function(e){return e.compareDocumentPosition&&1&e.compareDocumentPosition(w.createElement("div"))}),I.attrHandle=o(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==G&&"#"===e.firstChild.getAttribute("href")})?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},$.getByName?(I.find.ID=function(e,t){if(typeof t.getElementById!==G&&N){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},I.filter.ID=function(e){var t=e.replace(be,ye);return function(e){return e.getAttribute("id")===t}}):(I.find.ID=function(e,n){if(typeof n.getElementById!==G&&N){var i=n.getElementById(e);return i?i.id===e||typeof i.getAttributeNode!==G&&i.getAttributeNode("id").value===e?[i]:t:[]}},I.filter.ID=function(e){var t=e.replace(be,ye);return function(e){var n=typeof e.getAttributeNode!==G&&e.getAttributeNode("id");return n&&n.value===t}}),I.find.TAG=$.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!==G?t.getElementsByTagName(e):void 0}:function(e,t){var n,i=[],o=0,r=t.getElementsByTagName(e);if("*"===e){for(;n=r[o++];)1===n.nodeType&&i.push(n);return i}return r},I.find.NAME=$.getByName&&function(e,t){return typeof t.getElementsByName!==G?t.getElementsByName(name):void 0},I.find.CLASS=$.getElementsByClassName&&function(e,t){return typeof t.getElementsByClassName!==G&&N?t.getElementsByClassName(e):void 0},L=[],A=[":focus"],($.qsa=e(i.querySelectorAll))&&(o(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||A.push("\\["+ne+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||A.push(":checked")}),o(function(e){e.innerHTML="<input type='hidden' i=''/>",e.querySelectorAll("[i^='']").length&&A.push("[*^$]="+ne+"*(?:\"\"|'')"),e.querySelectorAll(":enabled").length||A.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),A.push(",.*:")})),($.matchesSelector=e(B=S.matchesSelector||S.mozMatchesSelector||S.webkitMatchesSelector||S.oMatchesSelector||S.msMatchesSelector))&&o(function(e){$.disconnectedMatch=B.call(e,"div"),B.call(e,"[s!='']:x"),L.push("!=",se)}),A=new RegExp(A.join("|")),L=L.length&&new RegExp(L.join("|")),P=e(S.contains)||S.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},j=S.compareDocumentPosition?function(e,t){if(e===t)return W=!0,0;var n=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t);return n?1&n||k&&t.compareDocumentPosition(e)===n?e===i||P(M,e)?-1:t===i||P(M,t)?1:K?te.call(K,e)-te.call(K,t):0:4&n?-1:1:e.compareDocumentPosition?-1:1}:function(e,t){var n,o=0,r=e.parentNode,s=t.parentNode,l=[e],c=[t];if(e===t)return W=!0,0;if(!r||!s)return e===i?-1:t===i?1:r?-1:s?1:0;if(r===s)return a(e,t);for(n=e;n=n.parentNode;)l.unshift(n);for(n=t;n=n.parentNode;)c.unshift(n);for(;l[o]===c[o];)o++;return o?a(l[o],c[o]):l[o]===M?-1:c[o]===M?1:0},w):w},r.matches=function(e,t){return r(e,null,null,t)},r.matchesSelector=function(e,t){if((e.ownerDocument||e)!==w&&x(e),t=t.replace(Ce,"='$1']"),$.matchesSelector&&N&&(!L||!L.test(t))&&!A.test(t))try{var n=B.call(e,t);if(n||$.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(i){}return r(t,w,null,[e]).length>0},r.contains=function(e,t){return(e.ownerDocument||e)!==w&&x(e),P(e,t)},r.attr=function(e,t){var n;return(e.ownerDocument||e)!==w&&x(e),N&&(t=t.toLowerCase()),(n=I.attrHandle[t])?n(e):!N||$.attributes?e.getAttribute(t):((n=e.getAttributeNode(t))||e.getAttribute(t))&&e[t]===!0?t:n&&n.specified?n.value:null},r.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},r.uniqueSort=function(e){var t,n=[],i=0,o=0;if(W=!$.detectDuplicates,k=!$.sortDetached,K=!$.sortStable&&e.slice(0),e.sort(j),W){for(;t=e[o++];)t===e[o]&&(i=n.push(o));for(;i--;)e.splice(n[i],1)}return e},O=r.getText=function(e){var t,n="",i=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=O(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[i];i++)n+=O(t);return n},I=r.selectors={cacheLength:50,createPseudo:i,match:he,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(be,ye),e[3]=(e[4]||e[5]||"").replace(be,ye),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||r.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&r.error(e[0]),e},PSEUDO:function(e){var t,n=!e[5]&&e[2];return he.CHILD.test(e[0])?null:(e[4]?e[2]=e[4]:n&&ue.test(n)&&(t=d(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){return"*"===e?function(){return!0}:(e=e.replace(be,ye).toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=V[e+" "];return t||(t=new RegExp("(^|"+ne+")"+e+"("+ne+"|$)"))&&V(e,function(e){return t.test(e.className||typeof e.getAttribute!==G&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(i){var o=r.attr(i,e);return null==o?"!="===t:t?(o+="","="===t?o===n:"!="===t?o!==n:"^="===t?n&&0===o.indexOf(n):"*="===t?n&&o.indexOf(n)>-1:"$="===t?n&&o.slice(-n.length)===n:"~="===t?(" "+o+" ").indexOf(n)>-1:"|="===t?o===n||o.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,i,o){var r="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===i&&0===o?function(e){return!!e.parentNode}:function(t,n,l){var c,d,u,f,h,m,g=r!==a?"nextSibling":"previousSibling",p=t.parentNode,E=s&&t.nodeName.toLowerCase(),v=!l&&!s;if(p){if(r){for(;g;){for(u=t;u=u[g];)if(s?u.nodeName.toLowerCase()===E:1===u.nodeType)return!1;m=g="only"===e&&!m&&"nextSibling"}return!0}if(m=[a?p.firstChild:p.lastChild],a&&v){for(d=p[F]||(p[F]={}),c=d[e]||[],h=c[0]===H&&c[1],f=c[0]===H&&c[2],u=h&&p.childNodes[h];u=++h&&u&&u[g]||(f=h=0)||m.pop();)if(1===u.nodeType&&++f&&u===t){d[e]=[H,h,f];break}}else if(v&&(c=(t[F]||(t[F]={}))[e])&&c[0]===H)f=c[1];else for(;(u=++h&&u&&u[g]||(f=h=0)||m.pop())&&((s?u.nodeName.toLowerCase()!==E:1!==u.nodeType)||!++f||(v&&((u[F]||(u[F]={}))[e]=[H,f]),u!==t)););return f-=o,f===i||f%i===0&&f/i>=0}}},PSEUDO:function(e,t){var n,o=I.pseudos[e]||I.setFilters[e.toLowerCase()]||r.error("unsupported pseudo: "+e);return o[F]?o(t):o.length>1?(n=[e,e,"",t],I.setFilters.hasOwnProperty(e.toLowerCase())?i(function(e,n){for(var i,r=o(e,t),a=r.length;a--;)i=te.call(e,r[a]),e[i]=!(n[i]=r[a])}):function(e){return o(e,0,n)}):o}},pseudos:{not:i(function(e){var t=[],n=[],o=R(e.replace(le,"$1"));return o[F]?i(function(e,t,n,i){for(var r,a=o(e,null,i,[]),s=e.length;s--;)(r=a[s])&&(e[s]=!(t[s]=r))}):function(e,i,r){return t[0]=e,o(t,null,r,n),!n.pop()}}),has:i(function(e){return function(t){return r(e,t).length>0}}),contains:i(function(e){return function(t){return(t.textContent||t.innerText||O(t)).indexOf(e)>-1}}),lang:i(function(e){return fe.test(e||"")||r.error("unsupported lang: "+e),e=e.replace(be,ye).toLowerCase(),function(t){var n;do if(n=N?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(e){var t=window.location&&window.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===S},focus:function(e){return e===w.activeElement&&(!w.hasFocus||w.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!I.pseudos.empty(e)},header:function(e){return ve.test(e.nodeName)},input:function(e){return Ee.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:c(function(){return[0]}),last:c(function(e,t){return[t-1]}),eq:c(function(e,t,n){return[0>n?n+t:n]}),even:c(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:c(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:c(function(e,t,n){for(var i=0>n?n+t:n;--i>=0;)e.push(i);return e}),gt:c(function(e,t,n){for(var i=0>n?n+t:n;++i<t;)e.push(i);return e})}};for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})I.pseudos[b]=s(b);for(b in{submit:!0,reset:!0})I.pseudos[b]=l(b);return R=r.compile=function(e,t){var n,i=[],o=[],r=U[e+" "];if(!r){for(t||(t=d(e)),n=t.length;n--;)r=p(t[n]),r[F]?i.push(r):o.push(r);r=U(e,E(o,i))}return r},I.pseudos.nth=I.pseudos.eq,C.prototype=I.filters=I.pseudos,I.setFilters=new C,$.sortStable=F.split("").sort(j).join("")===F,x(),[0,0].sort(j),$.detectDuplicates=W,r}),/**
 * DomQuery.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 *
 * Some of this logic is based on jQuery code that is released under
 * MIT license that grants us to sublicense it under LGPL.
 *
 * @ignore-file
 */
i("tinymce/dom/DomQuery",["tinymce/dom/EventUtils","tinymce/dom/Sizzle"],function(e,n){function i(e){return"undefined"!=typeof e}function o(e){return"string"==typeof e}function r(e){var t,n,i;for(i=E.createElement("div"),t=E.createDocumentFragment(),i.innerHTML=e;n=i.firstChild;)t.appendChild(n);return t}function a(e,t,n){var i;if("string"==typeof t)t=r(t);else if(t.length){for(i=0;i<t.length;i++)a(e,t[i],n);return e}for(i=e.length;i--;)n.call(e[i],t.parentNode?t:t);return e}function s(e,t){return e&&t&&-1!==(" "+e.className+" ").indexOf(" "+t+" ")}function l(e,t){var n;for(e=e||[],"string"==typeof e&&(e=e.split(" ")),t=t||{},n=e.length;n--;)t[e[n]]={};return t}function c(e,t){return new c.fn.init(e,t)}function d(e){var t,n,i,o=arguments;for(n=1;n<o.length;n++){t=o[n];for(i in t)e[i]=t[i]}return e}function u(e){var t,n,i=[];for(t=0,n=e.length;n>t;t++)i[t]=e[t];return i}function f(e,t){var n;if(t.indexOf)return t.indexOf(e);for(n=t.length;n--;)if(t[n]===e)return n;return-1}function h(e){return null===e||e===t?"":(""+e).replace(O,"")}function m(e,t){var n,i,o,r,a;if(e)if(n=e.length,n===r){for(i in e)if(e.hasOwnProperty(i)&&(a=e[i],t.call(a,a,i)===!1))break}else for(o=0;n>o&&(a=e[o],t.call(a,a,i)!==!1);o++);return e}function g(e,n,i){for(var o=[],r=e[n];r&&9!==r.nodeType&&(i===t||1!==r.nodeType||!c(r).is(i));)1===r.nodeType&&o.push(r),r=r[n];return o}function p(e,t,n,i){for(var o=[];e;e=e[n])i&&e.nodeType!==i||e===t||o.push(e);return o}var E=document,v=Array.prototype.push,T=Array.prototype.slice,C=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,b=e.Event,y=l("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"),I=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},O=/^\s*|\s*$/g;return c.fn=c.prototype={constructor:c,selector:"",length:0,init:function(e,t){var n,i,a=this;if(!e)return a;if(e.nodeType)return a.context=a[0]=e,a.length=1,a;if(o(e)){if(n="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:C.exec(e),!n)return c(t||document).find(e);if(n[1])for(i=r(e).firstChild;i;)this.add(i),i=i.nextSibling;else{if(i=E.getElementById(n[2]),i.id!==n[2])return a.find(e);a.length=1,a[0]=i}}else this.add(e);return a},toArray:function(){return u(this)},add:function(e){var t=this;return I(e)?v.apply(t,e):e instanceof c?t.add(e.toArray()):v.call(t,e),t},attr:function(e,n){var o=this;if("object"==typeof e)m(e,function(e,t){o.attr(t,e)});else{if(!i(n))return o[0]&&1===o[0].nodeType?o[0].getAttribute(e):t;this.each(function(){1===this.nodeType&&this.setAttribute(e,n)})}return o},css:function(e,n){var o=this;if("object"==typeof e)m(e,function(e,t){o.css(t,e)});else{if(e=e.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}),!i(n))return o[0]?o[0].style[e]:t;"number"!=typeof n||y[e]||(n+="px"),o.each(function(){var t=this.style;"opacity"===e&&this.runtimeStyle&&"undefined"==typeof this.runtimeStyle.opacity&&(t.filter=""===n?"":"alpha(opacity="+100*n+")");try{t[e]=n}catch(i){}})}return o},remove:function(){for(var e,t=this,n=this.length;n--;)e=t[n],b.clean(e),e.parentNode&&e.parentNode.removeChild(e);return this},empty:function(){for(var e,t=this,n=this.length;n--;)for(e=t[n];e.firstChild;)e.removeChild(e.firstChild);return this},html:function(e){var t,n=this;if(i(e)){for(t=n.length;t--;)n[t].innerHTML=e;return n}return n[0]?n[0].innerHTML:""},text:function(e){var t,n=this;if(i(e)){for(t=n.length;t--;)n[t].innerText=n[0].textContent=e;return n}return n[0]?n[0].innerText||n[0].textContent:""},append:function(){return a(this,arguments,function(e){1===this.nodeType&&this.appendChild(e)})},prepend:function(){return a(this,arguments,function(e){1===this.nodeType&&this.insertBefore(e,this.firstChild)})},before:function(){var e=this;return e[0]&&e[0].parentNode?a(e,arguments,function(e){this.parentNode.insertBefore(e,this.nextSibling)}):e},after:function(){var e=this;return e[0]&&e[0].parentNode?a(e,arguments,function(e){this.parentNode.insertBefore(e,this)}):e},appendTo:function(e){return c(e).append(this),this},addClass:function(e){return this.toggleClass(e,!0)},removeClass:function(e){return this.toggleClass(e,!1)},toggleClass:function(e,t){var n=this;return-1!==e.indexOf(" ")?m(e.split(" "),function(){n.toggleClass(this,t)}):n.each(function(n){var i;s(n,e)!==t&&(i=n.className,t?n.className+=i?" "+e:e:n.className=h((" "+i+" ").replace(" "+e+" "," ")))}),n},hasClass:function(e){return s(this[0],e)},each:function(e){return m(this,e)},on:function(e,t){return this.each(function(){b.bind(this,e,t)})},off:function(e,t){return this.each(function(){b.unbind(this,e,t)})},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return new c(T.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},replaceWith:function(e){var t=this;return t[0]&&t[0].parentNode.replaceChild(c(e)[0],t[0]),t},wrap:function(e){return e=c(e)[0],this.each(function(){var t=this,n=e.cloneNode(!1);t.parentNode.insertBefore(n,t),n.appendChild(t)})},unwrap:function(){return this.each(function(){for(var e,t=this,n=t.firstChild;n;)e=n,n=n.nextSibling,t.parentNode.insertBefore(e,t)})},clone:function(){var e=[];return this.each(function(){e.push(this.cloneNode(!0))}),c(e)},find:function(e){var t,n,i=[];for(t=0,n=this.length;n>t;t++)c.find(e,this[t],i);return c(i)},push:v,sort:[].sort,splice:[].splice},d(c,{extend:d,toArray:u,inArray:f,isArray:I,each:m,trim:h,makeMap:l,find:n,expr:n.selectors,unique:n.uniqueSort,text:n.getText,isXMLDoc:n.isXML,contains:n.contains,filter:function(e,t,n){return n&&(e=":not("+e+")"),t=1===t.length?c.find.matchesSelector(t[0],e)?[t[0]]:[]:c.find.matches(e,t)}}),m({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return g(e,"parentNode")},parentsUntil:function(e,t){return g(e,"parentNode",t)},next:function(e){return p(e,"nextSibling",1)},prev:function(e){return p(e,"previousSibling",1)},nextNodes:function(e){return p(e,"nextSibling")},prevNodes:function(e){return p(e,"previousSibling")},children:function(e){return p(e.firstChild,"nextSibling",1)},contents:function(e){return u(("iframe"===e.nodeName?e.contentDocument||e.contentWindow.document:e).childNodes)}},function(e,t){c.fn[e]=function(n){var i,o=this;if(o.length>1)throw new Error("DomQuery only supports traverse functions on a single node.");return o[0]&&(i=t(o[0],n)),i=c(i),n&&"parentsUntil"!==e?i.filter(n):i}}),c.fn.filter=function(e){return c.filter(e)},c.fn.is=function(e){return!!e&&this.filter(e).length>0},c.fn.init.prototype=c.fn,c}),/**
 * Styles.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/html/Styles",[],function(){return function(e,t){function n(e,t,n,i){function o(e){return e=parseInt(e,10).toString(16),e.length>1?e:"0"+e}return"#"+o(t)+o(n)+o(i)}var i,o,r,a,s,l=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,c=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,d=/\s*([^:]+):\s*([^;]+);?/g,u=/\s+$/,f={},h="\ufeff";for(e=e||{},t&&(a=t.getValidStyles(),s=t.getInvalidStyles()),r=("\\\" \\' \\; \\: ; : "+h).split(" "),o=0;o<r.length;o++)f[r[o]]=h+o,f[h+o]=r[o];return{toHex:function(e){return e.replace(l,n)},parse:function(t){function i(e,t,n){var i,r,a,s;if(i=T[e+"-top"+t],i&&(r=T[e+"-right"+t],r&&(a=T[e+"-bottom"+t],a&&(s=T[e+"-left"+t])))){var l=[i,r,a,s];for(o=l.length-1;o--&&l[o]===l[o+1];);o>-1&&n||(T[e+t]=-1==o?l[0]:l.join(" "),delete T[e+"-top"+t],delete T[e+"-right"+t],delete T[e+"-bottom"+t],delete T[e+"-left"+t])}}function r(e){var t,n=T[e];if(n){for(n=n.split(" "),t=n.length;t--;)if(n[t]!==n[0])return!1;return T[e]=n[0],!0}}function a(e,t,n,i){r(t)&&r(n)&&r(i)&&(T[e]=T[t]+" "+T[n]+" "+T[i],delete T[t],delete T[n],delete T[i])}function s(e){return v=!0,f[e]}function h(e,t){return v&&(e=e.replace(/\uFEFF[0-9]/g,function(e){return f[e]})),t||(e=e.replace(/\\([\'\";:])/g,"$1")),e}function m(t,n,i,o,r,a){if(r=r||a)return r=h(r),"'"+r.replace(/\'/g,"\\'")+"'";if(n=h(n||i||o),!e.allow_script_urls){var s=n.replace(/[\s\r\n]+/,"");if(/(java|vb)script:/i.test(s))return"";if(!e.allow_svg_data_urls&&/^data:image\/svg/i.test(s))return""}return C&&(n=C.call(b,n,"style")),"url('"+n.replace(/\'/g,"\\'")+"')"}var g,p,E,v,T={},C=e.url_converter,b=e.url_converter_scope||this;if(t){for(t=t.replace(/[\u0000-\u001F]/g,""),t=t.replace(/\\[\"\';:\uFEFF]/g,s).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(e){return e.replace(/[;:]/g,s)});g=d.exec(t);){if(p=g[1].replace(u,"").toLowerCase(),E=g[2].replace(u,""),E=E.replace(/\\[0-9a-f]+/g,function(e){return String.fromCharCode(parseInt(e.substr(1),16))}),p&&E.length>0){if(!e.allow_script_urls&&("behavior"==p||/expression\s*\(|\/\*|\*\//.test(E)))continue;"font-weight"===p&&"700"===E?E="bold":("color"===p||"background-color"===p)&&(E=E.toLowerCase()),E=E.replace(l,n),E=E.replace(c,m),T[p]=v?h(E,!0):E}d.lastIndex=g.index+g[0].length}i("border","",!0),i("border","-width"),i("border","-color"),i("border","-style"),i("padding",""),i("margin",""),a("border","border-width","border-style","border-color"),"medium none"===T.border&&delete T.border,"none"===T["border-image"]&&delete T["border-image"]}return T},serialize:function(e,t){function n(t){var n,o,r,s;if(n=a[t])for(o=0,r=n.length;r>o;o++)t=n[o],s=e[t],s!==i&&s.length>0&&(c+=(c.length>0?" ":"")+t+": "+s+";")}function o(e,t){var n;return n=s["*"],n&&n[e]?!1:(n=s[t],n&&n[e]?!1:!0)}var r,l,c="";if(t&&a)n("*"),n(t);else for(r in e)l=e[r],l!==i&&l.length>0&&(!s||o(r,t))&&(c+=(c.length>0?" ":"")+r+": "+l+";");return c}}}}),/**
 * TreeWalker.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/dom/TreeWalker",[],function(){return function(e,t){function n(e,n,i,o){var r,a;if(e){if(!o&&e[n])return e[n];if(e!=t){if(r=e[i])return r;for(a=e.parentNode;a&&a!=t;a=a.parentNode)if(r=a[i])return r}}}var i=e;this.current=function(){return i},this.next=function(e){return i=n(i,"firstChild","nextSibling",e)},this.prev=function(e){return i=n(i,"lastChild","previousSibling",e)}}}),/**
 * Tools.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/util/Tools",[],function(){function e(e){return null===e||e===t?"":(""+e).replace(g,"")}function n(e,n){return n?"array"==n&&p(e)?!0:typeof e==n:e!==t}function i(e){var t,n,i=[];for(t=0,n=e.length;n>t;t++)i[t]=e[t];return i}function o(e,t,n){var i;for(e=e||[],t=t||",","string"==typeof e&&(e=e.split(t)),n=n||{},i=e.length;i--;)n[e[i]]={};return n}function r(e,n,i){var o,r;if(!e)return 0;if(i=i||e,e.length!==t){for(o=0,r=e.length;r>o;o++)if(n.call(i,e[o],o,e)===!1)return 0}else for(o in e)if(e.hasOwnProperty(o)&&n.call(i,e[o],o,e)===!1)return 0;return 1}function a(e,t){var n=[];return r(e,function(e){n.push(t(e))}),n}function s(e,t){var n=[];return r(e,function(e){(!t||t(e))&&n.push(e)}),n}function l(e,t,n){var i,o,r,a,s,l=this,c=0;if(e=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(e),r=e[3].match(/(^|\.)(\w+)$/i)[2],o=l.createNS(e[3].replace(/\.\w+$/,""),n),!o[r]){if("static"==e[2])return o[r]=t,void(this.onCreate&&this.onCreate(e[2],e[3],o[r]));t[r]||(t[r]=function(){},c=1),o[r]=t[r],l.extend(o[r].prototype,t),e[5]&&(i=l.resolve(e[5]).prototype,a=e[5].match(/\.(\w+)$/i)[1],s=o[r],c?o[r]=function(){return i[a].apply(this,arguments)}:o[r]=function(){return this.parent=i[a],s.apply(this,arguments)},o[r].prototype[r]=o[r],l.each(i,function(e,t){o[r].prototype[t]=i[t]}),l.each(t,function(e,t){i[t]?o[r].prototype[t]=function(){return this.parent=i[t],e.apply(this,arguments)}:t!=r&&(o[r].prototype[t]=e)})),l.each(t["static"],function(e,t){o[r][t]=e})}}function c(e,t){var n,i;if(e)for(n=0,i=e.length;i>n;n++)if(e[n]===t)return n;return-1}function d(e,n){var i,o,r,a,s=arguments;for(i=1,o=s.length;o>i;i++){n=s[i];for(r in n)n.hasOwnProperty(r)&&(a=n[r],a!==t&&(e[r]=a))}return e}function u(e,t,n,i){i=i||this,e&&(n&&(e=e[n]),r(e,function(e,o){return t.call(i,e,o,n)===!1?!1:void u(e,t,n,i)}))}function f(e,t){var n,i;for(t=t||window,e=e.split("."),n=0;n<e.length;n++)i=e[n],t[i]||(t[i]={}),t=t[i];return t}function h(e,t){var n,i;for(t=t||window,e=e.split("."),n=0,i=e.length;i>n&&(t=t[e[n]],t);n++);return t}function m(t,i){return!t||n(t,"array")?t:a(t.split(i||","),e)}var g=/^\s*|\s*$/g,p=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};return{trim:e,isArray:p,is:n,toArray:i,makeMap:o,each:r,map:a,grep:s,inArray:c,extend:d,create:l,walk:u,createNS:f,resolve:h,explode:m}}),/**
 * Range.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/dom/Range",["tinymce/util/Tools"],function(e){function t(n){function i(){return L.createDocumentFragment()}function o(e,t){I(M,e,t)}function r(e,t){I($,e,t)}function a(e){o(e.parentNode,W(e))}function s(e){o(e.parentNode,W(e)+1)}function l(e){r(e.parentNode,W(e))}function c(e){r(e.parentNode,W(e)+1)}function d(e){e?(A[V]=A[z],A[q]=A[H]):(A[z]=A[V],A[H]=A[q]),A.collapsed=M}function u(e){a(e),c(e)}function f(e){o(e,0),r(e,1===e.nodeType?e.childNodes.length:e.nodeValue.length)}function h(e,t){var n=A[z],i=A[H],o=A[V],r=A[q],a=t.startContainer,s=t.startOffset,l=t.endContainer,c=t.endOffset;return 0===e?y(n,i,a,s):1===e?y(o,r,a,s):2===e?y(o,r,l,c):3===e?y(n,i,l,c):void 0}function m(){O(F)}function g(){return O(B)}function p(){return O(P)}function E(e){var t,i,o=this[z],r=this[H];3!==o.nodeType&&4!==o.nodeType||!o.nodeValue?(o.childNodes.length>0&&(i=o.childNodes[r]),i?o.insertBefore(e,i):3==o.nodeType?n.insertAfter(e,o):o.appendChild(e)):r?r>=o.nodeValue.length?n.insertAfter(e,o):(t=o.splitText(r),o.parentNode.insertBefore(e,t)):o.parentNode.insertBefore(e,o)}function v(e){var t=A.extractContents();A.insertNode(e),e.appendChild(t),A.selectNode(e)}function T(){return U(new t(n),{startContainer:A[z],startOffset:A[H],endContainer:A[V],endOffset:A[q],collapsed:A.collapsed,commonAncestorContainer:A.commonAncestorContainer})}function C(e,t){var n;if(3==e.nodeType)return e;if(0>t)return e;for(n=e.firstChild;n&&t>0;)--t,n=n.nextSibling;return n?n:e}function b(){return A[z]==A[V]&&A[H]==A[q]}function y(e,t,i,o){var r,a,s,l,c,d;if(e==i)return t==o?0:o>t?-1:1;for(r=i;r&&r.parentNode!=e;)r=r.parentNode;if(r){for(a=0,s=e.firstChild;s!=r&&t>a;)a++,s=s.nextSibling;return a>=t?-1:1}for(r=e;r&&r.parentNode!=i;)r=r.parentNode;if(r){for(a=0,s=i.firstChild;s!=r&&o>a;)a++,s=s.nextSibling;return o>a?-1:1}for(l=n.findCommonAncestor(e,i),c=e;c&&c.parentNode!=l;)c=c.parentNode;for(c||(c=l),d=i;d&&d.parentNode!=l;)d=d.parentNode;if(d||(d=l),c==d)return 0;for(s=l.firstChild;s;){if(s==c)return-1;if(s==d)return 1;s=s.nextSibling}}function I(e,t,i){var o,r;for(e?(A[z]=t,A[H]=i):(A[V]=t,A[q]=i),o=A[V];o.parentNode;)o=o.parentNode;for(r=A[z];r.parentNode;)r=r.parentNode;r==o?y(A[z],A[H],A[V],A[q])>0&&A.collapse(e):A.collapse(e),A.collapsed=b(),A.commonAncestorContainer=n.findCommonAncestor(A[z],A[V])}function O(e){var t,n,i,o,r,a,s,l=0,c=0;if(A[z]==A[V])return D(e);for(t=A[V],n=t.parentNode;n;t=n,n=n.parentNode){if(n==A[z])return R(t,e);++l}for(t=A[z],n=t.parentNode;n;t=n,n=n.parentNode){if(n==A[V])return _(t,e);++c}for(i=c-l,o=A[z];i>0;)o=o.parentNode,i--;for(r=A[V];0>i;)r=r.parentNode,i++;for(a=o.parentNode,s=r.parentNode;a!=s;a=a.parentNode,s=s.parentNode)o=a,r=s;return k(o,r,e)}function D(e){var t,n,o,r,a,s,l,c,d;if(e!=F&&(t=i()),A[H]==A[q])return t;if(3==A[z].nodeType){if(n=A[z].nodeValue,o=n.substring(A[H],A[q]),e!=P&&(r=A[z],c=A[H],d=A[q]-A[H],0===c&&d>=r.nodeValue.length-1?r.parentNode.removeChild(r):r.deleteData(c,d),A.collapse(M)),e==F)return;return o.length>0&&t.appendChild(L.createTextNode(o)),t}for(r=C(A[z],A[H]),a=A[q]-A[H];r&&a>0;)s=r.nextSibling,l=S(r,e),t&&t.appendChild(l),--a,r=s;return e!=P&&A.collapse(M),t}function R(e,t){var n,o,r,a,s,l;if(t!=F&&(n=i()),o=K(e,t),n&&n.appendChild(o),r=W(e),a=r-A[H],0>=a)return t!=P&&(A.setEndBefore(e),A.collapse($)),n;for(o=e.previousSibling;a>0;)s=o.previousSibling,l=S(o,t),n&&n.insertBefore(l,n.firstChild),--a,o=s;return t!=P&&(A.setEndBefore(e),A.collapse($)),n}function _(e,t){var n,o,r,a,s,l;for(t!=F&&(n=i()),r=x(e,t),n&&n.appendChild(r),o=W(e),++o,a=A[q]-o,r=e.nextSibling;r&&a>0;)s=r.nextSibling,l=S(r,t),n&&n.appendChild(l),--a,r=s;return t!=P&&(A.setStartAfter(e),A.collapse(M)),n}function k(e,t,n){var o,r,a,s,l,c,d;for(n!=F&&(r=i()),o=x(e,n),r&&r.appendChild(o),a=W(e),s=W(t),++a,l=s-a,c=e.nextSibling;l>0;)d=c.nextSibling,o=S(c,n),r&&r.appendChild(o),c=d,--l;return o=K(t,n),r&&r.appendChild(o),n!=P&&(A.setStartAfter(e),A.collapse(M)),r}function K(e,t){var n,i,o,r,a,s=C(A[V],A[q]-1),l=s!=A[V];if(s==e)return w(s,l,$,t);for(n=s.parentNode,i=w(n,$,$,t);n;){for(;s;)o=s.previousSibling,r=w(s,l,$,t),t!=F&&i.insertBefore(r,i.firstChild),l=M,s=o;if(n==e)return i;s=n.previousSibling,n=n.parentNode,a=w(n,$,$,t),t!=F&&a.appendChild(i),i=a}}function x(e,t){var n,i,o,r,a,s=C(A[z],A[H]),l=s!=A[z];if(s==e)return w(s,l,M,t);for(n=s.parentNode,i=w(n,$,M,t);n;){for(;s;)o=s.nextSibling,r=w(s,l,M,t),t!=F&&i.appendChild(r),l=M,s=o;if(n==e)return i;s=n.nextSibling,n=n.parentNode,a=w(n,$,M,t),t!=F&&a.appendChild(i),i=a}}function w(e,t,i,o){var r,a,s,l,c;if(t)return S(e,o);if(3==e.nodeType){if(r=e.nodeValue,i?(l=A[H],a=r.substring(l),s=r.substring(0,l)):(l=A[q],a=r.substring(0,l),s=r.substring(l)),o!=P&&(e.nodeValue=s),o==F)return;return c=n.clone(e,$),c.nodeValue=a,c}if(o!=F)return n.clone(e,$)}function S(e,t){return t!=F?t==P?n.clone(e,M):e:void e.parentNode.removeChild(e)}function N(){return n.create("body",null,p()).outerText}var A=this,L=n.doc,B=0,P=1,F=2,M=!0,$=!1,H="startOffset",z="startContainer",V="endContainer",q="endOffset",U=e.extend,W=n.nodeIndex;return U(A,{startContainer:L,startOffset:0,endContainer:L,endOffset:0,collapsed:M,commonAncestorContainer:L,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:o,setEnd:r,setStartBefore:a,setStartAfter:s,setEndBefore:l,setEndAfter:c,collapse:d,selectNode:u,selectNodeContents:f,compareBoundaryPoints:h,deleteContents:m,extractContents:g,cloneContents:p,insertNode:E,surroundContents:v,cloneRange:T,toStringIE:N}),A}return t.prototype.toString=function(){return this.toStringIE()},t}),/**
 * Entities.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/html/Entities",["tinymce/util/Tools"],function(e){function t(e){var t;return t=document.createElement("div"),t.innerHTML=e,t.textContent||t.innerText||e}function n(e,t){var n,i,r,a={};if(e){for(e=e.split(","),t=t||10,n=0;n<e.length;n+=2)i=String.fromCharCode(parseInt(e[n],t)),o[i]||(r="&"+e[n+1]+";",a[i]=r,a[r]=i);return a}}var i,o,r,a=e.makeMap,s=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,l=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,c=/[<>&\"\']/g,d=/&(#x|#)?([\w]+);/g,u={128:"\u20ac",130:"\u201a",131:"\u0192",132:"\u201e",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02c6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017d",145:"\u2018",146:"\u2019",147:"\u201c",148:"\u201d",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02dc",153:"\u2122",154:"\u0161",155:"\u203a",156:"\u0153",158:"\u017e",159:"\u0178"};o={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},r={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},i=n("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32);var f={encodeRaw:function(e,t){return e.replace(t?s:l,function(e){return o[e]||e})},encodeAllRaw:function(e){return(""+e).replace(c,function(e){return o[e]||e})},encodeNumeric:function(e,t){return e.replace(t?s:l,function(e){return e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":o[e]||"&#"+e.charCodeAt(0)+";"})},encodeNamed:function(e,t,n){return n=n||i,e.replace(t?s:l,function(e){return o[e]||n[e]||e})},getEncodeFunc:function(e,t){function r(e,n){return e.replace(n?s:l,function(e){return o[e]||t[e]||"&#"+e.charCodeAt(0)+";"||e})}function c(e,n){return f.encodeNamed(e,n,t)}return t=n(t)||i,e=a(e.replace(/\+/g,",")),e.named&&e.numeric?r:e.named?t?c:f.encodeNamed:e.numeric?f.encodeNumeric:f.encodeRaw},decode:function(e){return e.replace(d,function(e,n,o){return n?(o=parseInt(o,2===n.length?16:10),o>65535?(o-=65536,String.fromCharCode(55296+(o>>10),56320+(1023&o))):u[o]||String.fromCharCode(o)):r[e]||i[e]||t(e)})}};return f}),/**
 * Env.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/Env",[],function(){var e,t,n,i,o,r,a,s=navigator,l=s.userAgent;e=window.opera&&window.opera.buildNumber,t=/WebKit/.test(l),n=!t&&!e&&/MSIE/gi.test(l)&&/Explorer/gi.test(s.appName),n=n&&/MSIE (\w+)\./.exec(l)[1],i=-1==l.indexOf("Trident/")||-1==l.indexOf("rv:")&&-1==s.appName.indexOf("Netscape")?!1:11,n=n||i,o=!t&&!i&&/Gecko/.test(l),r=-1!=l.indexOf("Mac"),a=/(iPad|iPhone)/.test(l);var c=!a||l.match(/AppleWebKit\/(\d*)/)[1]>=534;return{opera:e,webkit:t,ie:n,gecko:o,mac:r,iOS:a,contentEditable:c,transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:8!=n,range:window.getSelection&&"Range"in window,documentMode:n?document.documentMode||7:10}}),/**
 * StyleSheetLoader.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/dom/StyleSheetLoader",[],function(){return function(e,t){function n(t){e.getElementsByTagName("head")[0].appendChild(t)}function i(t,i,s){function l(){for(var e=E.passed,t=e.length;t--;)e[t]();E.status=2,E.passed=[],E.failed=[]}function c(){for(var e=E.failed,t=e.length;t--;)e[t]();E.status=3,E.passed=[],E.failed=[]}function d(){var e=navigator.userAgent.match(/WebKit\/(\d*)/);return!!(e&&e[1]<536)}function u(e,t){e()||((new Date).getTime()-p<o?window.setTimeout(t,0):c())}function f(){u(function(){for(var t,n,i=e.styleSheets,o=i.length;o--;)if(t=i[o],n=t.ownerNode?t.ownerNode:t.owningElement,n&&n.id===m.id)return l(),!0},f)}function h(){u(function(){try{var e=g.sheet.cssRules;return l(),!!e}catch(t){}},h)}var m,g,p,E;if(a[t]?E=a[t]:(E={passed:[],failed:[]},a[t]=E),i&&E.passed.push(i),s&&E.failed.push(s),1!=E.status){if(2==E.status)return void l();if(3==E.status)return void c();if(E.status=1,m=e.createElement("link"),m.rel="stylesheet",m.type="text/css",m.id="u"+r++,m.async=!1,m.defer=!1,p=(new Date).getTime(),"onload"in m&&!d())m.onload=f,m.onerror=c;else{if(navigator.userAgent.indexOf("Firefox")>0)return g=e.createElement("style"),g.textContent='@import "'+t+'"',h(),void n(g);f()}n(m),m.href=t}}var o,r=0,a={};t=t||{},o=t.maxLoadTime||5e3,this.load=i}}),/**
 * DOMUtils.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/dom/DOMUtils",["tinymce/dom/Sizzle","tinymce/html/Styles","tinymce/dom/EventUtils","tinymce/dom/TreeWalker","tinymce/dom/Range","tinymce/html/Entities","tinymce/Env","tinymce/util/Tools","tinymce/dom/StyleSheetLoader"],function(e,n,i,o,r,a,s,l,c){function d(e,t){var o,r=this;r.doc=e,r.win=window,r.files={},r.counter=0,r.stdMode=!E||e.documentMode>=8,r.boxModel=!E||"CSS1Compat"==e.compatMode||r.stdMode,r.hasOuterHTML="outerHTML"in e.createElement("a"),r.styleSheetLoader=new c(e),this.boundEvents=[],r.settings=t=g({keep_values:!1,hex_colors:1},t),r.schema=t.schema,r.styles=new n({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope},t.schema),r.fixDoc(e),r.events=t.ownEvents?new i(t.proxy):i.Event,o=t.schema?t.schema.getBlockElements():{},r.isBlock=function(e){if(!e)return!1;var t=e.nodeType;return t?!(1!==t||!o[e.nodeName]):!!o[e]}}var u=l.each,f=l.is,h=l.grep,m=l.trim,g=l.extend,p=s.webkit,E=s.ie,v=/^([a-z0-9],?)+$/i,T=/^[ \t\r\n]*$/,C=l.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," ");return d.prototype={root:null,props:{"for":"htmlFor","class":"className",className:"className",checked:"checked",disabled:"disabled",maxlength:"maxLength",readonly:"readOnly",selected:"selected",value:"value",id:"id",name:"name",type:"type"},fixDoc:function(e){var t,n=this.settings;if(E&&n.schema){"abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video".replace(/\w+/g,function(t){e.createElement(t)});for(t in n.schema.getCustomElements())e.createElement(t)}},clone:function(e,t){var n,i,o=this;return!E||1!==e.nodeType||t?e.cloneNode(t):(i=o.doc,t?n.firstChild:(n=i.createElement(e.nodeName),u(o.getAttribs(e),function(t){o.setAttrib(n,t.nodeName,o.getAttrib(e,t.nodeName))}),n))},getRoot:function(){var e=this;return e.get(e.settings.root_element)||e.doc.body},getViewPort:function(e){var t,n;return e=e?e:this.win,t=e.document,n=this.boxModel?t.documentElement:t.body,{x:e.pageXOffset||n.scrollLeft,y:e.pageYOffset||n.scrollTop,w:e.innerWidth||n.clientWidth,h:e.innerHeight||n.clientHeight}},getRect:function(e){var t,n,i=this;return e=i.get(e),t=i.getPos(e),n=i.getSize(e),{x:t.x,y:t.y,w:n.w,h:n.h}},getSize:function(e){var t,n,i=this;return e=i.get(e),t=i.getStyle(e,"width"),n=i.getStyle(e,"height"),-1===t.indexOf("px")&&(t=0),-1===n.indexOf("px")&&(n=0),{w:parseInt(t,10)||e.offsetWidth||e.clientWidth,h:parseInt(n,10)||e.offsetHeight||e.clientHeight}},getParent:function(e,t,n){return this.getParents(e,t,n,!1)},getParents:function(e,n,i,o){var r,a=this,s=[];for(e=a.get(e),o=o===t,i=i||("BODY"!=a.getRoot().nodeName?a.getRoot().parentNode:null),f(n,"string")&&(r=n,n="*"===n?function(e){return 1==e.nodeType}:function(e){return a.is(e,r)});e&&e!=i&&e.nodeType&&9!==e.nodeType;){if(!n||n(e)){if(!o)return e;s.push(e)}e=e.parentNode}return o?s:null},get:function(e){var t;return e&&this.doc&&"string"==typeof e&&(t=e,e=this.doc.getElementById(e),e&&e.id!==t)?this.doc.getElementsByName(t)[1]:e},getNext:function(e,t){return this._findSib(e,t,"nextSibling")},getPrev:function(e,t){return this._findSib(e,t,"previousSibling")},select:function(t,n){var i=this;return e(t,i.get(n)||i.get(i.settings.root_element)||i.doc,[])},is:function(n,i){var o;if(n.length===t){if("*"===i)return 1==n.nodeType;if(v.test(i)){for(i=i.toLowerCase().split(/,/),n=n.nodeName.toLowerCase(),o=i.length-1;o>=0;o--)if(i[o]==n)return!0;return!1}}if(n.nodeType&&1!=n.nodeType)return!1;var r=n.nodeType?[n]:n;return e(i,r[0].ownerDocument||r[0],null,r).length>0},add:function(e,t,n,i,o){var r=this;return this.run(e,function(e){var a;return a=f(t,"string")?r.doc.createElement(t):t,r.setAttribs(a,n),i&&(i.nodeType?a.appendChild(i):r.setHTML(a,i)),o?a:e.appendChild(a)})},create:function(e,t,n){return this.add(this.doc.createElement(e),e,t,n,1)},createHTML:function(e,t,n){var i,o="";o+="<"+e;for(i in t)t.hasOwnProperty(i)&&null!==t[i]&&(o+=" "+i+'="'+this.encode(t[i])+'"');return"undefined"!=typeof n?o+">"+n+"</"+e+">":o+" />"},createFragment:function(e){var t,n,i,o=this.doc;for(i=o.createElement("div"),t=o.createDocumentFragment(),e&&(i.innerHTML=e);n=i.firstChild;)t.appendChild(n);return t},remove:function(e,t){return this.run(e,function(e){var n,i=e.parentNode;if(!i)return null;if(t)for(;n=e.firstChild;)!E||3!==n.nodeType||n.nodeValue?i.insertBefore(n,e):e.removeChild(n);return i.removeChild(e)})},setStyle:function(e,t,n){return this.run(e,function(e){var i,o,r=this;if(t)if("string"==typeof t){i=e.style,t=t.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}),"number"!=typeof n&&!/^[\-0-9\.]+$/.test(n)||C[t]||(n+="px"),"opacity"===t&&e.runtimeStyle&&"undefined"==typeof e.runtimeStyle.opacity&&(i.filter=""===n?"":"alpha(opacity="+100*n+")"),"float"==t&&(t="cssFloat"in e.style?"cssFloat":"styleFloat");try{i[t]=n}catch(a){}r.settings.update_styles&&e.removeAttribute("data-mce-style")}else for(o in t)r.setStyle(e,o,t[o])})},getStyle:function(e,n,i){if(e=this.get(e)){if(this.doc.defaultView&&i){n=n.replace(/[A-Z]/g,function(e){return"-"+e});try{return this.doc.defaultView.getComputedStyle(e,null).getPropertyValue(n)}catch(o){return null}}return n=n.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}),"float"==n&&(n=E?"styleFloat":"cssFloat"),e.currentStyle&&i?e.currentStyle[n]:e.style?e.style[n]:t}},setStyles:function(e,t){this.setStyle(e,t)},css:function(e,t,n){this.setStyle(e,t,n)},removeAllAttribs:function(e){return this.run(e,function(e){var t,n=e.attributes;for(t=n.length-1;t>=0;t--)e.removeAttributeNode(n.item(t))})},setAttrib:function(e,t,n){var i=this;if(e&&t)return this.run(e,function(e){var o=i.settings,r=e.getAttribute(t);if(null!==n)switch(t){case"style":if(!f(n,"string"))return void u(n,function(t,n){i.setStyle(e,n,t)});o.keep_values&&(n?e.setAttribute("data-mce-style",n,2):e.removeAttribute("data-mce-style",2)),e.style.cssText=n;break;case"class":e.className=n||"";break;case"src":case"href":o.keep_values&&(o.url_converter&&(n=o.url_converter.call(o.url_converter_scope||i,n,t,e)),i.setAttrib(e,"data-mce-"+t,n,2));break;case"shape":e.setAttribute("data-mce-style",n)}f(n)&&null!==n&&0!==n.length?e.setAttribute(t,""+n,2):e.removeAttribute(t,2),r!=n&&o.onSetAttrib&&o.onSetAttrib({attrElm:e,attrName:t,attrValue:n})})},setAttribs:function(e,t){var n=this;return this.run(e,function(e){u(t,function(t,i){n.setAttrib(e,i,t)})})},getAttrib:function(e,t,n){var i,o,r=this;if(e=r.get(e),!e||1!==e.nodeType)return n===o?!1:n;if(f(n)||(n=""),/^(src|href|style|coords|shape)$/.test(t)&&(i=e.getAttribute("data-mce-"+t)))return i;if(E&&r.props[t]&&(i=e[r.props[t]],i=i&&i.nodeValue?i.nodeValue:i),i||(i=e.getAttribute(t,2)),/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noshade|nowrap|readonly|selected)$/.test(t))return e[r.props[t]]===!0&&""===i?t:i?t:"";if("FORM"===e.nodeName&&e.getAttributeNode(t))return e.getAttributeNode(t).nodeValue;if("style"===t&&(i=i||e.style.cssText,i&&(i=r.serializeStyle(r.parseStyle(i),e.nodeName),r.settings.keep_values&&e.setAttribute("data-mce-style",i))),p&&"class"===t&&i&&(i=i.replace(/(apple|webkit)\-[a-z\-]+/gi,"")),E)switch(t){case"rowspan":case"colspan":1===i&&(i="");break;case"size":("+0"===i||20===i||0===i)&&(i="");break;case"width":case"height":case"vspace":case"checked":case"disabled":case"readonly":0===i&&(i="");break;case"hspace":-1===i&&(i="");break;case"maxlength":case"tabindex":(32768===i||2147483647===i||"32768"===i)&&(i="");break;case"multiple":case"compact":case"noshade":case"nowrap":return 65535===i?t:n;case"shape":i=i.toLowerCase();break;default:0===t.indexOf("on")&&i&&(i=(""+i).replace(/^function\s+\w+\(\)\s+\{\s+(.*)\s+\}$/,"$1"))}return i!==o&&null!==i&&""!==i?""+i:n},getPos:function(e,t){var n,i,o=this,r=0,a=0,s=o.doc;if(e=o.get(e),t=t||s.body,e){if(t===s.body&&e.getBoundingClientRect)return i=e.getBoundingClientRect(),t=o.boxModel?s.documentElement:s.body,r=i.left+(s.documentElement.scrollLeft||s.body.scrollLeft)-t.clientLeft,a=i.top+(s.documentElement.scrollTop||s.body.scrollTop)-t.clientTop,{x:r,y:a};for(n=e;n&&n!=t&&n.nodeType;)r+=n.offsetLeft||0,a+=n.offsetTop||0,n=n.offsetParent;for(n=e.parentNode;n&&n!=t&&n.nodeType;)r-=n.scrollLeft||0,a-=n.scrollTop||0,n=n.parentNode}return{x:r,y:a}},parseStyle:function(e){return this.styles.parse(e)},serializeStyle:function(e,t){return this.styles.serialize(e,t)},addStyle:function(e){var t,n,i=this,o=i.doc;if(i!==d.DOM&&o===document){var r=d.DOM.addedStyles;if(r=r||[],r[e])return;r[e]=!0,d.DOM.addedStyles=r}n=o.getElementById("mceDefaultStyles"),n||(n=o.createElement("style"),n.id="mceDefaultStyles",n.type="text/css",t=o.getElementsByTagName("head")[0],t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n)),n.styleSheet?n.styleSheet.cssText+=e:n.appendChild(o.createTextNode(e))},loadCSS:function(e){var t,n=this,i=n.doc;return n!==d.DOM&&i===document?void d.DOM.loadCSS(e):(e||(e=""),t=i.getElementsByTagName("head")[0],void u(e.split(","),function(e){var o;n.files[e]||(n.files[e]=!0,o=n.create("link",{rel:"stylesheet",href:e}),E&&i.documentMode&&i.recalc&&(o.onload=function(){i.recalc&&i.recalc(),o.onload=null}),t.appendChild(o))}))},addClass:function(e,t){return this.run(e,function(e){var n;return t?this.hasClass(e,t)?e.className:(n=this.removeClass(e,t),e.className=n=(""!==n?n+" ":"")+t,n):0})},removeClass:function(e,t){var n,i=this;return i.run(e,function(e){var o;return i.hasClass(e,t)?(n||(n=new RegExp("(^|\\s+)"+t+"(\\s+|$)","g")),o=e.className.replace(n," "),o=m(" "!=o?o:""),e.className=o,o||(e.removeAttribute("class"),e.removeAttribute("className")),o):e.className})},hasClass:function(e,t){return e=this.get(e),e&&t?-1!==(" "+e.className+" ").indexOf(" "+t+" "):!1},toggleClass:function(e,n,i){i=i===t?!this.hasClass(e,n):i,this.hasClass(e,n)!==i&&(i?this.addClass(e,n):this.removeClass(e,n))},show:function(e){return this.setStyle(e,"display","block")},hide:function(e){return this.setStyle(e,"display","none")},isHidden:function(e){return e=this.get(e),!e||"none"==e.style.display||"none"==this.getStyle(e,"display")},uniqueId:function(e){return(e?e:"mce_")+this.counter++},setHTML:function(e,t){var n=this;return n.run(e,function(e){if(E){for(;e.firstChild;)e.removeChild(e.firstChild);try{e.innerHTML="<br />"+t,e.removeChild(e.firstChild)}catch(i){var o=n.create("div");o.innerHTML="<br />"+t,u(h(o.childNodes),function(t,n){n&&e.canHaveHTML&&e.appendChild(t)})}}else e.innerHTML=t;return t})},getOuterHTML:function(e){var t,n=this;return(e=n.get(e))?1===e.nodeType&&n.hasOuterHTML?e.outerHTML:(t=(e.ownerDocument||n.doc).createElement("body"),t.appendChild(e.cloneNode(!0)),t.innerHTML):null},setOuterHTML:function(e,t,n){var i=this;return i.run(e,function(e){function o(){var o,r;for(r=n.createElement("body"),r.innerHTML=t,o=r.lastChild;o;)i.insertAfter(o.cloneNode(!0),e),o=o.previousSibling;i.remove(e)}if(1==e.nodeType)if(n=n||e.ownerDocument||i.doc,E)try{1==e.nodeType&&i.hasOuterHTML?e.outerHTML=t:o()}catch(r){o()}else o()})},decode:a.decode,encode:a.encodeAllRaw,insertAfter:function(e,t){return t=this.get(t),this.run(e,function(e){var n,i;return n=t.parentNode,i=t.nextSibling,i?n.insertBefore(e,i):n.appendChild(e),e})},replace:function(e,t,n){var i=this;return i.run(t,function(t){return f(t,"array")&&(e=e.cloneNode(!0)),n&&u(h(t.childNodes),function(t){e.appendChild(t)}),t.parentNode.replaceChild(e,t)})},rename:function(e,t){var n,i=this;return e.nodeName!=t.toUpperCase()&&(n=i.create(t),u(i.getAttribs(e),function(t){i.setAttrib(n,t.nodeName,i.getAttrib(e,t.nodeName))}),i.replace(n,e,1)),n||e},findCommonAncestor:function(e,t){for(var n,i=e;i;){for(n=t;n&&i!=n;)n=n.parentNode;if(i==n)break;i=i.parentNode}return!i&&e.ownerDocument?e.ownerDocument.documentElement:i},toHex:function(e){return this.styles.toHex(l.trim(e))},run:function(e,t,n){var i,o=this;return"string"==typeof e&&(e=o.get(e)),e?(n=n||this,e.nodeType||!e.length&&0!==e.length?t.call(n,e):(i=[],u(e,function(e,r){e&&("string"==typeof e&&(e=o.get(e)),i.push(t.call(n,e,r)))}),i)):!1},getAttribs:function(e){var t;if(e=this.get(e),!e)return[];if(E){if(t=[],"OBJECT"==e.nodeName)return e.attributes;"OPTION"===e.nodeName&&this.getAttrib(e,"selected")&&t.push({specified:1,nodeName:"selected"});var n=/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi;return e.cloneNode(!1).outerHTML.replace(n,"").replace(/[\w:\-]+/gi,function(e){t.push({specified:1,nodeName:e})}),t}return e.attributes},isEmpty:function(e,t){var n,i,r,a,s,l=this,c=0;if(e=e.firstChild){a=new o(e,e.parentNode),t=t||l.schema?l.schema.getNonEmptyElements():null;do{if(r=e.nodeType,1===r){if(e.getAttribute("data-mce-bogus"))continue;if(s=e.nodeName.toLowerCase(),t&&t[s]){if("br"===s){c++;continue}return!1}for(i=l.getAttribs(e),n=i.length;n--;)if(s=i[n].nodeName,"name"===s||"data-mce-bookmark"===s)return!1}if(8==r)return!1;if(3===r&&!T.test(e.nodeValue))return!1}while(e=a.next())}return 1>=c},createRng:function(){var e=this.doc;return e.createRange?e.createRange():new r(this)},nodeIndex:function(e,t){var n,i,o=0;if(e)for(n=e.nodeType,e=e.previousSibling;e;e=e.previousSibling)i=e.nodeType,(!t||3!=i||i!=n&&e.nodeValue.length)&&(o++,n=i);return o},split:function(e,t,n){function i(e){function t(e){var t=e.previousSibling&&"SPAN"==e.previousSibling.nodeName,n=e.nextSibling&&"SPAN"==e.nextSibling.nodeName;return t&&n}var n,o=e.childNodes,r=e.nodeType;if(1!=r||"bookmark"!=e.getAttribute("data-mce-type")){for(n=o.length-1;n>=0;n--)i(o[n]);if(9!=r){if(3==r&&e.nodeValue.length>0){var a=m(e.nodeValue).length;if(!s.isBlock(e.parentNode)||a>0||0===a&&t(e))return}else if(1==r&&(o=e.childNodes,1==o.length&&o[0]&&1==o[0].nodeType&&"bookmark"==o[0].getAttribute("data-mce-type")&&e.parentNode.insertBefore(o[0],e),o.length||/^(br|hr|input|img)$/i.test(e.nodeName)))return;s.remove(e)}return e}}var o,r,a,s=this,l=s.createRng();return e&&t?(l.setStart(e.parentNode,s.nodeIndex(e)),l.setEnd(t.parentNode,s.nodeIndex(t)),o=l.extractContents(),l=s.createRng(),l.setStart(t.parentNode,s.nodeIndex(t)+1),l.setEnd(e.parentNode,s.nodeIndex(e)+1),r=l.extractContents(),a=e.parentNode,a.insertBefore(i(o),e),n?a.replaceChild(n,t):a.insertBefore(t,e),a.insertBefore(i(r),e),s.remove(e),n||t):void 0},bind:function(e,t,n,i){var o=this;if(l.isArray(e)){for(var r=e.length;r--;)e[r]=o.bind(e[r],t,n,i);return e}return!o.settings.collect||e!==o.doc&&e!==o.win||o.boundEvents.push([e,t,n,i]),o.events.bind(e,t,n,i||o)},unbind:function(e,t,n){var i,o=this;if(l.isArray(e)){for(i=e.length;i--;)e[i]=o.unbind(e[i],t,n);return e}if(o.boundEvents&&(e===o.doc||e===o.win))for(i=o.boundEvents.length;i--;){var r=o.boundEvents[i];e!=r[0]||t&&t!=r[1]||n&&n!=r[2]||this.events.unbind(r[0],r[1],r[2])}return this.events.unbind(e,t,n)},fire:function(e,t,n){return this.events.fire(e,t,n)},getContentEditable:function(e){var t;return e&&1==e.nodeType?(t=e.getAttribute("data-mce-contenteditable"),t&&"inherit"!==t?t:"inherit"!==e.contentEditable?e.contentEditable:null):null},getContentEditableParent:function(e){for(var t=this.getRoot(),n=null;e&&e!==t&&(n=this.getContentEditable(e),null===n);e=e.parentNode);return n},destroy:function(){var t=this;if(t.boundEvents){for(var n=t.boundEvents.length;n--;){var i=t.boundEvents[n];this.events.unbind(i[0],i[1],i[2])}t.boundEvents=null}e.setDocument&&e.setDocument(),t.win=t.doc=t.root=t.events=t.frag=null},isChildOf:function(e,t){for(;e;){if(t===e)return!0;e=e.parentNode}return!1},dumpRng:function(e){return"startContainer: "+e.startContainer.nodeName+", startOffset: "+e.startOffset+", endContainer: "+e.endContainer.nodeName+", endOffset: "+e.endOffset},_findSib:function(e,t,n){var i=this,o=t;if(e)for("string"==typeof o&&(o=function(e){return i.is(e,t)}),e=e[n];e;e=e[n])if(o(e))return e;return null}},d.DOM=new d(document),d}),/**
 * ScriptLoader.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/dom/ScriptLoader",["tinymce/dom/DOMUtils","tinymce/util/Tools"],function(e,t){function n(){function e(e,t){function n(){s.remove(a),r&&(r.onreadystatechange=r.onload=r=null),t()}function o(){"undefined"!=typeof console&&console.log&&console.log("Failed to load: "+e)}var r,a,s=i;a=s.uniqueId(),r=document.createElement("script"),r.id=a,r.type="text/javascript",r.src=e,"onreadystatechange"in r?r.onreadystatechange=function(){/loaded|complete/.test(r.readyState)&&n()}:r.onload=n,r.onerror=o,(document.getElementsByTagName("head")[0]||document.body).appendChild(r)}var t,n=0,a=1,s=2,l={},c=[],d={},u=[],f=0;this.isDone=function(e){return l[e]==s},this.markDone=function(e){l[e]=s},this.add=this.load=function(e,i,o){var r=l[e];r==t&&(c.push(e),l[e]=n),i&&(d[e]||(d[e]=[]),d[e].push({func:i,scope:o||this}))},this.loadQueue=function(e,t){this.loadScripts(c,e,t)},this.loadScripts=function(n,i,c){function h(e){o(d[e],function(e){e.func.call(e.scope)}),d[e]=t}var m;u.push({func:i,scope:c||this}),(m=function(){var t=r(n);n.length=0,o(t,function(t){return l[t]==s?void h(t):void(l[t]!=a&&(l[t]=a,f++,e(t,function(){l[t]=s,f--,h(t),m()})))}),f||(o(u,function(e){e.func.call(e.scope)}),u.length=0)})()}}var i=e.DOM,o=t.each,r=t.grep;return n.ScriptLoader=new n,n}),/**
 * AddOnManager.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/AddOnManager",["tinymce/dom/ScriptLoader","tinymce/util/Tools"],function(e,n){function i(){var e=this;e.items=[],e.urls={},e.lookup={}}var o=n.each;return i.prototype={get:function(e){return this.lookup[e]?this.lookup[e].instance:t},dependencies:function(e){var t;return this.lookup[e]&&(t=this.lookup[e].dependencies),t||[]},requireLangPack:function(t,n){var o=i.language;if(o&&i.languageLoad!==!1){if(n)if(n=","+n+",",-1!=n.indexOf(","+o.substr(0,2)+","))o=o.substr(0,2);else if(-1==n.indexOf(","+o+","))return;e.ScriptLoader.add(this.urls[t]+"/langs/"+o+".js")}},add:function(e,t,n){return this.items.push(t),this.lookup[e]={instance:t,dependencies:n},t},createUrl:function(e,t){return"object"==typeof t?t:{prefix:e.prefix,resource:t,suffix:e.suffix}},addComponents:function(t,n){var i=this.urls[t];o(n,function(t){e.ScriptLoader.add(i+"/"+t)})},load:function(n,r,a,s){function l(){var i=c.dependencies(n);o(i,function(e){var n=c.createUrl(r,e);c.load(n.resource,n,t,t)}),a&&(s?a.call(s):a.call(e))}var c=this,d=r;c.urls[n]||("object"==typeof r&&(d=r.prefix+r.resource+r.suffix),0!==d.indexOf("/")&&-1==d.indexOf("://")&&(d=i.baseURL+"/"+d),c.urls[n]=d.substring(0,d.lastIndexOf("/")),c.lookup[n]?l():e.ScriptLoader.add(d,l,s))}},i.PluginManager=new i,i.ThemeManager=new i,i}),/**
 * Node.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/html/Node",[],function(){function e(e,t,n){var i,o,r=n?"lastChild":"firstChild",a=n?"prev":"next";if(e[r])return e[r];if(e!==t){if(i=e[a])return i;for(o=e.parent;o&&o!==t;o=o.parent)if(i=o[a])return i}}function t(e,t){this.name=e,this.type=t,1===t&&(this.attributes=[],this.attributes.map={})}var n=/^[ \t\r\n]*$/,i={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};return t.prototype={replace:function(e){var t=this;return e.parent&&e.remove(),t.insert(e,t),t.remove(),t},attr:function(e,t){var n,i,o,r=this;if("string"!=typeof e){for(i in e)r.attr(i,e[i]);return r}if(n=r.attributes){if(t!==o){if(null===t){if(e in n.map)for(delete n.map[e],i=n.length;i--;)if(n[i].name===e)return n=n.splice(i,1),r;return r}if(e in n.map){for(i=n.length;i--;)if(n[i].name===e){n[i].value=t;break}}else n.push({name:e,value:t});return n.map[e]=t,r}return n.map[e]}},clone:function(){var e,n,i,o,r,a=this,s=new t(a.name,a.type);if(i=a.attributes){for(r=[],r.map={},e=0,n=i.length;n>e;e++)o=i[e],"id"!==o.name&&(r[r.length]={name:o.name,value:o.value},r.map[o.name]=o.value);s.attributes=r}return s.value=a.value,s.shortEnded=a.shortEnded,s},wrap:function(e){var t=this;return t.parent.insert(e,t),e.append(t),t},unwrap:function(){var e,t,n=this;for(e=n.firstChild;e;)t=e.next,n.insert(e,n,!0),e=t;n.remove()},remove:function(){var e=this,t=e.parent,n=e.next,i=e.prev;return t&&(t.firstChild===e?(t.firstChild=n,n&&(n.prev=null)):i.next=n,t.lastChild===e?(t.lastChild=i,i&&(i.next=null)):n.prev=i,e.parent=e.next=e.prev=null),e},append:function(e){var t,n=this;return e.parent&&e.remove(),t=n.lastChild,t?(t.next=e,e.prev=t,n.lastChild=e):n.lastChild=n.firstChild=e,e.parent=n,e},insert:function(e,t,n){var i;return e.parent&&e.remove(),i=t.parent||this,n?(t===i.firstChild?i.firstChild=e:t.prev.next=e,e.prev=t.prev,e.next=t,t.prev=e):(t===i.lastChild?i.lastChild=e:t.next.prev=e,e.next=t.next,e.prev=t,t.next=e),e.parent=i,e},getAll:function(t){var n,i=this,o=[];for(n=i.firstChild;n;n=e(n,i))n.name===t&&o.push(n);return o},empty:function(){var t,n,i,o=this;if(o.firstChild){for(t=[],i=o.firstChild;i;i=e(i,o))t.push(i);for(n=t.length;n--;)i=t[n],i.parent=i.firstChild=i.lastChild=i.next=i.prev=null}return o.firstChild=o.lastChild=null,o},isEmpty:function(t){var i,o,r=this,a=r.firstChild;if(a)do{if(1===a.type){if(a.attributes.map["data-mce-bogus"])continue;if(t[a.name])return!1;for(i=a.attributes.length;i--;)if(o=a.attributes[i].name,"name"===o||0===o.indexOf("data-mce-"))return!1}if(8===a.type)return!1;if(3===a.type&&!n.test(a.value))return!1}while(a=e(a,r));return!0},walk:function(t){return e(this,null,t)}},t.create=function(e,n){var o,r;if(o=new t(e,i[e]||1),n)for(r in n)o.attr(r,n[r]);return o},t}),/**
 * Schema.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/html/Schema",["tinymce/util/Tools"],function(e){function t(e,t){return e?e.split(t||" "):[]}function n(e){function n(e,n,i){function o(e){var t,n,i={};for(t=0,n=e.length;n>t;t++)i[e[t]]={};return i}var a,s,l,c=arguments;for(i=i||[],n=n||"","string"==typeof i&&(i=t(i)),s=3;s<c.length;s++)"string"==typeof c[s]&&(c[s]=t(c[s])),i.push.apply(i,c[s]);for(e=t(e),a=e.length;a--;)l=[].concat(r,t(n)),f[e[a]]={attributes:o(l),attributesOrder:l,children:o(i)}}function i(e,n){var i,o,r,a;for(e=t(e),i=e.length,n=t(n);i--;)for(o=f[e[i]],r=0,a=n.length;a>r;r++)o.attributes[n[r]]={},o.attributesOrder.push(n[r])}var r,s,l,c,d,u,f={};return o[e]?o[e]:(r=t("id accesskey class dir lang style tabindex title"),s=t("address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul"),l=t("a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment"),"html4"!=e&&(r.push.apply(r,t("contenteditable contextmenu draggable dropzone hidden spellcheck translate")),s.push.apply(s,t("article aside details dialog figure header footer hgroup section nav")),l.push.apply(l,t("audio canvas command datalist mark meter output progress time wbr video ruby bdi keygen"))),"html5-strict"!=e&&(r.push("xml:lang"),u=t("acronym applet basefont big font strike tt"),l.push.apply(l,u),a(u,function(e){n(e,"",l)}),d=t("center dir isindex noframes"),s.push.apply(s,d),c=[].concat(s,l),a(d,function(e){n(e,"",c)})),c=c||[].concat(s,l),n("html","manifest","head body"),n("head","","base command link meta noscript script style title"),n("title hr noscript br"),n("base","href target"),n("link","href rel media hreflang type sizes hreflang"),n("meta","name http-equiv content charset"),n("style","media type scoped"),n("script","src async defer type charset"),n("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",c),n("address dt dd div caption","",c),n("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",l),n("blockquote","cite",c),n("ol","reversed start type","li"),n("ul","","li"),n("li","value",c),n("dl","","dt dd"),n("a","href target rel media hreflang type",l),n("q","cite",l),n("ins del","cite datetime",c),n("img","src alt usemap ismap width height"),n("iframe","src name width height",c),n("embed","src type width height"),n("object","data type typemustmatch name usemap form width height",c,"param"),n("param","name value"),n("map","name",c,"area"),n("area","alt coords shape href target rel media hreflang type"),n("table","border","caption colgroup thead tfoot tbody tr"+("html4"==e?" col":"")),n("colgroup","span","col"),n("col","span"),n("tbody thead tfoot","","tr"),n("tr","","td th"),n("td","colspan rowspan headers",c),n("th","colspan rowspan headers scope abbr",c),n("form","accept-charset action autocomplete enctype method name novalidate target",c),n("fieldset","disabled form name",c,"legend"),n("label","form for",l),n("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),n("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"==e?c:l),n("select","disabled form multiple name required size","option optgroup"),n("optgroup","disabled label","option"),n("option","disabled label selected value"),n("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),n("menu","type label",c,"li"),n("noscript","",c),"html4"!=e&&(n("wbr"),n("ruby","",l,"rt rp"),n("figcaption","",c),n("mark rt rp summary bdi","",l),n("canvas","width height",c),n("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",c,"track source"),n("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",c,"track source"),n("source","src type media"),n("track","kind src srclang label default"),n("datalist","",l,"option"),n("article section nav aside header footer","",c),n("hgroup","","h1 h2 h3 h4 h5 h6"),n("figure","",c,"figcaption"),n("time","datetime",l),n("dialog","open",c),n("command","type label icon disabled checked radiogroup command"),n("output","for form name",l),n("progress","value max",l),n("meter","value min max low high optimum",l),n("details","open",c,"summary"),n("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!=e&&(i("script","language xml:space"),i("style","xml:space"),i("object","declare classid code codebase codetype archive standby align border hspace vspace"),i("embed","align name hspace vspace"),i("param","valuetype type"),i("a","charset name rev shape coords"),i("br","clear"),i("applet","codebase archive code object alt name width height align hspace vspace"),i("img","name longdesc align border hspace vspace"),i("iframe","longdesc frameborder marginwidth marginheight scrolling align"),i("font basefont","size color face"),i("input","usemap align"),i("select","onchange"),i("textarea"),i("h1 h2 h3 h4 h5 h6 div p legend caption","align"),i("ul","type compact"),i("li","type"),i("ol dl menu dir","compact"),i("pre","width xml:space"),i("hr","align noshade size width"),i("isindex","prompt"),i("table","summary width frame rules cellspacing cellpadding align bgcolor"),i("col","width align char charoff valign"),i("colgroup","width align char charoff valign"),i("thead","align char charoff valign"),i("tr","align char charoff valign bgcolor"),i("th","axis align char charoff valign nowrap bgcolor width height"),i("form","accept"),i("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),i("tfoot","align char charoff valign"),i("tbody","align char charoff valign"),i("area","nohref"),i("body","background bgcolor text link vlink alink")),"html4"!=e&&(i("input button select textarea","autofocus"),i("input textarea","placeholder"),i("a","download"),i("link script img","crossorigin"),i("iframe","sandbox seamless allowfullscreen")),a(t("a form meter progress dfn"),function(e){f[e]&&delete f[e].children[e]}),delete f.caption.children.table,o[e]=f,f)}function i(e,t){var n;return e&&(n={},"string"==typeof e&&(e={"*":e}),a(e,function(e,i){n[i]="map"==t?r(e,/[, ]/):l(e,/[, ]/)})),n}var o={},r=e.makeMap,a=e.each,s=e.extend,l=e.explode,c=e.inArray;return function(e){function d(t,n,i){var a=e[t];return a?a=r(a,/[, ]/,r(a.toUpperCase(),/[, ]/)):(a=o[t],a||(a=r(n," ",r(n.toUpperCase()," ")),a=s(a,i),o[t]=a)),a}function u(e){return new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$")}function f(e){var n,i,o,a,s,l,d,f,h,m,g,p,E,v,T,C,b,y,I,O=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)\])?$/,D=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,R=/[*?+]/;if(e)for(e=t(e,","),x["@"]&&(C=x["@"].attributes,b=x["@"].attributesOrder),n=0,i=e.length;i>n;n++)if(s=O.exec(e[n])){if(v=s[1],h=s[2],T=s[3],f=s[5],p={},E=[],l={attributes:p,attributesOrder:E},"#"===v&&(l.paddEmpty=!0),"-"===v&&(l.removeEmpty=!0),"!"===s[4]&&(l.removeEmptyAttrs=!0),C){for(y in C)p[y]=C[y];E.push.apply(E,b)}if(f)for(f=t(f,"|"),o=0,a=f.length;a>o;o++)if(s=D.exec(f[o])){if(d={},g=s[1],m=s[2].replace(/::/g,":"),v=s[3],I=s[4],"!"===g&&(l.attributesRequired=l.attributesRequired||[],l.attributesRequired.push(m),d.required=!0),"-"===g){delete p[m],E.splice(c(E,m),1);continue}v&&("="===v&&(l.attributesDefault=l.attributesDefault||[],l.attributesDefault.push({name:m,value:I}),d.defaultValue=I),":"===v&&(l.attributesForced=l.attributesForced||[],l.attributesForced.push({name:m,value:I}),d.forcedValue=I),"<"===v&&(d.validValues=r(I,"?"))),R.test(m)?(l.attributePatterns=l.attributePatterns||[],d.pattern=u(m),l.attributePatterns.push(d)):(p[m]||E.push(m),p[m]=d)}C||"@"!=h||(C=p,b=E),T&&(l.outputName=h,x[T]=l),R.test(h)?(l.pattern=u(h),S.push(l)):x[h]=l}}function h(e){x={},S=[],f(e),a(T,function(e,t){w[t]=e.children})}function m(e){var n=/^(~)?(.+)$/;e&&(o.text_block_elements=o.block_elements=null,a(t(e,","),function(e){var t=n.exec(e),i="~"===t[1],o=i?"span":"div",r=t[2];if(w[r]=w[o],N[r]=o,i||(D[r.toUpperCase()]={},D[r]={}),!x[r]){var l=x[o];l=s({},l),delete l.removeEmptyAttrs,delete l.removeEmpty,x[r]=l}a(w,function(e,t){e[o]&&(w[t]=e=s({},w[t]),e[r]=e[o])})}))}function g(e){var n=/^([+\-]?)(\w+)\[([^\]]+)\]$/;e&&a(t(e,","),function(e){var i,o,r=n.exec(e);r&&(o=r[1],i=o?w[r[2]]:w[r[2]]={"#comment":{}},i=w[r[2]],a(t(r[3],"|"),function(e){"-"===o?(w[r[2]]=i=s({},w[r[2]]),delete i[e]):i[e]={}}))})}function p(e){var t,n=x[e];if(n)return n;for(t=S.length;t--;)if(n=S[t],n.pattern.test(e))return n}var E,v,T,C,b,y,I,O,D,R,_,k,K=this,x={},w={},S=[],N={},A={};e=e||{},T=n(e.schema),e.verify_html===!1&&(e.valid_elements="*[*]"),E=i(e.valid_styles),v=i(e.invalid_styles,"map"),O=i(e.valid_classes,"map"),C=d("whitespace_elements","pre script noscript style textarea video audio iframe object"),b=d("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),y=d("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),I=d("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),R=d("non_empty_elements","td th iframe video audio object script",y),_=d("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside nav figure"),D=d("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup",_),k=d("text_inline_elements","span strong b em i font strike u var cite dfn code mark q sup sub samp"),a((e.special||"script noscript style textarea").split(" "),function(e){A[e]=new RegExp("</"+e+"[^>]*>","gi")}),e.valid_elements?h(e.valid_elements):(a(T,function(e,t){x[t]={attributes:e.attributes,attributesOrder:e.attributesOrder},w[t]=e.children}),"html5"!=e.schema&&a(t("strong/b em/i"),function(e){e=t(e,"/"),x[e[1]].outputName=e[0]}),x.img.attributesDefault=[{name:"alt",value:""}],a(t("ol ul sub sup blockquote span font a table tbody tr strong em b i"),function(e){x[e]&&(x[e].removeEmpty=!0)}),a(t("p h1 h2 h3 h4 h5 h6 th td pre div address caption"),function(e){x[e].paddEmpty=!0}),a(t("span"),function(e){x[e].removeEmptyAttrs=!0})),m(e.custom_elements),g(e.valid_children),f(e.extended_valid_elements),g("+ol[ul|ol],+ul[ul|ol]"),e.invalid_elements&&a(l(e.invalid_elements),function(e){x[e]&&delete x[e]}),p("span")||f("span[!data-mce-type|*]"),K.children=w,K.getValidStyles=function(){return E},K.getInvalidStyles=function(){return v},K.getValidClasses=function(){return O},K.getBoolAttrs=function(){return I},K.getBlockElements=function(){return D},K.getTextBlockElements=function(){return _},K.getTextInlineElements=function(){return k},K.getShortEndedElements=function(){return y},K.getSelfClosingElements=function(){return b},K.getNonEmptyElements=function(){return R},K.getWhiteSpaceElements=function(){return C},K.getSpecialElements=function(){return A},K.isValidChild=function(e,t){var n=w[e];return!(!n||!n[t])},K.isValid=function(e,t){var n,i,o=p(e);if(o){if(!t)return!0;if(o.attributes[t])return!0;if(n=o.attributePatterns)for(i=n.length;i--;)if(n[i].pattern.test(e))return!0}return!1},K.getElementRule=p,K.getCustomElements=function(){return N},K.addValidElements=f,K.setValidElements=h,K.addCustomElements=m,K.addValidChildren=g,K.elements=x}}),/**
 * SaxParser.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/html/SaxParser",["tinymce/html/Schema","tinymce/html/Entities","tinymce/util/Tools"],function(e,t,n){function i(e,t,n){var i,o,r,a=1;for(r=e.getShortEndedElements(),o=/<([!?\/])?([A-Za-z0-9\-\:\.]+)((?:\s+[^"\'>]+(?:(?:"[^"]*")|(?:\'[^\']*\')|[^>]*))*|\/|\s+)>/g,o.lastIndex=n;i=o.exec(t);){if("/"===i[1])a--;else if(!i[1]){if(i[2]in r)continue;a++}if(0===a)break}return o.lastIndex}var o=n.each;return function(r,a){function s(){}var l=this;r=r||{},l.schema=a=a||new e,r.fix_self_closing!==!1&&(r.fix_self_closing=!0),o("comment cdata text start end pi doctype".split(" "),function(e){e&&(l[e]=r[e]||s)}),l.parse=function(e){function o(e){var t,n;for(t=M.length;t--&&M[t].name!==e;);if(t>=0){for(n=M.length-1;n>=t;n--)e=M[n],e.valid&&P.end(e.name);M.length=t}}function s(e,t,n,i,o){var a,s,l=/[\s\u0000-\u001F]+/g;if(t=t.toLowerCase(),n=t in v?t:H(n||i||o||""),C&&!g&&0!==t.indexOf("data-")){if(a=D[t],!a&&R){for(s=R.length;s--&&(a=R[s],!a.pattern.test(t)););-1===s&&(a=null)}if(!a)return;if(a.validValues&&!(n in a.validValues))return}if(z[t]&&!r.allow_script_urls){var c=n.replace(l,"");try{c=decodeURIComponent(c)}catch(d){c=unescape(c)}if(V.test(c))return;if(!r.allow_html_data_urls&&q.test(c)&&!/^data:image\//i.test(c))return}u.map[t]=n,u.push({name:t,value:n})}var l,c,d,u,f,h,m,g,p,E,v,T,C,b,y,I,O,D,R,_,k,K,x,w,S,N,A,L,B,P=this,F=0,M=[],$=0,H=t.decode,z=n.makeMap("src,href,data,background,formaction,poster"),V=/((java|vb)script|mhtml):/i,q=/^data:/i;for(S=new RegExp("<(?:(?:!--([\\w\\W]*?)-->)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([^>]+)>)|(?:([A-Za-z0-9\\-\\:\\.]+)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g"),N=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,E=a.getShortEndedElements(),w=r.self_closing_elements||a.getSelfClosingElements(),v=a.getBoolAttrs(),C=r.validate,p=r.remove_internals,B=r.fix_self_closing,A=a.getSpecialElements();l=S.exec(e);){if(F<l.index&&P.text(H(e.substr(F,l.index-F))),c=l[6])c=c.toLowerCase(),":"===c.charAt(0)&&(c=c.substr(1)),o(c);else if(c=l[7]){if(c=c.toLowerCase(),":"===c.charAt(0)&&(c=c.substr(1)),T=c in E,B&&w[c]&&M.length>0&&M[M.length-1].name===c&&o(c),!C||(b=a.getElementRule(c))){if(y=!0,C&&(D=b.attributes,R=b.attributePatterns),(O=l[8])?(g=-1!==O.indexOf("data-mce-type"),g&&p&&(y=!1),u=[],u.map={},O.replace(N,s)):(u=[],u.map={}),C&&!g){if(_=b.attributesRequired,k=b.attributesDefault,K=b.attributesForced,x=b.removeEmptyAttrs,x&&!u.length&&(y=!1),K)for(f=K.length;f--;)I=K[f],m=I.name,L=I.value,"{$uid}"===L&&(L="mce_"+$++),u.map[m]=L,u.push({name:m,value:L});if(k)for(f=k.length;f--;)I=k[f],m=I.name,m in u.map||(L=I.value,"{$uid}"===L&&(L="mce_"+$++),u.map[m]=L,u.push({name:m,value:L}));if(_){for(f=_.length;f--&&!(_[f]in u.map););-1===f&&(y=!1)}if(I=u.map["data-mce-bogus"]){if("all"===I){F=i(a,e,S.lastIndex),S.lastIndex=F;continue}y=!1}}y&&P.start(c,u,T)}else y=!1;if(d=A[c]){d.lastIndex=F=l.index+l[0].length,(l=d.exec(e))?(y&&(h=e.substr(F,l.index-F)),F=l.index+l[0].length):(h=e.substr(F),F=e.length),y&&(h.length>0&&P.text(h,!0),P.end(c)),S.lastIndex=F;continue}T||(O&&O.indexOf("/")==O.length-1?y&&P.end(c):M.push({name:c,valid:y}))}else(c=l[1])?(">"===c.charAt(0)&&(c=" "+c),r.allow_conditional_comments||"[if"!==c.substr(0,3)||(c=" "+c),P.comment(c)):(c=l[2])?P.cdata(c):(c=l[3])?P.doctype(c):(c=l[4])&&P.pi(c,l[5]);F=l.index+l[0].length}for(F<e.length&&P.text(H(e.substr(F))),f=M.length-1;f>=0;f--)c=M[f],c.valid&&P.end(c.name)}}}),/**
 * DomParser.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/html/DomParser",["tinymce/html/Node","tinymce/html/Schema","tinymce/html/SaxParser","tinymce/util/Tools"],function(e,t,n,i){var o=i.makeMap,r=i.each,a=i.explode,s=i.extend;return function(i,l){function c(t){var n,i,r,a,s,c,u,f,h,m,g,p,E,v;for(g=o("tr,td,th,tbody,thead,tfoot,table"),m=l.getNonEmptyElements(),p=l.getTextBlockElements(),n=0;n<t.length;n++)if(i=t[n],i.parent&&!i.fixed)if(p[i.name]&&"li"==i.parent.name){for(E=i.next;E&&p[E.name];)E.name="li",E.fixed=!0,i.parent.insert(E,i.parent),E=E.next;i.unwrap(i)}else{for(a=[i],r=i.parent;r&&!l.isValidChild(r.name,i.name)&&!g[r.name];r=r.parent)a.push(r);if(r&&a.length>1){for(a.reverse(),s=c=d.filterNode(a[0].clone()),h=0;h<a.length-1;h++){for(l.isValidChild(c.name,a[h].name)?(u=d.filterNode(a[h].clone()),c.append(u)):u=c,f=a[h].firstChild;f&&f!=a[h+1];)v=f.next,u.append(f),f=v;c=u}s.isEmpty(m)?r.insert(i,a[0],!0):(r.insert(s,a[0],!0),r.insert(i,s)),r=a[0],(r.isEmpty(m)||r.firstChild===r.lastChild&&"br"===r.firstChild.name)&&r.empty().remove()}else if(i.parent){if("li"===i.name){if(E=i.prev,E&&("ul"===E.name||"ul"===E.name)){E.append(i);continue}if(E=i.next,E&&("ul"===E.name||"ul"===E.name)){E.insert(i,E.firstChild,!0);continue}i.wrap(d.filterNode(new e("ul",1)));continue}l.isValidChild(i.parent.name,"div")&&l.isValidChild("div",i.name)?i.wrap(d.filterNode(new e("div",1))):"style"===i.name||"script"===i.name?i.empty().remove():i.unwrap()}}}var d=this,u={},f=[],h={},m={};i=i||{},i.validate="validate"in i?i.validate:!0,i.root_name=i.root_name||"body",d.schema=l=l||new t,d.filterNode=function(e){var t,n,i;n in u&&(i=h[n],i?i.push(e):h[n]=[e]),t=f.length;for(;t--;)n=f[t].name,n in e.attributes.map&&(i=m[n],i?i.push(e):m[n]=[e]);return e},d.addNodeFilter=function(e,t){r(a(e),function(e){var n=u[e];n||(u[e]=n=[]),n.push(t)})},d.addAttributeFilter=function(e,t){r(a(e),function(e){var n;for(n=0;n<f.length;n++)if(f[n].name===e)return void f[n].callbacks.push(t);f.push({name:e,callbacks:[t]})})},d.parse=function(t,r){function a(){function e(e){e&&(o=e.firstChild,o&&3==o.type&&(o.value=o.value.replace(K,"")),o=e.lastChild,o&&3==o.type&&(o.value=o.value.replace(w,"")))}var t,n,o=v.firstChild;if(l.isValidChild(v.name,P.toLowerCase())){for(;o;)t=o.next,3==o.type||1==o.type&&"p"!==o.name&&!k[o.name]&&!o.attr("data-mce-type")?n?n.append(o):(n=d(P,1),n.attr(i.forced_root_block_attrs),v.insert(n,o),n.append(o)):(e(n),n=null),o=t;e(n)}}function d(t,n){var i,o=new e(t,n);return t in u&&(i=h[t],i?i.push(o):h[t]=[o]),o}function g(e){var t,n,i;for(t=e.prev;t&&3===t.type;)n=t.value.replace(w,""),n.length>0?(t.value=n,t=t.prev):(i=t.prev,t.remove(),t=i)}function p(e){var t,n={};for(t in e)"li"!==t&&"p"!=t&&(n[t]=e[t]);return n}var E,v,T,C,b,y,I,O,D,R,_,k,K,x,w,S,N,A,L,B,P,F=[];if(r=r||{},h={},m={},k=s(o("script,style,head,html,body,title,meta,param"),l.getBlockElements()),B=l.getNonEmptyElements(),L=l.children,_=i.validate,P="forced_root_block"in r?r.forced_root_block:i.forced_root_block,A=l.getWhiteSpaceElements(),K=/^[ \t\r\n]+/,w=/[ \t\r\n]+$/,S=/[ \t\r\n]+/g,N=/^[ \t\r\n]+$/,E=new n({validate:_,allow_script_urls:i.allow_script_urls,allow_conditional_comments:i.allow_conditional_comments,self_closing_elements:p(l.getSelfClosingElements()),cdata:function(e){T.append(d("#cdata",4)).value=e},text:function(e,t){var n;x||(e=e.replace(S," "),T.lastChild&&k[T.lastChild.name]&&(e=e.replace(K,""))),0!==e.length&&(n=d("#text",3),n.raw=!!t,T.append(n).value=e)},comment:function(e){T.append(d("#comment",8)).value=e},pi:function(e,t){T.append(d(e,7)).value=t,g(T)},doctype:function(e){var t;t=T.append(d("#doctype",10)),t.value=e,g(T)},start:function(e,t,n){var i,o,r,a,s;if(r=_?l.getElementRule(e):{}){for(i=d(r.outputName||e,1),i.attributes=t,i.shortEnded=n,T.append(i),s=L[T.name],s&&L[i.name]&&!s[i.name]&&F.push(i),o=f.length;o--;)a=f[o].name,a in t.map&&(D=m[a],D?D.push(i):m[a]=[i]);k[e]&&g(i),n||(T=i),!x&&A[e]&&(x=!0)}},end:function(t){var n,i,o,r,a;if(i=_?l.getElementRule(t):{}){if(k[t]&&!x){if(n=T.firstChild,n&&3===n.type)if(o=n.value.replace(K,""),o.length>0)n.value=o,n=n.next;else for(r=n.next,n.remove(),n=r;n&&3===n.type;)o=n.value,r=n.next,(0===o.length||N.test(o))&&(n.remove(),n=r),n=r;if(n=T.lastChild,n&&3===n.type)if(o=n.value.replace(w,""),o.length>0)n.value=o,n=n.prev;else for(r=n.prev,n.remove(),n=r;n&&3===n.type;)o=n.value,r=n.prev,(0===o.length||N.test(o))&&(n.remove(),n=r),n=r}if(x&&A[t]&&(x=!1),(i.removeEmpty||i.paddEmpty)&&T.isEmpty(B))if(i.paddEmpty)T.empty().append(new e("#text","3")).value="\xa0";else if(!T.attributes.map.name&&!T.attributes.map.id)return a=T.parent,T.unwrap(),void(T=a);T=T.parent}}},l),v=T=new e(r.context||i.root_name,11),E.parse(t),_&&F.length&&(r.context?r.invalid=!0:c(F)),P&&("body"==v.name||r.isRootContent)&&a(),!r.invalid){for(R in h){for(D=u[R],C=h[R],I=C.length;I--;)C[I].parent||C.splice(I,1);for(b=0,y=D.length;y>b;b++)D[b](C,R,r)}for(b=0,y=f.length;y>b;b++)if(D=f[b],D.name in m){for(C=m[D.name],I=C.length;I--;)C[I].parent||C.splice(I,1);for(I=0,O=D.callbacks.length;O>I;I++)D.callbacks[I](C,D.name,r)}}return v},i.remove_trailing_brs&&d.addNodeFilter("br",function(t){var n,i,o,r,a,c,d,u,f=t.length,h=s({},l.getBlockElements()),m=l.getNonEmptyElements();for(h.body=1,n=0;f>n;n++)if(i=t[n],o=i.parent,h[i.parent.name]&&i===o.lastChild){for(a=i.prev;a;){if(c=a.name,"span"!==c||"bookmark"!==a.attr("data-mce-type")){if("br"!==c)break;if("br"===c){i=null;break}}a=a.prev}i&&(i.remove(),o.isEmpty(m)&&(d=l.getElementRule(o.name),d&&(d.removeEmpty?o.remove():d.paddEmpty&&(o.empty().append(new e("#text",3)).value="\xa0"))))}else{for(r=i;o&&o.firstChild===r&&o.lastChild===r&&(r=o,!h[o.name]);)o=o.parent;r===o&&(u=new e("#text",3),u.value="\xa0",i.replace(u))}}),i.allow_html_in_named_anchor||d.addAttributeFilter("id,name",function(e){for(var t,n,i,o,r=e.length;r--;)if(o=e[r],"a"===o.name&&o.firstChild&&!o.attr("href")){i=o.parent,t=o.lastChild;do n=t.prev,i.insert(t,o),t=n;while(t)}}),i.validate&&l.getValidClasses()&&d.addAttributeFilter("class",function(e){for(var t,n,i,o,r,a,s,c=e.length,d=l.getValidClasses();c--;){for(t=e[c],n=t.attr("class").split(" "),r="",i=0;i<n.length;i++)o=n[i],s=!1,a=d["*"],a&&a[o]&&(s=!0),a=d[t.name],s||!a||a[o]||(s=!0),s&&(r&&(r+=" "),r+=o);r.length||(r=null),t.attr("class",r)}})}}),/**
 * Writer.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/html/Writer",["tinymce/html/Entities","tinymce/util/Tools"],function(e,t){var n=t.makeMap;return function(t){var i,o,r,a,s,l=[];return t=t||{},i=t.indent,o=n(t.indent_before||""),r=n(t.indent_after||""),a=e.getEncodeFunc(t.entity_encoding||"raw",t.entities),s="html"==t.element_format,{start:function(e,t,n){var c,d,u,f;if(i&&o[e]&&l.length>0&&(f=l[l.length-1],f.length>0&&"\n"!==f&&l.push("\n")),l.push("<",e),t)for(c=0,d=t.length;d>c;c++)u=t[c],l.push(" ",u.name,'="',a(u.value,!0),'"');!n||s?l[l.length]=">":l[l.length]=" />",n&&i&&r[e]&&l.length>0&&(f=l[l.length-1],f.length>0&&"\n"!==f&&l.push("\n"))},end:function(e){var t;l.push("</",e,">"),i&&r[e]&&l.length>0&&(t=l[l.length-1],t.length>0&&"\n"!==t&&l.push("\n"))},text:function(e,t){e.length>0&&(l[l.length]=t?e:a(e))},cdata:function(e){l.push("<![CDATA[",e,"]]>")},comment:function(e){l.push("<!--",e,"-->")},pi:function(e,t){t?l.push("<?",e," ",t,"?>"):l.push("<?",e,"?>"),i&&l.push("\n")},doctype:function(e){l.push("<!DOCTYPE",e,">",i?"\n":"")},reset:function(){l.length=0},getContent:function(){return l.join("").replace(/\n$/,"")}}}}),/**
 * Serializer.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/html/Serializer",["tinymce/html/Writer","tinymce/html/Schema"],function(e,t){return function(n,i){var o=this,r=new e(n);n=n||{},n.validate="validate"in n?n.validate:!0,o.schema=i=i||new t,o.writer=r,o.serialize=function(e){function t(e){var n,s,l,c,d,u,f,h,m,g=o[e.type];if(g)g(e);else{if(n=e.name,s=e.shortEnded,l=e.attributes,a&&l&&l.length>1){for(u=[],u.map={},m=i.getElementRule(e.name),f=0,h=m.attributesOrder.length;h>f;f++)c=m.attributesOrder[f],c in l.map&&(d=l.map[c],u.map[c]=d,u.push({name:c,value:d}));for(f=0,h=l.length;h>f;f++)c=l[f].name,c in u.map||(d=l.map[c],u.map[c]=d,u.push({name:c,value:d}));l=u}if(r.start(e.name,l,s),!s){if(e=e.firstChild)do t(e);while(e=e.next);r.end(n)}}}var o,a;return a=n.validate,o={3:function(e){r.text(e.value,e.raw)},8:function(e){r.comment(e.value)},7:function(e){r.pi(e.name,e.value)},10:function(e){r.doctype(e.value)},4:function(e){r.cdata(e.value)},11:function(e){if(e=e.firstChild)do t(e);while(e=e.next)}},r.reset(),1!=e.type||n.inner?o[11](e):t(e),r.getContent()}}}),/**
 * Serializer.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/dom/Serializer",["tinymce/dom/DOMUtils","tinymce/html/DomParser","tinymce/html/Entities","tinymce/html/Serializer","tinymce/html/Node","tinymce/html/Schema","tinymce/Env","tinymce/util/Tools"],function(e,t,n,i,o,r,a,s){var l=s.each,c=s.trim,d=e.DOM;return function(e,o){var s,u,f;return o&&(s=o.dom,u=o.schema),s=s||d,u=u||new r(e),e.entity_encoding=e.entity_encoding||"named",e.remove_trailing_brs="remove_trailing_brs"in e?e.remove_trailing_brs:!0,f=new t(e,u),f.addAttributeFilter("data-mce-tabindex",function(e,t){for(var n,i=e.length;i--;)n=e[i],n.attr("tabindex",n.attributes.map["data-mce-tabindex"]),n.attr(t,null)}),f.addAttributeFilter("src,href,style",function(t,n){for(var i,o,r,a=t.length,l="data-mce-"+n,c=e.url_converter,d=e.url_converter_scope;a--;)i=t[a],o=i.attributes.map[l],o!==r?(i.attr(n,o.length>0?o:null),i.attr(l,null)):(o=i.attributes.map[n],"style"===n?o=s.serializeStyle(s.parseStyle(o),i.name):c&&(o=c.call(d,o,n,i.name)),i.attr(n,o.length>0?o:null))}),f.addAttributeFilter("class",function(e){for(var t,n,i=e.length;i--;)t=e[i],n=t.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),t.attr("class",n.length>0?n:null)}),f.addAttributeFilter("data-mce-type",function(e,t,n){for(var i,o=e.length;o--;)i=e[o],"bookmark"!==i.attributes.map["data-mce-type"]||n.cleanup||i.remove()}),f.addNodeFilter("noscript",function(e){for(var t,i=e.length;i--;)t=e[i].firstChild,t&&(t.value=n.decode(t.value))}),f.addNodeFilter("script,style",function(e,t){function n(e){return e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")}for(var i,o,r,a=e.length;a--;)i=e[a],o=i.firstChild?i.firstChild.value:"","script"===t?(r=i.attr("type"),r&&i.attr("type","mce-no/type"==r?null:r.replace(/^mce\-/,"")),o.length>0&&(i.firstChild.value="// <![CDATA[\n"+n(o)+"\n// ]]>")):o.length>0&&(i.firstChild.value="<!--\n"+n(o)+"\n-->")}),f.addNodeFilter("#comment",function(e){for(var t,n=e.length;n--;)t=e[n],0===t.value.indexOf("[CDATA[")?(t.name="#cdata",t.type=4,t.value=t.value.replace(/^\[CDATA\[|\]\]$/g,"")):0===t.value.indexOf("mce:protected ")&&(t.name="#text",t.type=3,t.raw=!0,t.value=unescape(t.value).substr(14))}),f.addNodeFilter("xml:namespace,input",function(e,t){for(var n,i=e.length;i--;)n=e[i],7===n.type?n.remove():1===n.type&&("input"!==t||"type"in n.attributes.map||n.attr("type","text"))}),e.fix_list_elements&&f.addNodeFilter("ul,ol",function(e){for(var t,n,i=e.length;i--;)t=e[i],n=t.parent,("ul"===n.name||"ol"===n.name)&&t.prev&&"li"===t.prev.name&&t.prev.append(t)}),f.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize",function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)}),{schema:u,addNodeFilter:f.addNodeFilter,addAttributeFilter:f.addAttributeFilter,serialize:function(t,n){var o,r,d,h,m,g=this;return a.ie&&s.select("script,style,select,map").length>0?(m=t.innerHTML,t=t.cloneNode(!1),s.setHTML(t,m)):t=t.cloneNode(!0),o=t.ownerDocument.implementation,o.createHTMLDocument&&(r=o.createHTMLDocument(""),l("BODY"==t.nodeName?t.childNodes:[t],function(e){r.body.appendChild(r.importNode(e,!0))}),t="BODY"!=t.nodeName?r.body.firstChild:r.body,d=s.doc,s.doc=r),n=n||{},n.format=n.format||"html",n.selection&&(n.forced_root_block=""),n.no_events||(n.node=t,g.onPreProcess(n)),h=new i(e,u),n.content=h.serialize(f.parse(c(n.getInner?t.innerHTML:s.getOuterHTML(t)),n)),n.cleanup||(n.content=n.content.replace(/\uFEFF/g,"")),n.no_events||g.onPostProcess(n),d&&(s.doc=d),n.node=null,n.content},addRules:function(e){u.addValidElements(e)},setRules:function(e){u.setValidElements(e)},onPreProcess:function(e){o&&o.fire("PreProcess",e)},onPostProcess:function(e){o&&o.fire("PostProcess",e)}}}}),/**
 * TridentSelection.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/dom/TridentSelection",[],function(){function e(e){function t(t,n){var i,o,r,a,s,l,c,d,u=0,f=-1;if(i=t.duplicate(),i.collapse(n),d=i.parentElement(),d.ownerDocument===e.dom.doc){for(;"false"===d.contentEditable;)d=d.parentNode;if(!d.hasChildNodes())return{node:d,inside:1};for(a=d.children,o=a.length-1;o>=u;)if(c=Math.floor((u+o)/2),s=a[c],i.moveToElementText(s),f=i.compareEndPoints(n?"StartToStart":"EndToEnd",t),f>0)o=c-1;else{if(!(0>f))return{node:s};u=c+1}if(0>f)for(s?i.collapse(!1):(i.moveToElementText(d),i.collapse(!0),s=d,r=!0),l=0;0!==i.compareEndPoints(n?"StartToStart":"StartToEnd",t)&&0!==i.move("character",1)&&d==i.parentElement();)l++;else for(i.collapse(!0),l=0;0!==i.compareEndPoints(n?"StartToStart":"StartToEnd",t)&&0!==i.move("character",-1)&&d==i.parentElement();)l++;return{node:s,position:f,offset:l,inside:r}}}function n(){function n(e){var n,i,o,r,a,s=t(d,e),l=0;if(n=s.node,i=s.offset,s.inside&&!n.hasChildNodes())return void u[e?"setStart":"setEnd"](n,0);if(i===r)return void u[e?"setStartBefore":"setEndAfter"](n);if(s.position<0){if(o=s.inside?n.firstChild:n.nextSibling,!o)return void u[e?"setStartAfter":"setEndAfter"](n);if(!i)return void(3==o.nodeType?u[e?"setStart":"setEnd"](o,0):u[e?"setStartBefore":"setEndBefore"](o));for(;o;){if(3==o.nodeType&&(a=o.nodeValue,l+=a.length,l>=i)){n=o,l-=i,l=a.length-l;break}o=o.nextSibling}}else{if(o=n.previousSibling,!o)return u[e?"setStartBefore":"setEndBefore"](n);if(!i)return void(3==n.nodeType?u[e?"setStart":"setEnd"](o,n.nodeValue.length):u[e?"setStartAfter":"setEndAfter"](o));for(;o;){if(3==o.nodeType&&(l+=o.nodeValue.length,l>=i)){n=o,l-=i;break}o=o.previousSibling}}u[e?"setStart":"setEnd"](n,l)}var r,a,s,l,c,d=e.getRng(),u=o.createRng();if(r=d.item?d.item(0):d.parentElement(),r.ownerDocument!=o.doc)return u;if(a=e.isCollapsed(),d.item)return u.setStart(r.parentNode,o.nodeIndex(r)),u.setEnd(u.startContainer,u.startOffset+1),u;try{n(!0),a||n()}catch(f){if(-2147024809!=f.number)throw f;c=i.getBookmark(2),s=d.duplicate(),s.collapse(!0),r=s.parentElement(),a||(s=d.duplicate(),s.collapse(!1),l=s.parentElement(),l.innerHTML=l.innerHTML),r.innerHTML=r.innerHTML,i.moveToBookmark(c),d=e.getRng(),n(!0),a||n()}return u}var i=this,o=e.dom,r=!1;this.getBookmark=function(n){function i(e){var t,n,i,r,a=[];for(t=e.parentNode,n=o.getRoot().parentNode;t!=n&&9!==t.nodeType;){for(i=t.children,r=i.length;r--;)if(e===i[r]){a.push(r);break}e=t,t=t.parentNode}return a}function r(e){var n;return n=t(a,e),n?{position:n.position,offset:n.offset,indexes:i(n.node),inside:n.inside}:void 0}var a=e.getRng(),s={};return 2===n&&(a.item?s.start={ctrl:!0,indexes:i(a.item(0))}:(s.start=r(!0),e.isCollapsed()||(s.end=r()))),s},this.moveToBookmark=function(e){function t(e){var t,n,i,r;for(t=o.getRoot(),n=e.length-1;n>=0;n--)r=t.children,i=e[n],i<=r.length-1&&(t=r[i]);return t}function n(n){var o,a,s,l,c=e[n?"start":"end"];c&&(o=c.position>0,a=r.createTextRange(),a.moveToElementText(t(c.indexes)),l=c.offset,l!==s?(a.collapse(c.inside||o),a.moveStart("character",o?-l:l)):a.collapse(n),i.setEndPoint(n?"StartToStart":"EndToStart",a),n&&i.collapse(!0))}var i,r=o.doc.body;e.start&&(e.start.ctrl?(i=r.createControlRange(),i.addElement(t(e.start.indexes)),i.select()):(i=r.createTextRange(),n(!0),n(),i.select()))},this.addRange=function(t){function n(e){var t,n,a,u,f;a=o.create("a"),t=e?s:c,n=e?l:d,u=i.duplicate(),(t==m||t==m.documentElement)&&(t=g,n=0),3==t.nodeType?(t.parentNode.insertBefore(a,t),u.moveToElementText(a),u.moveStart("character",n),o.remove(a),i.setEndPoint(e?"StartToStart":"EndToEnd",u)):(f=t.childNodes,f.length?(n>=f.length?o.insertAfter(a,f[f.length-1]):t.insertBefore(a,f[n]),u.moveToElementText(a)):t.canHaveHTML&&(t.innerHTML="<span>&#xFEFF;</span>",a=t.firstChild,u.moveToElementText(a),u.collapse(r)),i.setEndPoint(e?"StartToStart":"EndToEnd",u),o.remove(a))}var i,a,s,l,c,d,u,f,h,m=e.dom.doc,g=m.body;if(s=t.startContainer,l=t.startOffset,c=t.endContainer,d=t.endOffset,i=g.createTextRange(),s==c&&1==s.nodeType){if(l==d&&!s.hasChildNodes()){if(s.canHaveHTML)return u=s.previousSibling,u&&!u.hasChildNodes()&&o.isBlock(u)?u.innerHTML="&#xFEFF;":u=null,s.innerHTML="<span>&#xFEFF;</span><span>&#xFEFF;</span>",i.moveToElementText(s.lastChild),i.select(),o.doc.selection.clear(),s.innerHTML="",void(u&&(u.innerHTML=""));l=o.nodeIndex(s),s=s.parentNode}if(l==d-1)try{if(h=s.childNodes[l],a=g.createControlRange(),a.addElement(h),a.select(),f=e.getRng(),f.item&&h===f.item(0))return}catch(p){}}n(!0),n(),i.select()},this.getRangeAt=n}return e}),/**
 * VK.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/util/VK",["tinymce/Env"],function(e){return{BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey},metaKeyPressed:function(t){return e.mac?t.metaKey:t.ctrlKey&&!t.altKey}}}),/**
 * ControlSelection.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/dom/ControlSelection",["tinymce/util/VK","tinymce/util/Tools","tinymce/Env"],function(e,t,n){return function(i,o){function r(e){var t=o.settings.object_resizing;return t===!1||n.iOS?!1:("string"!=typeof t&&(t="table,img,div"),"false"===e.getAttribute("data-mce-resize")?!1:o.dom.is(e,t))}function a(t){var n,i;n=t.screenX-D,i=t.screenY-R,N=n*I[2]+K,A=i*I[3]+x,N=5>N?5:N,A=5>A?5:A,(e.modifierPressed(t)||"IMG"==C.nodeName&&I[2]*I[3]!==0)&&(N=Math.round(A/w),A=Math.round(N*w)),L.setStyles(b,{width:N,height:A}),I[2]<0&&b.clientWidth<=N&&L.setStyle(b,"left",_+(K-N)),I[3]<0&&b.clientHeight<=A&&L.setStyle(b,"top",k+(x-A)),S||(o.fire("ObjectResizeStart",{target:C,width:K,height:x}),S=!0)}function s(){function e(e,t){t&&(C.style[e]||!o.schema.isValid(C.nodeName.toLowerCase(),e)?L.setStyle(C,e,t):L.setAttrib(C,e,t))}S=!1,e("width",N),e("height",A),L.unbind(P,"mousemove",a),L.unbind(P,"mouseup",s),F!=P&&(L.unbind(F,"mousemove",a),L.unbind(F,"mouseup",s)),L.remove(b),M&&"TABLE"!=C.nodeName||l(C),o.fire("ObjectResized",{target:C,width:N,height:A}),o.nodeChanged()}function l(e,t,i){var l,d,u,f,h,m=o.getBody();p(),l=L.getPos(e,m),_=l.x,k=l.y,h=e.getBoundingClientRect(),d=h.width||h.right-h.left,u=h.height||h.bottom-h.top,C!=e&&(g(),C=e,N=A=0),f=o.fire("ObjectSelected",{target:e}),r(e)&&!f.isDefaultPrevented()?B(y,function(e,r){function l(t){D=t.screenX,R=t.screenY,K=C.clientWidth,x=C.clientHeight,w=x/K,I=e,b=C.cloneNode(!0),L.addClass(b,"mce-clonedresizable"),b.contentEditable=!1,b.unSelectabe=!0,L.setStyles(b,{left:_,top:k,margin:0}),b.removeAttribute("data-mce-selected"),o.getBody().appendChild(b),L.bind(P,"mousemove",a),L.bind(P,"mouseup",s),F!=P&&(L.bind(F,"mousemove",a),L.bind(F,"mouseup",s))}var c,f;return t?void(r==t&&l(i)):(c=L.get("mceResizeHandle"+r),c?L.show(c):(f=o.getBody(),c=L.add(f,"div",{id:"mceResizeHandle"+r,"data-mce-bogus":!0,"class":"mce-resizehandle",unselectable:!0,style:"cursor:"+r+"-resize; margin:0; padding:0"}),n.ie&&(c.contentEditable=!1)),e.elm||(L.bind(c,"mousedown",function(e){e.stopImmediatePropagation(),e.preventDefault(),l(e)}),e.elm=c),void L.setStyles(c,{left:d*e[0]+_-c.offsetWidth/2,top:u*e[1]+k-c.offsetHeight/2}))}):c(),C.setAttribute("data-mce-selected","1")}function c(){var e,t;p(),C&&C.removeAttribute("data-mce-selected");for(e in y)t=L.get("mceResizeHandle"+e),t&&(L.unbind(t),L.remove(t))}function d(e){function t(e,t){if(e)do if(e===t)return!0;while(e=e.parentNode)}var n;return B(L.select("img[data-mce-selected],hr[data-mce-selected]"),function(e){e.removeAttribute("data-mce-selected")}),n="mousedown"==e.type?e.target:i.getNode(),n=L.getParent(n,M?"table":"table,img,hr"),t(n,o.getBody())&&(E(),t(i.getStart(),n)&&t(i.getEnd(),n)&&(!M||n!=i.getStart()&&"IMG"!==i.getStart().nodeName))?void l(n):void c()}function u(e,t,n){e&&e.attachEvent&&e.attachEvent("on"+t,n)}function f(e,t,n){e&&e.detachEvent&&e.detachEvent("on"+t,n)}function h(e){var t,n,i,r,a,s,c,d=e.srcElement;t=d.getBoundingClientRect(),s=O.clientX-t.left,c=O.clientY-t.top;for(n in y)if(i=y[n],r=d.offsetWidth*i[0],a=d.offsetHeight*i[1],Math.abs(r-s)<8&&Math.abs(a-c)<8){I=i;break}S=!0,o.getDoc().selection.empty(),l(d,n,O)}function m(e){var t=e.srcElement;if(t!=C){if(g(),0===t.id.indexOf("mceResizeHandle"))return void(e.returnValue=!1);("IMG"==t.nodeName||"TABLE"==t.nodeName)&&(c(),C=t,u(t,"resizestart",h))}}function g(){f(C,"resizestart",h)}function p(){for(var e in y){var t=y[e];t.elm&&(L.unbind(t.elm),delete t.elm)}}function E(){try{o.getDoc().execCommand("enableObjectResizing",!1,!1)}catch(e){}}function v(e){var t;if(M){t=P.body.createControlRange();try{return t.addElement(e),t.select(),!0}catch(n){}}}function T(){C=b=null,M&&(g(),f(o.getBody(),"controlselect",m))}var C,b,y,I,O,D,R,_,k,K,x,w,S,N,A,L=o.dom,B=t.each,P=o.getDoc(),F=document,M=n.ie&&n.ie<11;y={n:[.5,0,0,-1],e:[1,.5,1,0],s:[.5,1,0,1],w:[0,.5,-1,0],nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]};var $=".mce-content-body";return o.contentStyles.push($+" div.mce-resizehandle {position: absolute;border: 1px solid black;background: #FFF;width: 5px;height: 5px;z-index: 10000}"+$+" .mce-resizehandle:hover {background: #000}"+$+" img[data-mce-selected], hr[data-mce-selected] {outline: 1px solid black;resize: none}"+$+" .mce-clonedresizable {position: absolute;"+(n.gecko?"":"outline: 1px dashed black;")+"opacity: .5;filter: alpha(opacity=50);z-index: 10000}"),o.on("init",function(){M?(o.on("ObjectResized",function(e){"TABLE"!=e.target.nodeName&&(c(),v(e.target))}),u(o.getBody(),"controlselect",m),o.on("mousedown",function(e){O=e})):(E(),n.ie>=11&&(o.on("mouseup",function(e){var t=e.target.nodeName;/^(TABLE|IMG|HR)$/.test(t)&&(o.selection.select(e.target,"TABLE"==t),o.nodeChanged())}),o.dom.bind(o.getBody(),"mscontrolselect",function(e){/^(TABLE|IMG|HR)$/.test(e.target.nodeName)&&(e.preventDefault(),"IMG"==e.target.tagName&&window.setTimeout(function(){o.selection.select(e.target)},0))}))),o.on("nodechange mousedown mouseup ResizeEditor",d),o.on("keydown keyup",function(e){C&&"TABLE"==C.nodeName&&d(e)}),o.on("hide",c)}),o.on("remove",p),{isResizable:r,showResizeRect:l,hideResizeRect:c,updateResizeRect:d,controlSelect:v,destroy:T}}}),/**
 * RangeUtils.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/dom/RangeUtils",["tinymce/util/Tools","tinymce/dom/TreeWalker"],function(e,t){function n(e,t){var n=e.childNodes;return t--,t>n.length-1?t=n.length-1:0>t&&(t=0),n[t]||e}function i(e){this.walk=function(t,i){function r(e){var t;return t=e[0],3===t.nodeType&&t===p&&E>=t.nodeValue.length&&e.splice(0,1),t=e[e.length-1],0===T&&e.length>0&&t===v&&3===t.nodeType&&e.splice(e.length-1,1),e}function a(e,t,n){for(var i=[];e&&e!=n;e=e[t])i.push(e);return i}function s(e,t){do{if(e.parentNode==t)return e;e=e.parentNode}while(e)}function l(e,t,n){var o=n?"nextSibling":"previousSibling";for(f=e,h=f.parentNode;f&&f!=t;f=h)h=f.parentNode,m=a(f==e?f:f[o],o),m.length&&(n||m.reverse(),i(r(m)))}var c,d,u,f,h,m,g,p=t.startContainer,E=t.startOffset,v=t.endContainer,T=t.endOffset;if(g=e.select("td.mce-item-selected,th.mce-item-selected"),g.length>0)return void o(g,function(e){i([e])});if(1==p.nodeType&&p.hasChildNodes()&&(p=p.childNodes[E]),1==v.nodeType&&v.hasChildNodes()&&(v=n(v,T)),p==v)return i(r([p]));for(c=e.findCommonAncestor(p,v),f=p;f;f=f.parentNode){if(f===v)return l(p,c,!0);if(f===c)break}for(f=v;f;f=f.parentNode){if(f===p)return l(v,c);if(f===c)break}d=s(p,c)||p,u=s(v,c)||v,l(p,d,!0),m=a(d==p?d:d.nextSibling,"nextSibling",u==v?u.nextSibling:u),m.length&&i(r(m)),l(v,u)},this.split=function(e){function t(e,t){return e.splitText(t)}var n=e.startContainer,i=e.startOffset,o=e.endContainer,r=e.endOffset;return n==o&&3==n.nodeType?i>0&&i<n.nodeValue.length&&(o=t(n,i),n=o.previousSibling,r>i?(r-=i,n=o=t(o,r).previousSibling,r=o.nodeValue.length,i=0):r=0):(3==n.nodeType&&i>0&&i<n.nodeValue.length&&(n=t(n,i),i=0),3==o.nodeType&&r>0&&r<o.nodeValue.length&&(o=t(o,r).previousSibling,r=o.nodeValue.length)),{startContainer:n,startOffset:i,endContainer:o,endOffset:r}},this.normalize=function(n){function i(i){function a(n,i){for(var o=new t(n,e.getParent(n.parentNode,e.isBlock)||p);n=o[i?"prev":"next"]();)if("BR"===n.nodeName)return!0}function s(e,t){return e.previousSibling&&e.previousSibling.nodeName==t}function l(n,i){var a,s,l;if(i=i||c,l=e.getParent(i.parentNode,e.isBlock)||p,n&&"BR"==i.nodeName&&g&&e.isEmpty(l))return c=i.parentNode,d=e.nodeIndex(i),void(o=!0);for(a=new t(i,l);f=a[n?"prev":"next"]();){if("false"===e.getContentEditableParent(f))return;if(3===f.nodeType&&f.nodeValue.length>0)return c=f,d=n?f.nodeValue.length:0,void(o=!0);if(e.isBlock(f)||h[f.nodeName.toLowerCase()])return;s=f}r&&s&&(c=s,o=!0,d=0)}var c,d,u,f,h,m,g,p=e.getRoot();if(c=n[(i?"start":"end")+"Container"],d=n[(i?"start":"end")+"Offset"],g=1==c.nodeType&&d===c.childNodes.length,h=e.schema.getNonEmptyElements(),m=i,1==c.nodeType&&d>c.childNodes.length-1&&(m=!1),9===c.nodeType&&(c=e.getRoot(),d=0),c===p){if(m&&(f=c.childNodes[d>0?d-1:0],f&&(h[f.nodeName]||"TABLE"==f.nodeName)))return;if(c.hasChildNodes()&&(d=Math.min(!m&&d>0?d-1:d,c.childNodes.length-1),c=c.childNodes[d],d=0,c.hasChildNodes()&&!/TABLE/.test(c.nodeName))){f=c,u=new t(c,p);do{if(3===f.nodeType&&f.nodeValue.length>0){d=m?0:f.nodeValue.length,c=f,o=!0;break}if(h[f.nodeName.toLowerCase()]){d=e.nodeIndex(f),c=f.parentNode,"IMG"!=f.nodeName||m||d++,o=!0;break}}while(f=m?u.next():u.prev())}}r&&(3===c.nodeType&&0===d&&l(!0),1===c.nodeType&&(f=c.childNodes[d],f||(f=c.childNodes[d-1]),!f||"BR"!==f.nodeName||s(f,"A")||a(f)||a(f,!0)||l(!0,f))),m&&!r&&3===c.nodeType&&d===c.nodeValue.length&&l(!1),o&&n["set"+(i?"Start":"End")](c,d)}var o,r;return r=n.collapsed,i(!0),r||i(),o&&r&&n.collapse(!0),o}}var o=e.each;return i.compareRanges=function(e,t){if(e&&t){if(!e.item&&!e.duplicate)return e.startContainer==t.startContainer&&e.startOffset==t.startOffset;if(e.item&&t.item&&e.item(0)===t.item(0))return!0;if(e.isEqual&&t.isEqual&&t.isEqual(e))return!0}return!1},i}),/**
 * BookmarkManager.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/dom/BookmarkManager",["tinymce/Env","tinymce/util/Tools"],function(e,t){function n(n){var i=n.dom;this.getBookmark=function(e,o){function r(e,n){var o=0;return t.each(i.select(e),function(e,t){e==n&&(o=t)}),o}function a(e){function t(t){var n,i,o,r=t?"start":"end";n=e[r+"Container"],i=e[r+"Offset"],1==n.nodeType&&"TR"==n.nodeName&&(o=n.childNodes,n=o[Math.min(t?i:i-1,o.length-1)],n&&(i=t?0:n.childNodes.length,e["set"+(t?"Start":"End")](n,i)))}return t(!0),t(),e}function s(){function e(e,t){var n,a,s=e[t?"startContainer":"endContainer"],l=e[t?"startOffset":"endOffset"],c=[],d=0;if(3==s.nodeType){if(o)for(n=s.previousSibling;n&&3==n.nodeType;n=n.previousSibling)l+=n.nodeValue.length;c.push(l)}else a=s.childNodes,l>=a.length&&a.length&&(d=1,l=Math.max(0,a.length-1)),c.push(i.nodeIndex(a[l],o)+d);for(;s&&s!=r;s=s.parentNode)c.push(i.nodeIndex(s,o));return c}var t=n.getRng(!0),r=i.getRoot(),a={};return a.start=e(t,!0),n.isCollapsed()||(a.end=e(t)),a}var l,c,d,u,f,h,m,g="&#xFEFF;";if(2==e)return h=n.getNode(),f=h?h.nodeName:null,"IMG"==f?{name:f,index:r(f,h)}:n.tridentSel?n.tridentSel.getBookmark(e):s();if(e)return{rng:n.getRng()};if(l=n.getRng(),d=i.uniqueId(),u=n.isCollapsed(),m="overflow:hidden;line-height:0px",l.duplicate||l.item){if(l.item)return h=l.item(0),f=h.nodeName,{name:f,index:r(f,h)};c=l.duplicate();try{l.collapse(),l.pasteHTML('<span data-mce-type="bookmark" id="'+d+'_start" style="'+m+'">'+g+"</span>"),u||(c.collapse(!1),l.moveToElementText(c.parentElement()),0===l.compareEndPoints("StartToEnd",c)&&c.move("character",-1),c.pasteHTML('<span data-mce-type="bookmark" id="'+d+'_end" style="'+m+'">'+g+"</span>"))}catch(p){return null}}else{if(h=n.getNode(),f=h.nodeName,"IMG"==f)return{name:f,index:r(f,h)};c=a(l.cloneRange()),u||(c.collapse(!1),c.insertNode(i.create("span",{"data-mce-type":"bookmark",id:d+"_end",style:m},g))),l=a(l),l.collapse(!0),l.insertNode(i.create("span",{"data-mce-type":"bookmark",id:d+"_start",style:m},g))}return n.moveToBookmark({id:d,keep:1}),{id:d}},this.moveToBookmark=function(o){function r(e){var t,n,i,r,a=o[e?"start":"end"];if(a){for(i=a[0],n=c,t=a.length-1;t>=1;t--){if(r=n.childNodes,a[t]>r.length-1)return;n=r[a[t]]}3===n.nodeType&&(i=Math.min(a[0],n.nodeValue.length)),1===n.nodeType&&(i=Math.min(a[0],n.childNodes.length)),e?l.setStart(n,i):l.setEnd(n,i)}return!0}function a(n){var r,a,s,l,c=i.get(o.id+"_"+n),m=o.keep;if(c&&(r=c.parentNode,"start"==n?(m?(r=c.firstChild,a=1):a=i.nodeIndex(c),d=u=r,f=h=a):(m?(r=c.firstChild,a=1):a=i.nodeIndex(c),u=r,h=a),!m)){for(l=c.previousSibling,s=c.nextSibling,t.each(t.grep(c.childNodes),function(e){3==e.nodeType&&(e.nodeValue=e.nodeValue.replace(/\uFEFF/g,""))});c=i.get(o.id+"_"+n);)i.remove(c,1);l&&s&&l.nodeType==s.nodeType&&3==l.nodeType&&!e.opera&&(a=l.nodeValue.length,l.appendData(s.nodeValue),i.remove(s),"start"==n?(d=u=l,f=h=a):(u=l,h=a))}}function s(t){return!i.isBlock(t)||t.innerHTML||e.ie||(t.innerHTML='<br data-mce-bogus="1" />'),t}var l,c,d,u,f,h;if(o)if(o.start){if(l=i.createRng(),c=i.getRoot(),n.tridentSel)return n.tridentSel.moveToBookmark(o);r(!0)&&r()&&n.setRng(l)}else o.id?(a("start"),a("end"),d&&(l=i.createRng(),l.setStart(s(d),f),l.setEnd(s(u),h),n.setRng(l))):o.name?n.select(i.select(o.name)[o.index]):o.rng&&n.setRng(o.rng)}}return n.isBookmarkNode=function(e){return e&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type")},n}),/**
 * Selection.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/dom/Selection",["tinymce/dom/TreeWalker","tinymce/dom/TridentSelection","tinymce/dom/ControlSelection","tinymce/dom/RangeUtils","tinymce/dom/BookmarkManager","tinymce/Env","tinymce/util/Tools"],function(e,n,i,o,r,a,s){function l(e,t,o,a){var s=this;s.dom=e,s.win=t,s.serializer=o,s.editor=a,s.bookmarkManager=new r(s),s.controlSelection=new i(s,a),s.win.getSelection||(s.tridentSel=new n(s))}var c=s.each,d=s.trim,u=a.ie;return l.prototype={setCursorLocation:function(e,t){var n=this,i=n.dom.createRng();e?(i.setStart(e,t),i.setEnd(e,t),n.setRng(i),n.collapse(!1)):(n._moveEndPoint(i,n.editor.getBody(),!0),n.setRng(i))},getContent:function(e){var n,i,o,r=this,a=r.getRng(),s=r.dom.create("body"),l=r.getSel();return e=e||{},n=i="",e.get=!0,e.format=e.format||"html",e.selection=!0,r.editor.fire("BeforeGetContent",e),"text"==e.format?r.isCollapsed()?"":a.text||(l.toString?l.toString():""):(a.cloneContents?(o=a.cloneContents(),o&&s.appendChild(o)):a.item!==t||a.htmlText!==t?(s.innerHTML="<br>"+(a.item?a.item(0).outerHTML:a.htmlText),s.removeChild(s.firstChild)):s.innerHTML=a.toString(),/^\s/.test(s.innerHTML)&&(n=" "),/\s+$/.test(s.innerHTML)&&(i=" "),e.getInner=!0,e.content=r.isCollapsed()?"":n+r.serializer.serialize(s,e)+i,r.editor.fire("GetContent",e),e.content)},setContent:function(e,t){var n,i,o,r=this,a=r.getRng(),s=r.win.document;if(t=t||{format:"html"},t.set=!0,t.selection=!0,e=t.content=e,t.no_events||r.editor.fire("BeforeSetContent",t),e=t.content,a.insertNode){e+='<span id="__caret">_</span>',a.startContainer==s&&a.endContainer==s?s.body.innerHTML=e:(a.deleteContents(),0===s.body.childNodes.length?s.body.innerHTML=e:a.createContextualFragment?a.insertNode(a.createContextualFragment(e)):(i=s.createDocumentFragment(),o=s.createElement("div"),i.appendChild(o),o.outerHTML=e,a.insertNode(i))),n=r.dom.get("__caret"),a=s.createRange(),a.setStartBefore(n),a.setEndBefore(n),r.setRng(a),r.dom.remove("__caret");try{r.setRng(a)}catch(l){}}else a.item&&(s.execCommand("Delete",!1,null),a=r.getRng()),/^\s+/.test(e)?(a.pasteHTML('<span id="__mce_tmp">_</span>'+e),r.dom.remove("__mce_tmp")):a.pasteHTML(e);t.no_events||r.editor.fire("SetContent",t)},getStart:function(){var e,t,n,i,o=this,r=o.getRng();if(r.duplicate||r.item){if(r.item)return r.item(0);for(n=r.duplicate(),n.collapse(1),e=n.parentElement(),e.ownerDocument!==o.dom.doc&&(e=o.dom.getRoot()),t=i=r.parentElement();i=i.parentNode;)if(i==e){e=t;break}return e}return e=r.startContainer,1==e.nodeType&&e.hasChildNodes()&&(e=e.childNodes[Math.min(e.childNodes.length-1,r.startOffset)]),e&&3==e.nodeType?e.parentNode:e},getEnd:function(){var e,t,n=this,i=n.getRng();return i.duplicate||i.item?i.item?i.item(0):(i=i.duplicate(),i.collapse(0),e=i.parentElement(),e.ownerDocument!==n.dom.doc&&(e=n.dom.getRoot()),e&&"BODY"==e.nodeName?e.lastChild||e:e):(e=i.endContainer,t=i.endOffset,1==e.nodeType&&e.hasChildNodes()&&(e=e.childNodes[t>0?t-1:t]),e&&3==e.nodeType?e.parentNode:e)},getBookmark:function(e,t){return this.bookmarkManager.getBookmark(e,t)},moveToBookmark:function(e){return this.bookmarkManager.moveToBookmark(e)},select:function(e,t){var n,i=this,o=i.dom,r=o.createRng();if(i.lastFocusBookmark=null,e){if(!t&&i.controlSelection.controlSelect(e))return;n=o.nodeIndex(e),r.setStart(e.parentNode,n),r.setEnd(e.parentNode,n+1),t&&(i._moveEndPoint(r,e,!0),i._moveEndPoint(r,e)),i.setRng(r)}return e},isCollapsed:function(){var e=this,t=e.getRng(),n=e.getSel();return!t||t.item?!1:t.compareEndPoints?0===t.compareEndPoints("StartToEnd",t):!n||t.collapsed},collapse:function(e){var t,n=this,i=n.getRng();i.item&&(t=i.item(0),i=n.win.document.body.createTextRange(),i.moveToElementText(t)),i.collapse(!!e),n.setRng(i)},getSel:function(){var e=this.win;return e.getSelection?e.getSelection():e.document.selection},getRng:function(e){function t(e,t,n){try{return t.compareBoundaryPoints(e,n)}catch(i){return-1}}var n,i,o,r,a=this,s=a.win.document;if(!e&&a.lastFocusBookmark){var l=a.lastFocusBookmark;return l.startContainer?(i=s.createRange(),i.setStart(l.startContainer,l.startOffset),i.setEnd(l.endContainer,l.endOffset)):i=l,i}if(e&&a.tridentSel)return a.tridentSel.getRangeAt(0);try{(n=a.getSel())&&(i=n.rangeCount>0?n.getRangeAt(0):n.createRange?n.createRange():s.createRange())}catch(c){}if(u&&i&&i.setStart&&s.selection){try{r=s.selection.createRange()}catch(c){}r&&r.item&&(o=r.item(0),i=s.createRange(),i.setStartBefore(o),i.setEndAfter(o))}return i||(i=s.createRange?s.createRange():s.body.createTextRange()),i.setStart&&9===i.startContainer.nodeType&&i.collapsed&&(o=a.dom.getRoot(),i.setStart(o,0),i.setEnd(o,0)),a.selectedRange&&a.explicitRange&&(0===t(i.START_TO_START,i,a.selectedRange)&&0===t(i.END_TO_END,i,a.selectedRange)?i=a.explicitRange:(a.selectedRange=null,a.explicitRange=null)),i},setRng:function(e,t){var n,i=this;if(e.select)try{e.select()}catch(o){}else if(i.tridentSel){if(e.cloneRange)try{return void i.tridentSel.addRange(e)}catch(o){}}else if(n=i.getSel()){i.explicitRange=e;try{n.removeAllRanges(),n.addRange(e)}catch(o){}t===!1&&n.extend&&(n.collapse(e.endContainer,e.endOffset),n.extend(e.startContainer,e.startOffset)),i.selectedRange=n.rangeCount>0?n.getRangeAt(0):null}},setNode:function(e){var t=this;return t.setContent(t.dom.getOuterHTML(e)),e},getNode:function(){function e(e,t){for(var n=e;e&&3===e.nodeType&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||n}var t,n=this,i=n.getRng(),o=i.startContainer,r=i.endContainer,a=i.startOffset,s=i.endOffset,l=n.dom.getRoot();return i?i.setStart?(t=i.commonAncestorContainer,!i.collapsed&&(o==r&&2>s-a&&o.hasChildNodes()&&(t=o.childNodes[a]),3===o.nodeType&&3===r.nodeType&&(o=o.length===a?e(o.nextSibling,!0):o.parentNode,r=0===s?e(r.previousSibling,!1):r.parentNode,o&&o===r))?o:t&&3==t.nodeType?t.parentNode:t):(t=i.item?i.item(0):i.parentElement(),t.ownerDocument!==n.win.document&&(t=l),t):l},getSelectedBlocks:function(t,n){var i,o,r=this,a=r.dom,s=[];if(o=a.getRoot(),t=a.getParent(t||r.getStart(),a.isBlock),n=a.getParent(n||r.getEnd(),a.isBlock),t&&t!=o&&s.push(t),t&&n&&t!=n){i=t;for(var l=new e(t,o);(i=l.next())&&i!=n;)a.isBlock(i)&&s.push(i)}return n&&t!=n&&n!=o&&s.push(n),s},isForward:function(){var e,t,n=this.dom,i=this.getSel();return i&&i.anchorNode&&i.focusNode?(e=n.createRng(),e.setStart(i.anchorNode,i.anchorOffset),e.collapse(!0),t=n.createRng(),t.setStart(i.focusNode,i.focusOffset),t.collapse(!0),e.compareBoundaryPoints(e.START_TO_START,t)<=0):!0},normalize:function(){var e=this,t=e.getRng();return!u&&new o(e.dom).normalize(t)&&e.setRng(t,e.isForward()),t},selectorChanged:function(e,t){var n,i=this;return i.selectorChangedData||(i.selectorChangedData={},n={},i.editor.on("NodeChange",function(e){var t=e.element,o=i.dom,r=o.getParents(t,null,o.getRoot()),a={};c(i.selectorChangedData,function(e,t){c(r,function(i){return o.is(i,t)?(n[t]||(c(e,function(e){e(!0,{node:i,selector:t,parents:r})}),n[t]=e),a[t]=e,!1):void 0})}),c(n,function(e,i){a[i]||(delete n[i],c(e,function(e){e(!1,{node:t,selector:i,parents:r})}))})})),i.selectorChangedData[e]||(i.selectorChangedData[e]=[]),i.selectorChangedData[e].push(t),i},getScrollContainer:function(){for(var e,t=this.dom.getRoot();t&&"BODY"!=t.nodeName;){if(t.scrollHeight>t.clientHeight){e=t;break}t=t.parentNode}return e},scrollIntoView:function(e){function t(e){for(var t=0,n=0,i=e;i&&i.nodeType;)t+=i.offsetLeft||0,n+=i.offsetTop||0,i=i.offsetParent;return{x:t,y:n}}var n,i,o,r,a=this,s=a.dom,l=s.getRoot();if("BODY"!=l.nodeName){var c=a.getScrollContainer();if(c)return n=t(e).y-t(c).y,r=c.clientHeight,o=c.scrollTop,void((o>n||n+25>o+r)&&(c.scrollTop=o>n?n:n-r+25))}i=s.getViewPort(a.editor.getWin()),n=s.getPos(e).y,o=i.y,r=i.h,(n<i.y||n+25>o+r)&&a.editor.getWin().scrollTo(0,o>n?n:n-r+25)},_moveEndPoint:function(t,n,i){var o=n,r=new e(n,o),s=this.dom.schema.getNonEmptyElements();do{if(3==n.nodeType&&0!==d(n.nodeValue).length)return void(i?t.setStart(n,0):t.setEnd(n,n.nodeValue.length));if(s[n.nodeName])return void(i?t.setStartBefore(n):"BR"==n.nodeName?t.setEndBefore(n):t.setEndAfter(n));if(a.ie&&a.ie<11&&this.dom.isBlock(n)&&this.dom.isEmpty(n))return void(i?t.setStart(n,0):t.setEnd(n,0))}while(n=i?r.next():r.prev());"BODY"==o.nodeName&&(i?t.setStart(o,0):t.setEnd(o,o.childNodes.length))},destroy:function(){this.win=null,this.controlSelection.destroy()}},l}),/**
 * ElementUtils.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/dom/ElementUtils",["tinymce/dom/BookmarkManager","tinymce/util/Tools"],function(e,t){function n(t){this.compare=function(n,o){function r(e){var n={};return i(t.getAttribs(e),function(i){var o=i.nodeName.toLowerCase();0!==o.indexOf("_")&&"style"!==o&&"data-mce-style"!==o&&(n[o]=t.getAttrib(e,o))}),n}function a(e,t){var n,i;for(i in e)if(e.hasOwnProperty(i)){if(n=t[i],"undefined"==typeof n)return!1;if(e[i]!=n)return!1;delete t[i]}for(i in t)if(t.hasOwnProperty(i))return!1;return!0}return n.nodeName!=o.nodeName?!1:a(r(n),r(o))&&a(t.parseStyle(t.getAttrib(n,"style")),t.parseStyle(t.getAttrib(o,"style")))?!e.isBookmarkNode(n)&&!e.isBookmarkNode(o):!1}}var i=t.each;return n}),/**
 * Preview.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/fmt/Preview",["tinymce/util/Tools"],function(e){function t(e,t){function i(e){return e.replace(/%(\w+)/g,"")}var o,r,a,s,l=e.dom,c="";if(s=e.settings.preview_styles,s===!1)return"";if(s||(s="font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"),"string"==typeof t){if(t=e.formatter.get(t),!t)return;t=t[0]}return o=t.block||t.inline||"span",r=l.create(o),n(t.styles,function(e,t){e=i(e),e&&l.setStyle(r,t,e)}),n(t.attributes,function(e,t){e=i(e),e&&l.setAttrib(r,t,e)}),n(t.classes,function(e){e=i(e),l.hasClass(r,e)||l.addClass(r,e)}),e.fire("PreviewFormats"),l.setStyles(r,{position:"absolute",left:-65535}),e.getBody().appendChild(r),a=l.getStyle(e.getBody(),"fontSize",!0),a=/px$/.test(a)?parseInt(a,10):0,n(s.split(" "),function(t){var n=l.getStyle(r,t,!0);if(!("background-color"==t&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(n)&&(n=l.getStyle(e.getBody(),t,!0),"#ffffff"==l.toHex(n).toLowerCase())||"color"==t&&"#000000"==l.toHex(n).toLowerCase())){if("font-size"==t&&/em|%$/.test(n)){if(0===a)return;n=parseFloat(n,10)/(/%$/.test(n)?100:1),n=n*a+"px"}"border"==t&&n&&(c+="padding:0 2px;"),c+=t+":"+n+";"}}),e.fire("AfterPreviewFormats"),l.remove(r),c}var n=e.each;return{getCssText:t}}),/**
 * Formatter.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/Formatter",["tinymce/dom/TreeWalker","tinymce/dom/RangeUtils","tinymce/dom/BookmarkManager","tinymce/dom/ElementUtils","tinymce/util/Tools","tinymce/fmt/Preview"],function(e,t,n,i,o,r){return function(a){function s(e){return e.nodeType&&(e=e.nodeName),!!a.schema.getTextBlockElements()[e.toLowerCase()]}function l(e,t){return U.getParents(e,t,U.getRoot())}function c(e){return 1===e.nodeType&&"_mce_caret"===e.id}function d(){h({valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{"float":"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},defaultBlock:"div"},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"}},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"}}],alignright:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{"float":"right"}}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},defaultBlock:"div"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},wrap_links:!1},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},wrap_links:!1},fontname:{inline:"span",styles:{fontFamily:"%value"}},fontsize:{inline:"span",styles:{fontSize:"%value"}},fontsize_class:{inline:"span",attributes:{"class":"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(){return!0},onformat:function(e,t,n){oe(n,function(t,n){U.setAttrib(e,n,t)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike,sub,sup,dfn,code,samp,kbd,var,cite,mark,q",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]}),oe("p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp".split(/\s/),function(e){h(e,{block:e,remove:"all"})}),h(a.settings.formats)}function u(){a.addShortcut("ctrl+b","bold_desc","Bold"),a.addShortcut("ctrl+i","italic_desc","Italic"),a.addShortcut("ctrl+u","underline_desc","Underline");for(var e=1;6>=e;e++)a.addShortcut("ctrl+"+e,"",["FormatBlock",!1,"h"+e]);a.addShortcut("ctrl+7","",["FormatBlock",!1,"p"]),a.addShortcut("ctrl+8","",["FormatBlock",!1,"div"]),a.addShortcut("ctrl+9","",["FormatBlock",!1,"address"])}function f(e){return e?q[e]:q}function h(e,t){e&&("string"!=typeof e?oe(e,function(e,t){h(t,e)}):(t=t.length?t:[t],oe(t,function(e){e.deep===H&&(e.deep=!e.selector),e.split===H&&(e.split=!e.selector||e.inline),e.remove===H&&e.selector&&!e.inline&&(e.remove="none"),e.selector&&e.inline&&(e.mixed=!0,e.block_expand=!0),"string"==typeof e.classes&&(e.classes=e.classes.split(/\s+/))}),q[e]=t))}function m(e){var t;return a.dom.getParent(e,function(e){return t=a.dom.getStyle(e,"text-decoration"),t&&"none"!==t}),t}function g(e){var t;1===e.nodeType&&e.parentNode&&1===e.parentNode.nodeType&&(t=m(e.parentNode),a.dom.getStyle(e,"color")&&t?a.dom.setStyle(e,"text-decoration",t):a.dom.getStyle(e,"textdecoration")===t&&a.dom.setStyle(e,"text-decoration",null))}function p(t,n,i){function o(e,t){if(t=t||E,e){if(t.onformat&&t.onformat(e,t,n,i),oe(t.styles,function(t,i){U.setStyle(e,i,K(t,n))}),t.styles){var o=U.getAttrib(e,"style");o&&e.setAttribute("data-mce-style",o)}oe(t.attributes,function(t,i){U.setAttrib(e,i,K(t,n))}),oe(t.classes,function(t){t=K(t,n),U.hasClass(e,t)||U.addClass(e,t)})}}function r(){function t(t,n){var o=new e(n);for(i=o.current();i;i=o.prev())if(i.childNodes.length>1||i==t||"BR"==i.tagName)return i}var n=a.selection.getRng(),o=n.startContainer,r=n.endContainer;if(o!=r&&0===n.endOffset){var s=t(o,r),l=3==s.nodeType?s.length:s.childNodes.length;n.setEnd(s,l)}return n}function l(e,t,n,i,o){var r,a,s=[],l=-1,c=-1,d=-1;return oe(e.childNodes,function(e,t){return"UL"===e.nodeName||"OL"===e.nodeName?(l=t,r=e,!1):void 0}),oe(e.childNodes,function(e,n){ie(e)&&(e.id==t.id+"_start"?c=n:e.id==t.id+"_end"&&(d=n))}),0>=l||l>c&&d>l?(oe(re(e.childNodes),o),0):(a=U.clone(n,ee),oe(re(e.childNodes),function(e,t){(l>c&&l>t||c>l&&t>l)&&(s.push(e),e.parentNode.removeChild(e))}),l>c?e.insertBefore(a,r):c>l&&e.insertBefore(a,r.nextSibling),i.push(a),oe(s,function(e){a.appendChild(e)}),a)}function d(e,i,r){var a,d,u=[],f=!0;a=E.inline||E.block,d=U.create(a),o(d),j.walk(e,function(e){function h(e){var p,C,b,y,I;return I=f,p=e.nodeName.toLowerCase(),C=e.parentNode.nodeName.toLowerCase(),1===e.nodeType&&ne(e)&&(I=f,f="true"===ne(e),y=!0),R(p,"br")?(g=0,void(E.block&&U.remove(e))):E.wrapper&&T(e,t,n)?void(g=0):f&&!y&&E.block&&!E.wrapper&&s(p)&&G(C,a)?(e=U.rename(e,a),o(e),u.push(e),void(g=0)):E.selector&&(oe(m,function(t){"collapsed"in t&&t.collapsed!==v||U.is(e,t.selector)&&!c(e)&&(o(e,t),b=!0)}),!E.inline||b)?void(g=0):void(!f||y||!G(a,p)||!G(C,a)||!r&&3===e.nodeType&&1===e.nodeValue.length&&65279===e.nodeValue.charCodeAt(0)||c(e)||E.inline&&X(e)?"li"==p&&i?g=l(e,i,d,u,h):(g=0,oe(re(e.childNodes),h),y&&(f=I),g=0):(g||(g=U.clone(d,ee),e.parentNode.insertBefore(g,e),u.push(g)),g.appendChild(e)))}var g;oe(e,h)}),E.wrap_links===!1&&oe(u,function(e){function t(e){var n,i,o;if("A"===e.nodeName){for(i=U.clone(d,ee),u.push(i),o=re(e.childNodes),n=0;n<o.length;n++)i.appendChild(o[n]);e.appendChild(i)}oe(re(e.childNodes),t)}t(e)}),oe(u,function(e){function i(e){var t=0;return oe(e.childNodes,function(e){x(e)||ie(e)||t++}),t}function r(e){var t,n;return oe(e.childNodes,function(e){return 1!=e.nodeType||ie(e)||c(e)?void 0:(t=e,ee)}),t&&!ie(t)&&D(t,E)&&(n=U.clone(t,ee),o(n),U.replace(n,e,te),U.remove(t,1)),n||e}var a;if(a=i(e),(u.length>1||!X(e))&&0===a)return void U.remove(e,1);if(E.inline||E.wrapper){if(E.exact||1!==a||(e=r(e)),oe(m,function(t){oe(U.select(t.inline,e),function(e){var i;if(!ie(e)){if(t.wrap_links===!1){i=e.parentNode;do if("A"===i.nodeName)return;while(i=i.parentNode)}N(t,n,e,t.exact?e:null)}})}),T(e.parentNode,t,n))return U.remove(e,1),e=0,te;E.merge_with_parents&&U.getParent(e.parentNode,function(i){return T(i,t,n)?(U.remove(e,1),e=0,te):void 0}),e&&E.merge_siblings!==!1&&(e=B(L(e),e),e=B(e,L(e,te)))}})}var u,h,m=f(t),E=m[0],v=!i&&W.isCollapsed();if(E)if(i)i.nodeType?(h=U.createRng(),h.setStartBefore(i),h.setEndAfter(i),d(S(h,m),null,!0)):d(i,null,!0);else if(v&&E.inline&&!U.select("td.mce-item-selected,th.mce-item-selected").length)F("apply",t,n);else{var C=a.selection.getNode();Y||!m[0].defaultBlock||U.getParent(C,U.isBlock)||p(m[0].defaultBlock),a.selection.setRng(r()),u=W.getBookmark(),d(S(W.getRng(te),m),u),E.styles&&(E.styles.color||E.styles.textDecoration)&&(ae(C,g,"childNodes"),g(C)),W.moveToBookmark(u),M(W.getRng(te)),a.nodeChanged()}}function E(e,t,n){function i(e){var n,o,r,a,s;if(1===e.nodeType&&ne(e)&&(a=E,E="true"===ne(e),s=!0),n=re(e.childNodes),E&&!s)for(o=0,r=g.length;r>o&&!N(g[o],t,e,e);o++);if(p.deep&&n.length){for(o=0,r=n.length;r>o;o++)i(n[o]);s&&(E=a)}}function o(n){var i;return oe(l(n.parentNode).reverse(),function(n){var o;i||"_start"==n.id||"_end"==n.id||(o=T(n,e,t),o&&o.split!==!1&&(i=n))}),i}function r(e,n,i,o){var r,a,s,l,c,d;if(e){for(d=e.parentNode,r=n.parentNode;r&&r!=d;r=r.parentNode){for(a=U.clone(r,ee),c=0;c<g.length;c++)if(N(g[c],t,a,a)){a=0;break}a&&(s&&a.appendChild(s),l||(l=a),s=a)}!o||p.mixed&&X(e)||(n=U.split(e,n)),s&&(i.parentNode.insertBefore(s,i),l.appendChild(i))}return n}function s(e){return r(o(e),e,e,!0)}function c(e){var t=U.get(e?"_start":"_end"),n=t[e?"firstChild":"lastChild"];return ie(n)&&(n=n[e?"firstChild":"lastChild"]),U.remove(t,!0),n}function d(e){var t,n,o=e.commonAncestorContainer;e=S(e,g,te),p.split&&(t=P(e,te),n=P(e),t!=n?(/^(TR|TH|TD)$/.test(t.nodeName)&&t.firstChild&&(t="TR"==t.nodeName?t.firstChild.firstChild||t:t.firstChild||t),o&&/^T(HEAD|BODY|FOOT|R)$/.test(o.nodeName)&&/^(TH|TD)$/.test(n.nodeName)&&n.firstChild&&(n=n.firstChild||n),t=w(t,"span",{id:"_start","data-mce-type":"bookmark"}),n=w(n,"span",{id:"_end","data-mce-type":"bookmark"}),s(t),s(n),t=c(te),n=c()):t=n=s(t),e.startContainer=t.parentNode,e.startOffset=J(t),e.endContainer=n.parentNode,e.endOffset=J(n)+1),j.walk(e,function(e){oe(e,function(e){i(e),1===e.nodeType&&"underline"===a.dom.getStyle(e,"text-decoration")&&e.parentNode&&"underline"===m(e.parentNode)&&N({deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,e)})})}var u,h,g=f(e),p=g[0],E=!0;return n?void(n.nodeType?(h=U.createRng(),h.setStartBefore(n),h.setEndAfter(n),d(h)):d(n)):void(W.isCollapsed()&&p.inline&&!U.select("td.mce-item-selected,th.mce-item-selected").length?F("remove",e,t):(u=W.getBookmark(),d(W.getRng(te)),W.moveToBookmark(u),p.inline&&C(e,t,W.getStart())&&M(W.getRng(!0)),a.nodeChanged()))}function v(e,t,n){var i=f(e);!C(e,t,n)||"toggle"in i[0]&&!i[0].toggle?p(e,t,n):E(e,t,n)}function T(e,t,n,i){function o(e,t,o){var r,a,s,l=t[o];if(t.onmatch)return t.onmatch(e,t,o);if(l)if(l.length===H){for(r in l)if(l.hasOwnProperty(r)){if(a="attributes"===o?U.getAttrib(e,r):_(e,r),i&&!a&&!t.exact)return;if((!i||t.exact)&&!R(a,k(K(l[r],n),r)))return}}else for(s=0;s<l.length;s++)if("attributes"===o?U.getAttrib(e,l[s]):_(e,l[s]))return t;return t}var r,a,s,l=f(t);if(l&&e)for(a=0;a<l.length;a++)if(r=l[a],D(e,r)&&o(e,r,"attributes")&&o(e,r,"styles")){if(s=r.classes)for(a=0;a<s.length;a++)if(!U.hasClass(e,s[a]))return;return r}}function C(e,t,n){function i(n){var i=U.getRoot();return n===i?!1:(n=U.getParent(n,function(n){return n.parentNode===i||!!T(n,e,t,!0)}),T(n,e,t))}var o;return n?i(n):(n=W.getNode(),i(n)?te:(o=W.getStart(),o!=n&&i(o)?te:ee))}function b(e,t){var n,i=[],o={};return n=W.getStart(),U.getParent(n,function(n){var r,a;for(r=0;r<e.length;r++)a=e[r],!o[a]&&T(n,a,t)&&(o[a]=!0,i.push(a))},U.getRoot()),i}function y(e){var t,n,i,o,r,a=f(e);if(a)for(t=W.getStart(),n=l(t),o=a.length-1;o>=0;o--){if(r=a[o].selector,!r||a[o].defaultBlock)return te;for(i=n.length-1;i>=0;i--)if(U.is(n[i],r))return te}return ee}function I(e,t,n){var i;return $||($={},i={},a.on("NodeChange",function(e){var t=l(e.element),n={};oe($,function(e,o){oe(t,function(r){return T(r,o,{},e.similar)?(i[o]||(oe(e,function(e){e(!0,{node:r,format:o,parents:t})}),i[o]=e),n[o]=e,!1):void 0})}),oe(i,function(o,r){n[r]||(delete i[r],oe(o,function(n){n(!1,{node:e.element,format:r,parents:t})}))})})),oe(e.split(","),function(e){$[e]||($[e]=[],$[e].similar=n),$[e].push(t)}),this}function O(e){return r.getCssText(a,e)}function D(e,t){return R(e,t.inline)?te:R(e,t.block)?te:t.selector?1==e.nodeType&&U.is(e,t.selector):void 0}function R(e,t){return e=e||"",t=t||"",e=""+(e.nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()==t.toLowerCase()}function _(e,t){return k(U.getStyle(e,t),t)}function k(e,t){return("color"==t||"backgroundColor"==t)&&(e=U.toHex(e)),"fontWeight"==t&&700==e&&(e="bold"),"fontFamily"==t&&(e=e.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),""+e}function K(e,t){return"string"!=typeof e?e=e(t):t&&(e=e.replace(/%(\w+)/g,function(e,n){return t[n]||e})),e}function x(e){return e&&3===e.nodeType&&/^([\t \r\n]+|)$/.test(e.nodeValue)}function w(e,t,n){var i=U.create(t,n);return e.parentNode.insertBefore(i,e),i.appendChild(e),i}function S(t,n,i){function o(e){function t(e){return"BR"==e.nodeName&&e.getAttribute("data-mce-bogus")&&!e.nextSibling}var i,o,r,a,s;if(i=o=e?p:v,a=e?"previousSibling":"nextSibling",s=U.getRoot(),3==i.nodeType&&!x(i)&&(e?E>0:T<i.nodeValue.length))return i;for(;;){if(!n[0].block_expand&&X(o))return o;for(r=o[a];r;r=r[a])if(!ie(r)&&!x(r)&&!t(r))return o;if(o.parentNode==s){i=o;break}o=o.parentNode}return i}function r(e,t){for(t===H&&(t=3===e.nodeType?e.length:e.childNodes.length);e&&e.hasChildNodes();)e=e.childNodes[t],e&&(t=3===e.nodeType?e.length:e.childNodes.length);return{node:e,offset:t}}function c(e){for(var t=e;t;){if(1===t.nodeType&&ne(t))return"false"===ne(t)?t:e;t=t.parentNode}return e}function d(t,n,o){function r(e,t){var n,r,a=e.nodeValue;return"undefined"==typeof t&&(t=o?a.length:0),o?(n=a.lastIndexOf(" ",t),r=a.lastIndexOf("\xa0",t),n=n>r?n:r,-1===n||i||n++):(n=a.indexOf(" ",t),r=a.indexOf("\xa0",t),n=-1!==n&&(-1===r||r>n)?n:r),n}var s,l,c,d;if(3===t.nodeType){if(c=r(t,n),-1!==c)return{container:t,offset:c};d=t}for(s=new e(t,U.getParent(t,X)||a.getBody());l=s[o?"prev":"next"]();)if(3===l.nodeType){if(d=l,c=r(l),-1!==c)return{container:l,offset:c}}else if(X(l))break;return d?(n=o?0:d.length,{container:d,offset:n}):void 0}function u(e,i){var o,r,a,s;for(3==e.nodeType&&0===e.nodeValue.length&&e[i]&&(e=e[i]),o=l(e),r=0;r<o.length;r++)for(a=0;a<n.length;a++)if(s=n[a],!("collapsed"in s&&s.collapsed!==t.collapsed)&&U.is(o[r],s.selector))return o[r];return e}function f(e,t){var i,o=U.getRoot();if(n[0].wrapper||(i=U.getParent(e,n[0].block,o)),i||(i=U.getParent(3==e.nodeType?e.parentNode:e,function(e){return e!=o&&s(e)})),i&&n[0].wrapper&&(i=l(i,"ul,ol").reverse()[0]||i),!i)for(i=e;i[t]&&!X(i[t])&&(i=i[t],!R(i,"br")););return i||e}var h,m,g,p=t.startContainer,E=t.startOffset,v=t.endContainer,T=t.endOffset;if(1==p.nodeType&&p.hasChildNodes()&&(h=p.childNodes.length-1,p=p.childNodes[E>h?h:E],3==p.nodeType&&(E=0)),1==v.nodeType&&v.hasChildNodes()&&(h=v.childNodes.length-1,v=v.childNodes[T>h?h:T-1],3==v.nodeType&&(T=v.nodeValue.length)),p=c(p),v=c(v),(ie(p.parentNode)||ie(p))&&(p=ie(p)?p:p.parentNode,p=p.nextSibling||p,3==p.nodeType&&(E=0)),(ie(v.parentNode)||ie(v))&&(v=ie(v)?v:v.parentNode,v=v.previousSibling||v,3==v.nodeType&&(T=v.length)),n[0].inline&&(t.collapsed&&(g=d(p,E,!0),g&&(p=g.container,E=g.offset),g=d(v,T),g&&(v=g.container,T=g.offset)),m=r(v,T),m.node)){for(;m.node&&0===m.offset&&m.node.previousSibling;)m=r(m.node.previousSibling);m.node&&m.offset>0&&3===m.node.nodeType&&" "===m.node.nodeValue.charAt(m.offset-1)&&m.offset>1&&(v=m.node,v.splitText(m.offset-1))}return(n[0].inline||n[0].block_expand)&&(n[0].inline&&3==p.nodeType&&0!==E||(p=o(!0)),n[0].inline&&3==v.nodeType&&T!==v.nodeValue.length||(v=o())),n[0].selector&&n[0].expand!==ee&&!n[0].inline&&(p=u(p,"previousSibling"),v=u(v,"nextSibling")),(n[0].block||n[0].selector)&&(p=f(p,"previousSibling"),v=f(v,"nextSibling"),n[0].block&&(X(p)||(p=o(!0)),X(v)||(v=o()))),1==p.nodeType&&(E=J(p),p=p.parentNode),1==v.nodeType&&(T=J(v)+1,v=v.parentNode),{startContainer:p,startOffset:E,endContainer:v,endOffset:T}}function N(e,t,n,i){var o,r,a;if(!D(n,e))return ee;if("all"!=e.remove)for(oe(e.styles,function(e,o){e=k(K(e,t),o),"number"==typeof o&&(o=e,i=0),(!i||R(_(i,o),e))&&U.setStyle(n,o,""),a=1}),a&&""===U.getAttrib(n,"style")&&(n.removeAttribute("style"),n.removeAttribute("data-mce-style")),oe(e.attributes,function(e,o){var r;if(e=K(e,t),"number"==typeof o&&(o=e,i=0),!i||R(U.getAttrib(i,o),e)){if("class"==o&&(e=U.getAttrib(n,o),e&&(r="",oe(e.split(/\s+/),function(e){/mce\w+/.test(e)&&(r+=(r?" ":"")+e)}),r)))return void U.setAttrib(n,o,r);"class"==o&&n.removeAttribute("className"),Q.test(o)&&n.removeAttribute("data-mce-"+o),n.removeAttribute(o)}}),oe(e.classes,function(e){e=K(e,t),(!i||U.hasClass(i,e))&&U.removeClass(n,e)}),r=U.getAttribs(n),o=0;o<r.length;o++)if(0!==r[o].nodeName.indexOf("_"))return ee;return"none"!=e.remove?(A(n,e),te):void 0}function A(e,t){function n(e,t,n){return e=L(e,t,n),!e||"BR"==e.nodeName||X(e)}var i,o=e.parentNode;t.block&&(Y?o==U.getRoot()&&(t.list_block&&R(e,t.list_block)||oe(re(e.childNodes),function(e){G(Y,e.nodeName.toLowerCase())?i?i.appendChild(e):(i=w(e,Y),U.setAttribs(i,a.settings.forced_root_block_attrs)):i=0})):X(e)&&!X(o)&&(n(e,ee)||n(e.firstChild,te,1)||e.insertBefore(U.create("br"),e.firstChild),n(e,te)||n(e.lastChild,ee,1)||e.appendChild(U.create("br")))),t.selector&&t.inline&&!R(t.inline,e)||U.remove(e,1)}function L(e,t,n){if(e)for(t=t?"nextSibling":"previousSibling",e=n?e:e[t];e;e=e[t])if(1==e.nodeType||!x(e))return e}function B(e,t){function n(e,t){for(o=e;o;o=o[t]){if(3==o.nodeType&&0!==o.nodeValue.length)return e;if(1==o.nodeType&&!ie(o))return o}return e}var o,r,a=new i(U);if(e&&t&&(e=n(e,"previousSibling"),t=n(t,"nextSibling"),a.compare(e,t))){for(o=e.nextSibling;o&&o!=t;)r=o,o=o.nextSibling,e.appendChild(r);return U.remove(t),oe(re(t.childNodes),function(t){e.appendChild(t)}),e}return t}function P(t,n){var i,o,r;return i=t[n?"startContainer":"endContainer"],o=t[n?"startOffset":"endOffset"],1==i.nodeType&&(r=i.childNodes.length-1,!n&&o&&o--,i=i.childNodes[o>r?r:o]),3===i.nodeType&&n&&o>=i.nodeValue.length&&(i=new e(i,a.getBody()).next()||i),3!==i.nodeType||n||0!==o||(i=new e(i,a.getBody()).prev()||i),i}function F(t,n,i){function o(e){var t=U.create("span",{id:g,"data-mce-bogus":!0,style:v?"color:red":""});return e&&t.appendChild(a.getDoc().createTextNode(Z)),t}function r(e,t){for(;e;){if(3===e.nodeType&&e.nodeValue!==Z||e.childNodes.length>1)return!1;t&&1===e.nodeType&&t.push(e),e=e.firstChild}return!0}function l(e){for(;e;){if(e.id===g)return e;e=e.parentNode}}function c(t){var n;if(t)for(n=new e(t,t),t=n.current();t;t=n.next())if(3===t.nodeType)return t}function d(e,t){var n,i;if(e)i=W.getRng(!0),r(e)?(t!==!1&&(i.setStartBefore(e),i.setEndBefore(e)),U.remove(e)):(n=c(e),n.nodeValue.charAt(0)===Z&&(n=n.deleteData(0,1)),U.remove(e,1)),W.setRng(i);else if(e=l(W.getStart()),!e)for(;e=U.get(g);)d(e,!1)}function u(){var e,t,r,a,s,d,u;e=W.getRng(!0),a=e.startOffset,d=e.startContainer,u=d.nodeValue,t=l(W.getStart()),t&&(r=c(t)),u&&a>0&&a<u.length&&/\w/.test(u.charAt(a))&&/\w/.test(u.charAt(a-1))?(s=W.getBookmark(),e.collapse(!0),e=S(e,f(n)),e=j.split(e),p(n,i,e),W.moveToBookmark(s)):(t&&r.nodeValue===Z?p(n,i,t):(t=o(!0),r=t.firstChild,e.insertNode(t),a=1,p(n,i,t)),W.setCursorLocation(r,a))}function h(){var e,t,r,a,l,c,d,u,h=W.getRng(!0),m=[];for(e=h.startContainer,t=h.startOffset,l=e,3==e.nodeType&&(t!=e.nodeValue.length&&(a=!0),l=l.parentNode);l;){if(T(l,n,i)){c=l;break}l.nextSibling&&(a=!0),m.push(l),l=l.parentNode}if(c)if(a)r=W.getBookmark(),h.collapse(!0),h=S(h,f(n),!0),h=j.split(h),E(n,i,h),W.moveToBookmark(r);else{for(u=o(),l=u,d=m.length-1;d>=0;d--)l.appendChild(U.clone(m[d],!1)),l=l.firstChild;l.appendChild(U.doc.createTextNode(Z)),l=l.firstChild;var g=U.getParent(c,s);g&&U.isEmpty(g)?c.parentNode.replaceChild(u,c):U.insertAfter(u,c),W.setCursorLocation(l,1),U.isEmpty(c)&&U.remove(c)}}function m(){var e;e=l(W.getStart()),e&&!U.isEmpty(e)&&ae(e,function(e){1!=e.nodeType||e.id===g||U.isEmpty(e)||U.setAttrib(e,"data-mce-bogus",null)},"childNodes")}var g="_mce_caret",v=a.settings.caret_debug;a._hasCaretEvents||(V=function(){var e,t=[];if(r(l(W.getStart()),t))for(e=t.length;e--;)U.setAttrib(t[e],"data-mce-bogus","1")},z=function(e){var t=e.keyCode;d(),(8==t||37==t||39==t)&&d(l(W.getStart())),m()},a.on("SetContent",function(e){e.selection&&m()}),a._hasCaretEvents=!0),"apply"==t?u():h()}function M(t){var n,i,o,r,a,s=t.startContainer,l=t.startOffset;if(3==s.nodeType&&l>=s.nodeValue.length&&(l=J(s),s=s.parentNode,n=!0),1==s.nodeType)for(r=s.childNodes,s=r[Math.min(l,r.length-1)],i=new e(s,U.getParent(s,U.isBlock)),(l>r.length-1||n)&&i.next(),o=i.current();o;o=i.next())if(3==o.nodeType&&!x(o))return a=U.create("a",null,Z),o.parentNode.insertBefore(a,o),t.setStart(o,0),W.setRng(t),void U.remove(a)}var $,H,z,V,q={},U=a.dom,W=a.selection,j=new t(U),G=a.schema.isValidChild,X=U.isBlock,Y=a.settings.forced_root_block,J=U.nodeIndex,Z="\ufeff",Q=/^(src|href|style)$/,ee=!1,te=!0,ne=U.getContentEditable,ie=n.isBookmarkNode,oe=o.each,re=o.grep,ae=o.walk,se=o.extend;se(this,{get:f,register:h,apply:p,remove:E,toggle:v,match:C,matchAll:b,matchNode:T,canApply:y,formatChanged:I,getCssText:O}),d(),u(),a.on("BeforeGetContent",function(){V&&V()}),a.on("mouseup keydown",function(e){z&&z(e)})}}),/**
 * UndoManager.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/UndoManager",["tinymce/Env","tinymce/util/Tools"],function(e,t){var n,i=t.trim;return n=new RegExp(["<span[^>]+data-mce-bogus[^>]+>[\u200b\ufeff]+<\\/span>","<div[^>]+data-mce-bogus[^>]+><\\/div>",'\\s?data-mce-selected="[^"]+"'].join("|"),"gi"),function(t){function o(){return i(t.getContent({format:"raw",no_events:1}).replace(n,""))}function r(e){l.typing=!1,l.add({},e)}var a,s,l=this,c=0,d=[],u=0;return t.on("init",function(){l.add()}),t.on("BeforeExecCommand",function(e){var t=e.command;"Undo"!=t&&"Redo"!=t&&"mceRepaint"!=t&&l.beforeChange()}),t.on("ExecCommand",function(e){var t=e.command;"Undo"!=t&&"Redo"!=t&&"mceRepaint"!=t&&r(e)}),t.on("ObjectResizeStart",function(){l.beforeChange()}),t.on("SaveContent ObjectResized blur",r),t.on("DragEnd",r),t.on("KeyUp",function(n){var i=n.keyCode;(i>=33&&36>=i||i>=37&&40>=i||45==i||13==i||n.ctrlKey)&&(r(),t.nodeChanged()),(46==i||8==i||e.mac&&(91==i||93==i))&&t.nodeChanged(),s&&l.typing&&(t.isDirty()||(t.isNotDirty=!d[0]||o()==d[0].content,t.isNotDirty||t.fire("change",{level:d[0],lastLevel:null})),t.fire("TypingUndo"),s=!1,t.nodeChanged())}),t.on("KeyDown",function(e){var t=e.keyCode;return t>=33&&36>=t||t>=37&&40>=t||45==t?void(l.typing&&r(e)):void((16>t||t>20)&&224!=t&&91!=t&&!l.typing&&(l.beforeChange(),l.typing=!0,l.add({},e),s=!0))}),t.on("MouseDown",function(e){l.typing&&r(e)}),t.addShortcut("ctrl+z","","Undo"),t.addShortcut("ctrl+y,ctrl+shift+z","","Redo"),t.on("AddUndo Undo Redo ClearUndos MouseUp",function(e){e.isDefaultPrevented()||t.nodeChanged()}),l={data:d,typing:!1,beforeChange:function(){u||(a=t.selection.getBookmark(2,!0))},add:function(e,n){var i,r,s=t.settings;if(e=e||{},e.content=o(),u||t.removed)return null;if(r=d[c],t.fire("BeforeAddUndo",{level:e,lastLevel:r,originalEvent:n}).isDefaultPrevented())return null;if(r&&r.content==e.content)return null;if(d[c]&&(d[c].beforeBookmark=a),s.custom_undo_redo_levels&&d.length>s.custom_undo_redo_levels){for(i=0;i<d.length-1;i++)d[i]=d[i+1];d.length--,c=d.length}e.bookmark=t.selection.getBookmark(2,!0),c<d.length-1&&(d.length=c+1),d.push(e),c=d.length-1;var l={level:e,lastLevel:r,originalEvent:n};return t.fire("AddUndo",l),c>0&&(t.isNotDirty=!1,t.fire("change",l)),e},undo:function(){var e;return l.typing&&(l.add(),l.typing=!1),c>0&&(e=d[--c],0===c&&(t.isNotDirty=!0),t.setContent(e.content,{format:"raw"}),t.selection.moveToBookmark(e.beforeBookmark),t.fire("undo",{level:e})),e},redo:function(){var e;return c<d.length-1&&(e=d[++c],t.setContent(e.content,{format:"raw"}),t.selection.moveToBookmark(e.bookmark),t.fire("redo",{level:e})),e},clear:function(){d=[],c=0,l.typing=!1,t.fire("ClearUndos")},hasUndo:function(){return c>0||l.typing&&d[0]&&o()!=d[0].content},hasRedo:function(){return c<d.length-1&&!this.typing},transact:function(e){l.beforeChange();try{u++,e()}finally{u--}l.add()}}}}),/**
 * EnterKey.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/EnterKey",["tinymce/dom/TreeWalker","tinymce/dom/RangeUtils","tinymce/Env"],function(e,t,n){var i=n.ie&&n.ie<11;return function(o){function r(r){function f(e){return e&&a.isBlock(e)&&!/^(TD|TH|CAPTION|FORM)$/.test(e.nodeName)&&!/^(fixed|absolute)/i.test(e.style.position)&&"true"!==a.getContentEditable(e)}function h(e){var t;a.isBlock(e)&&(t=s.getRng(),e.appendChild(a.create("span",null,"\xa0")),s.select(e),e.lastChild.outerHTML="",s.setRng(t))}function m(e){var t,n=e,i=[];if(n){for(;n=n.firstChild;){if(a.isBlock(n))return;1!=n.nodeType||u[n.nodeName.toLowerCase()]||i.push(n)}for(t=i.length;t--;)n=i[t],!n.hasChildNodes()||n.firstChild==n.lastChild&&""===n.firstChild.nodeValue?a.remove(n):"A"==n.nodeName&&" "===(n.innerText||n.textContent)&&a.remove(n)}}function g(t){function i(e){for(;e;){if(1==e.nodeType||3==e.nodeType&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}}var o,r,l,c,d=t;if(t){if(n.ie&&n.ie<9&&w&&w.firstChild&&w.firstChild==w.lastChild&&"BR"==w.firstChild.tagName&&a.remove(w.firstChild),/^(LI|DT|DD)$/.test(t.nodeName)){var f=i(t.firstChild);f&&/^(UL|OL|DL)$/.test(f.nodeName)&&t.insertBefore(a.doc.createTextNode("\xa0"),t.firstChild)}if(l=a.createRng(),n.ie||t.normalize(),t.hasChildNodes()){for(o=new e(t,t);r=o.current();){if(3==r.nodeType){l.setStart(r,0),l.setEnd(r,0);break}if(u[r.nodeName.toLowerCase()]){l.setStartBefore(r),l.setEndBefore(r);break}d=r,r=o.next()}r||(l.setStart(d,0),l.setEnd(d,0))}else"BR"==t.nodeName?t.nextSibling&&a.isBlock(t.nextSibling)?((!S||9>S)&&(c=a.create("br"),t.parentNode.insertBefore(c,t)),l.setStartBefore(t),l.setEndBefore(t)):(l.setStartAfter(t),l.setEndAfter(t)):(l.setStart(t,0),l.setEnd(t,0));s.setRng(l),a.remove(c),s.scrollIntoView(t)}}function p(e){var t=l.forced_root_block;t&&t.toLowerCase()===e.tagName.toLowerCase()&&a.setAttribs(e,l.forced_root_block_attrs)}function E(e){var t,n,o,r=K,s=d.getTextInlineElements();if(e||"TABLE"==P?(t=a.create(e||M),p(t)):t=w.cloneNode(!1),o=t,l.keep_styles!==!1)do if(s[r.nodeName]){if("_mce_caret"==r.id)continue;n=r.cloneNode(!1),a.setAttrib(n,"id",""),t.hasChildNodes()?(n.appendChild(t.firstChild),t.appendChild(n)):(o=n,t.appendChild(n))}while(r=r.parentNode);return i||(o.innerHTML='<br data-mce-bogus="1">'),t}function v(t){var n,i,o;if(3==K.nodeType&&(t?x>0:x<K.nodeValue.length))return!1;if(K.parentNode==w&&$&&!t)return!0;if(t&&1==K.nodeType&&K==w.firstChild)return!0;if("TABLE"===K.nodeName||K.previousSibling&&"TABLE"==K.previousSibling.nodeName)return $&&!t||!$&&t;for(n=new e(K,w),3==K.nodeType&&(t&&0===x?n.prev():t||x!=K.nodeValue.length||n.next());i=n.current();){if(1===i.nodeType){if(!i.getAttribute("data-mce-bogus")&&(o=i.nodeName.toLowerCase(),u[o]&&"br"!==o))return!1}else if(3===i.nodeType&&!/^[ \t\r\n]*$/.test(i.nodeValue))return!1;t?n.prev():n.next()}return!0}function T(e,t){var n,i,r,s,l,c,u=M||"P";if(i=a.getParent(e,a.isBlock),c=o.getBody().nodeName.toLowerCase(),!i||!f(i)){if(i=i||k,!i.hasChildNodes())return n=a.create(u),p(n),i.appendChild(n),R.setStart(n,0),R.setEnd(n,0),n;for(s=e;s.parentNode!=i;)s=s.parentNode;for(;s&&!a.isBlock(s);)r=s,s=s.previousSibling;if(r&&d.isValidChild(c,u.toLowerCase())){for(n=a.create(u),p(n),r.parentNode.insertBefore(n,r),s=r;s&&!a.isBlock(s);)l=s.nextSibling,n.appendChild(s),s=l;R.setStart(e,t),R.setEnd(e,t)}}return e}function C(){function e(e){for(var t=B[e?"firstChild":"lastChild"];t&&1!=t.nodeType;)t=t[e?"nextSibling":"previousSibling"];return t===w}function t(){var e=B.parentNode;return/^(LI|DT|DD)$/.test(e.nodeName)?e:B}var n=B.parentNode.nodeName;/^(OL|UL|LI)$/.test(n)&&(M="LI"),A=M?E(M):a.create("BR"),e(!0)&&e()?"LI"==n?a.insertAfter(A,t()):a.replace(A,B):e(!0)?"LI"==n?(a.insertAfter(A,t()),A.appendChild(a.doc.createTextNode(" ")),A.appendChild(B)):B.parentNode.insertBefore(A,B):e()?(a.insertAfter(A,t()),h(A)):(B=t(),_=R.cloneRange(),_.setStartAfter(w),_.setEndAfter(B),L=_.extractContents(),"LI"==M&&"LI"==L.firstChild.nodeName?(A=L.firstChild,a.insertAfter(L,B)):(a.insertAfter(L,B),a.insertAfter(A,B))),a.remove(w),g(A),c.add()}function b(){for(var t,n=new e(K,w);t=n.next();)if(u[t.nodeName.toLowerCase()]||t.length>0)return!0}function y(){var e,t,n;K&&3==K.nodeType&&x>=K.nodeValue.length&&(i||b()||(e=a.create("br"),R.insertNode(e),R.setStartAfter(e),R.setEndAfter(e),t=!0)),e=a.create("br"),R.insertNode(e),i&&"PRE"==P&&(!S||8>S)&&e.parentNode.insertBefore(a.doc.createTextNode("\r"),e),n=a.create("span",{},"&nbsp;"),e.parentNode.insertBefore(n,e),s.scrollIntoView(n),a.remove(n),t?(R.setStartBefore(e),R.setEndBefore(e)):(R.setStartAfter(e),R.setEndAfter(e)),s.setRng(R),c.add()}function I(e){do 3===e.nodeType&&(e.nodeValue=e.nodeValue.replace(/^[\r\n]+/,"")),e=e.firstChild;while(e)}function O(e){var t,n,i=a.getRoot();for(t=e;t!==i&&"false"!==a.getContentEditable(t);)"true"===a.getContentEditable(t)&&(n=t),t=t.parentNode;return t!==i?n:i}function D(e){var t;i||(e.normalize(),t=e.lastChild,(!t||/^(left|right)$/gi.test(a.getStyle(t,"float",!0)))&&a.add(e,"br"))}var R,_,k,K,x,w,S,N,A,L,B,P,F,M,$;if(R=s.getRng(!0),!r.isDefaultPrevented()){if(!R.collapsed)return void o.execCommand("Delete");if(new t(a).normalize(R),K=R.startContainer,x=R.startOffset,M=(l.force_p_newlines?"p":"")||l.forced_root_block,M=M?M.toUpperCase():"",S=a.doc.documentMode,N=r.shiftKey,1==K.nodeType&&K.hasChildNodes()&&($=x>K.childNodes.length-1,K=K.childNodes[Math.min(x,K.childNodes.length-1)]||K,x=$&&3==K.nodeType?K.nodeValue.length:0),k=O(K)){if(c.beforeChange(),!a.isBlock(k)&&k!=a.getRoot())return void((!M||N)&&y());if((M&&!N||!M&&N)&&(K=T(K,x)),w=a.getParent(K,a.isBlock),B=w?a.getParent(w.parentNode,a.isBlock):null,P=w?w.nodeName.toUpperCase():"",F=B?B.nodeName.toUpperCase():"","LI"!=F||r.ctrlKey||(w=B,P=F),/^(LI|DT|DD)$/.test(P)){if(!M&&N)return void y();if(a.isEmpty(w))return void C()}if("PRE"==P&&l.br_in_pre!==!1){if(!N)return void y()}else if(!M&&!N&&"LI"!=P||M&&N)return void y();M&&w===o.getBody()||(M=M||"P",v()?(A=/^(H[1-6]|PRE|FIGURE)$/.test(P)&&"HGROUP"!=F?E(M):E(),l.end_container_on_empty_block&&f(B)&&a.isEmpty(w)?A=a.split(B,w):a.insertAfter(A,w),g(A)):v(!0)?(A=w.parentNode.insertBefore(E(),w),h(A),g(w)):(_=R.cloneRange(),_.setEndAfter(w),L=_.extractContents(),I(L),A=L.firstChild,a.insertAfter(L,w),m(A),D(w),g(A)),a.setAttrib(A,"id",""),o.fire("NewBlock",{newBlock:A}),c.add())}}}var a=o.dom,s=o.selection,l=o.settings,c=o.undoManager,d=o.schema,u=d.getNonEmptyElements();o.on("keydown",function(e){13==e.keyCode&&r(e)!==!1&&e.preventDefault()})}}),/**
 * ForceBlocks.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ForceBlocks",[],function(){return function(e){function t(){var t,s,l,c,d,u,f,h,m,g,p,E,v=o.getStart(),T=e.getBody(),C=-16777215;if(E=n.forced_root_block,v&&1===v.nodeType&&E){for(;v&&v!=T;){if(a[v.nodeName])return;v=v.parentNode}if(t=o.getRng(),t.setStart){s=t.startContainer,l=t.startOffset,c=t.endContainer,d=t.endOffset;try{m=e.getDoc().activeElement===T}catch(b){}}else t.item&&(v=t.item(0),t=e.getDoc().body.createTextRange(),t.moveToElementText(v)),m=t.parentElement().ownerDocument===e.getDoc(),g=t.duplicate(),g.collapse(!0),l=-1*g.move("character",C),g.collapsed||(g=t.duplicate(),g.collapse(!1),d=-1*g.move("character",C)-l);for(v=T.firstChild,p=T.nodeName.toLowerCase();v;)if((3===v.nodeType||1==v.nodeType&&!a[v.nodeName])&&r.isValidChild(p,E.toLowerCase())){if(3===v.nodeType&&0===v.nodeValue.length){f=v,v=v.nextSibling,i.remove(f);continue}u||(u=i.create(E,e.settings.forced_root_block_attrs),v.parentNode.insertBefore(u,v),h=!0),f=v,v=v.nextSibling,u.appendChild(f)}else u=null,v=v.nextSibling;if(h&&m){if(t.setStart)t.setStart(s,l),t.setEnd(c,d),o.setRng(t);else try{t=e.getDoc().body.createTextRange(),t.moveToElementText(T),t.collapse(!0),t.moveStart("character",l),d>0&&t.moveEnd("character",d),t.select()}catch(b){}e.nodeChanged()}}}var n=e.settings,i=e.dom,o=e.selection,r=e.schema,a=r.getBlockElements();n.forced_root_block&&e.on("NodeChange",t)}}),/**
 * EditorCommands.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/EditorCommands",["tinymce/html/Serializer","tinymce/Env","tinymce/util/Tools","tinymce/dom/ElementUtils"],function(e,n,i,o){var r=i.each,a=i.extend,s=i.map,l=i.inArray,c=i.explode,d=n.gecko,u=n.ie,f=!0,h=!1;return function(i){function m(e,t,n){var i;return e=e.toLowerCase(),(i=R.exec[e])?(i(e,t,n),f):h}function g(e){var t;return e=e.toLowerCase(),(t=R.state[e])?t(e):-1}function p(e){var t;return e=e.toLowerCase(),(t=R.value[e])?t(e):h}function E(e,t){t=t||"exec",r(e,function(e,n){r(n.toLowerCase().split(","),function(n){R[t][n]=e})})}function v(e,n,o){return n===t&&(n=h),o===t&&(o=null),i.getDoc().execCommand(e,n,o)}function T(e){return k.match(e)}function C(e,n){k.toggle(e,n?{value:n}:t),i.nodeChanged()}function b(e){I=D.getBookmark(e)}function y(){D.moveToBookmark(I)}var I,O=i.dom,D=i.selection,R={state:{},exec:{},value:{}},_=i.settings,k=i.formatter;a(this,{execCommand:m,queryCommandState:g,queryCommandValue:p,addCommands:E}),E({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){i.undoManager.add()},"Cut,Copy,Paste":function(e){var t,o=i.getDoc();try{v(e)}catch(r){t=f}if(t||!o.queryCommandSupported(e)){var a=i.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");n.mac&&(a=a.replace(/Ctrl\+/g,"\u2318+")),i.windowManager.alert(a)}},unlink:function(){if(D.isCollapsed()){var e=D.getNode();return void("A"==e.tagName&&i.dom.remove(e,!0))}k.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(e){var t=e.substring(7);"full"==t&&(t="justify"),r("left,center,right,justify".split(","),function(e){t!=e&&k.remove("align"+e)}),C("align"+t),m("mceRepaint")},"InsertUnorderedList,InsertOrderedList":function(e){var t,n;v(e),t=O.getParent(D.getNode(),"ol,ul"),t&&(n=t.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(n.nodeName)&&(b(),O.split(n,t),y()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){C(e)},"ForeColor,HiliteColor,FontName":function(e,t,n){C(e,n)},FontSize:function(e,t,n){var i,o;n>=1&&7>=n&&(o=c(_.font_size_style_values),i=c(_.font_size_classes),n=i?i[n-1]||n:o[n-1]||n),C(e,n)},RemoveFormat:function(e){k.remove(e)},mceBlockQuote:function(){C("blockquote")},FormatBlock:function(e,t,n){return C(n||"p")},mceCleanup:function(){var e=D.getBookmark();i.setContent(i.getContent({cleanup:f}),{cleanup:f}),D.moveToBookmark(e)},mceRemoveNode:function(e,t,n){var o=n||D.getNode();o!=i.getBody()&&(b(),i.dom.remove(o,f),y())},mceSelectNodeDepth:function(e,t,n){var o=0;O.getParent(D.getNode(),function(e){return 1==e.nodeType&&o++==n?(D.select(e),h):void 0},i.getBody())},mceSelectNode:function(e,t,n){D.select(n)},mceInsertContent:function(t,n,a){function s(e){function t(e){return i[e]&&3==i[e].nodeType}var n,i,o;return n=D.getRng(!0),i=n.startContainer,o=n.startOffset,3==i.nodeType&&(o>0?e=e.replace(/^&nbsp;/," "):t("previousSibling")||(e=e.replace(/^ /,"&nbsp;")),o<i.length?e=e.replace(/&nbsp;(<br>|)$/," "):t("nextSibling")||(e=e.replace(/(&nbsp;| )(<br>|)$/,"&nbsp;"))),e}function l(e){if(y)for(T=e.firstChild;T;T=T.walk(!0))I[T.name]&&T.attr("data-mce-new","true")}function c(){if(y){var e=i.getBody(),t=new o(O);r(O.select("*[data-mce-new]"),function(n){n.removeAttribute("data-mce-new");for(var i=n.parentNode;i&&i!=e;i=i.parentNode)t.compare(i,n)&&O.remove(n,!0)})}}var d,f,h,m,g,p,E,v,T,C,b,y,I=i.schema.getTextInlineElements();"string"!=typeof a&&(y=a.merge,a=a.content),/^ | $/.test(a)&&(a=s(a)),d=i.parser,f=new e({},i.schema),b='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;&#200B;</span>',p={content:a,format:"html",selection:!0},i.fire("BeforeSetContent",p),a=p.content,-1==a.indexOf("{$caret}")&&(a+="{$caret}"),a=a.replace(/\{\$caret\}/,b),v=D.getRng();var R=v.startContainer||(v.parentElement?v.parentElement():null),_=i.getBody();R===_&&D.isCollapsed()&&O.isBlock(_.firstChild)&&O.isEmpty(_.firstChild)&&(v=O.createRng(),v.setStart(_.firstChild,0),v.setEnd(_.firstChild,0),D.setRng(v)),D.isCollapsed()||i.getDoc().execCommand("Delete",!1,null),h=D.getNode();var k={context:h.nodeName.toLowerCase()};if(g=d.parse(a,k),l(g),T=g.lastChild,"mce_marker"==T.attr("id"))for(E=T,T=T.prev;T;T=T.walk(!0))if(3==T.type||!O.isBlock(T.name)){T.parent.insert(E,T,"br"===T.name);break}if(k.invalid){for(D.setContent(b),h=D.getNode(),m=i.getBody(),9==h.nodeType?h=T=m:T=h;T!==m;)h=T,T=T.parentNode;a=h==m?m.innerHTML:O.getOuterHTML(h),a=f.serialize(d.parse(a.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return f.serialize(g)}))),h==m?O.setHTML(m,a):O.setOuterHTML(h,a)}else a=f.serialize(g),T=h.firstChild,C=h.lastChild,!T||T===C&&"BR"===T.nodeName?O.setHTML(h,a):D.setContent(a);c(),E=O.get("mce_marker"),D.scrollIntoView(E),v=O.createRng(),T=E.previousSibling,T&&3==T.nodeType?(v.setStart(T,T.nodeValue.length),u||(C=E.nextSibling,C&&3==C.nodeType&&(T.appendData(C.data),C.parentNode.removeChild(C)))):(v.setStartBefore(E),v.setEndBefore(E)),O.remove(E),D.setRng(v),i.fire("SetContent",p),i.addVisual()},mceInsertRawHTML:function(e,t,n){D.setContent("tiny_mce_marker"),i.setContent(i.getContent().replace(/tiny_mce_marker/g,function(){return n}))},mceToggleFormat:function(e,t,n){C(n)},mceSetContent:function(e,t,n){i.setContent(n)},"Indent,Outdent":function(e){var t,n,o;t=_.indentation,n=/[a-z%]+$/i.exec(t),t=parseInt(t,10),g("InsertUnorderedList")||g("InsertOrderedList")?v(e):(_.forced_root_block||O.getParent(D.getNode(),O.isBlock)||k.apply("div"),r(D.getSelectedBlocks(),function(r){if("LI"!=r.nodeName){var a=i.getParam("indent_use_margin",!1)?"margin":"padding";a+="rtl"==O.getStyle(r,"direction",!0)?"Right":"Left","outdent"==e?(o=Math.max(0,parseInt(r.style[a]||0,10)-t),O.setStyle(r,a,o?o+n:"")):(o=parseInt(r.style[a]||0,10)+t+n,O.setStyle(r,a,o))}}))},mceRepaint:function(){if(d)try{b(f),D.getSel()&&D.getSel().selectAllChildren(i.getBody()),D.collapse(f),y()}catch(e){}},InsertHorizontalRule:function(){i.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){i.hasVisual=!i.hasVisual,i.addVisual()},mceReplaceContent:function(e,t,n){i.execCommand("mceInsertContent",!1,n.replace(/\{\$selection\}/g,D.getContent({format:"text"})))},mceInsertLink:function(e,t,n){var i;"string"==typeof n&&(n={href:n}),i=O.getParent(D.getNode(),"a"),n.href=n.href.replace(" ","%20"),i&&n.href||k.remove("link"),n.href&&k.apply("link",n,i)},selectAll:function(){var e,t=O.getRoot();D.getRng().setStart?(e=O.createRng(),e.setStart(t,0),e.setEnd(t,t.childNodes.length),D.setRng(e)):(e=D.getRng(),e.item||(e.moveToElementText(t),e.select()))},"delete":function(){v("Delete");var e=i.getBody();O.isEmpty(e)&&(i.setContent(""),e.firstChild&&O.isBlock(e.firstChild)?i.selection.setCursorLocation(e.firstChild,0):i.selection.setCursorLocation(e,0))},mceNewDocument:function(){i.setContent("")}}),E({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(e){var t="align"+e.substring(7),n=D.isCollapsed()?[O.getParent(D.getNode(),O.isBlock)]:D.getSelectedBlocks(),i=s(n,function(e){return!!k.matchNode(e,t)});return-1!==l(i,f)},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){return T(e)},mceBlockQuote:function(){return T("blockquote")},Outdent:function(){var e;if(_.inline_styles){if((e=O.getParent(D.getStart(),O.isBlock))&&parseInt(e.style.paddingLeft,10)>0)return f;if((e=O.getParent(D.getEnd(),O.isBlock))&&parseInt(e.style.paddingLeft,10)>0)return f}return g("InsertUnorderedList")||g("InsertOrderedList")||!_.inline_styles&&!!O.getParent(D.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(e){var t=O.getParent(D.getNode(),"ul,ol");return t&&("insertunorderedlist"===e&&"UL"===t.tagName||"insertorderedlist"===e&&"OL"===t.tagName)}},"state"),E({"FontSize,FontName":function(e){var t,n=0;return(t=O.getParent(D.getNode(),"span"))&&(n="fontsize"==e?t.style.fontSize:t.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase()),n}},"value"),E({Undo:function(){i.undoManager.undo()},Redo:function(){i.undoManager.redo()}})}}),/**
 * URI.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/util/URI",["tinymce/util/Tools"],function(e){function t(e,o){var r,a,s=this;if(e=i(e),o=s.settings=o||{},r=o.base_uri,/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e))return void(s.source=e);var l=0===e.indexOf("//");0!==e.indexOf("/")||l||(e=(r?r.protocol||"http":"http")+"://mce_host"+e),/^[\w\-]*:?\/\//.test(e)||(a=o.base_uri?o.base_uri.path:new t(location.href).directory,""===o.base_uri.protocol?e="//mce_host"+s.toAbsPath(a,e):(e=/([^#?]*)([#?]?.*)/.exec(e),e=(r&&r.protocol||"http")+"://mce_host"+s.toAbsPath(a,e[1])+e[2])),e=e.replace(/@@/g,"(mce_at)"),e=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e),n(["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],function(t,n){var i=e[n];i&&(i=i.replace(/\(mce_at\)/g,"@@")),s[t]=i}),r&&(s.protocol||(s.protocol=r.protocol),s.userInfo||(s.userInfo=r.userInfo),s.port||"mce_host"!==s.host||(s.port=r.port),s.host&&"mce_host"!==s.host||(s.host=r.host),s.source=""),l&&(s.protocol="")}var n=e.each,i=e.trim,o={ftp:21,http:80,https:443,mailto:25};return t.prototype={setPath:function(e){var t=this;e=/^(.*?)\/?(\w+)?$/.exec(e),t.path=e[0],t.directory=e[1],t.file=e[2],t.source="",t.getURI()},toRelative:function(e){var n,i=this;if("./"===e)return e;if(e=new t(e,{base_uri:i}),"mce_host"!=e.host&&i.host!=e.host&&e.host||i.port!=e.port||i.protocol!=e.protocol&&""!==e.protocol)return e.getURI();var o=i.getURI(),r=e.getURI();return o==r||"/"==o.charAt(o.length-1)&&o.substr(0,o.length-1)==r?o:(n=i.toRelPath(i.path,e.path),e.query&&(n+="?"+e.query),e.anchor&&(n+="#"+e.anchor),n)},toAbsolute:function(e,n){return e=new t(e,{base_uri:this}),e.getURI(n&&this.isSameOrigin(e))},isSameOrigin:function(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;var t=o[this.protocol];if(t&&(this.port||t)==(e.port||t))return!0}return!1},toRelPath:function(e,t){var n,i,o,r=0,a="";if(e=e.substring(0,e.lastIndexOf("/")),e=e.split("/"),n=t.split("/"),e.length>=n.length)for(i=0,o=e.length;o>i;i++)if(i>=n.length||e[i]!=n[i]){r=i+1;break}if(e.length<n.length)for(i=0,o=n.length;o>i;i++)if(i>=e.length||e[i]!=n[i]){r=i+1;break}if(1===r)return t;for(i=0,o=e.length-(r-1);o>i;i++)a+="../";for(i=r-1,o=n.length;o>i;i++)a+=i!=r-1?"/"+n[i]:n[i];return a},toAbsPath:function(e,t){var i,o,r,a=0,s=[];for(o=/\/$/.test(t)?"/":"",e=e.split("/"),t=t.split("/"),n(e,function(e){e&&s.push(e)}),e=s,i=t.length-1,s=[];i>=0;i--)0!==t[i].length&&"."!==t[i]&&(".."!==t[i]?a>0?a--:s.push(t[i]):a++);return i=e.length-a,r=0>=i?s.reverse().join("/"):e.slice(0,i).join("/")+"/"+s.reverse().join("/"),0!==r.indexOf("/")&&(r="/"+r),o&&r.lastIndexOf("/")!==r.length-1&&(r+=o),r},getURI:function(e){var t,n=this;return(!n.source||e)&&(t="",e||(t+=n.protocol?n.protocol+"://":"//",n.userInfo&&(t+=n.userInfo+"@"),n.host&&(t+=n.host),n.port&&(t+=":"+n.port)),n.path&&(t+=n.path),n.query&&(t+="?"+n.query),n.anchor&&(t+="#"+n.anchor),n.source=t),n.source}},t}),/**
 * Class.js
 *
 * Copyright 2003-2012, Moxiecode Systems AB, All rights reserved.
 */
i("tinymce/util/Class",["tinymce/util/Tools"],function(e){function t(){}var n,i,o=e.each,r=e.extend;return t.extend=n=function(e){function t(){var e,t,n,o=this;if(!i&&(o.init&&o.init.apply(o,arguments),t=o.Mixins))for(e=t.length;e--;)n=t[e],n.init&&n.init.apply(o,arguments)}function a(){return this}function s(e,t){return function(){var n,i=this,o=i._super;return i._super=f[e],n=t.apply(i,arguments),i._super=o,n}}var l,c,d,u=this,f=u.prototype;i=!0,l=new u,i=!1,e.Mixins&&(o(e.Mixins,function(t){t=t;for(var n in t)"init"!==n&&(e[n]=t[n])}),f.Mixins&&(e.Mixins=f.Mixins.concat(e.Mixins))),e.Methods&&o(e.Methods.split(","),function(t){e[t]=a}),e.Properties&&o(e.Properties.split(","),function(t){var n="_"+t;e[t]=function(e){var t,i=this;return e!==t?(i[n]=e,i):i[n]}}),e.Statics&&o(e.Statics,function(e,n){t[n]=e}),e.Defaults&&f.Defaults&&(e.Defaults=r({},f.Defaults,e.Defaults));for(c in e)d=e[c],"function"==typeof d&&f[c]?l[c]=s(c,d):l[c]=d;return t.prototype=l,t.constructor=t,t.extend=n,t},t}),/**
 * EventDispatcher.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/util/EventDispatcher",["tinymce/util/Tools"],function(e){function t(e){function t(){return!1}function n(){return!0}function i(i,o){var r,a,l,c;if(i=i.toLowerCase(),o=o||{},o.type=i,o.target||(o.target=s),o.preventDefault||(o.preventDefault=function(){o.isDefaultPrevented=n},o.stopPropagation=function(){o.isPropagationStopped=n},o.stopImmediatePropagation=function(){o.isImmediatePropagationStopped=n},o.isDefaultPrevented=t,o.isPropagationStopped=t,o.isImmediatePropagationStopped=t),e.beforeFire&&e.beforeFire(o),r=d[i])for(a=0,l=r.length;l>a;a++){if(r[a]=c=r[a],o.isImmediatePropagationStopped())return o.stopPropagation(),o;if(c.call(s,o)===!1)return o.preventDefault(),o}return o}function o(e,n,i){var o,r,a;if(n===!1&&(n=t),n)for(r=e.toLowerCase().split(" "),a=r.length;a--;)e=r[a],o=d[e],o||(o=d[e]=[],l(e,!0)),i?o.unshift(n):o.push(n);return c}function r(e,t){var n,i,o,r,a;if(e)for(r=e.toLowerCase().split(" "),n=r.length;n--;){if(e=r[n],i=d[e],!e){for(o in d)l(o,!1),delete d[o];return c}if(i){if(t)for(a=i.length;a--;)i[a]===t&&i.splice(a,1);else i.length=0;i.length||(l(e,!1),delete d[e])}}else{for(e in d)l(e,!1);d={}}return c}function a(e){return e=e.toLowerCase(),!(!d[e]||0===d[e].length)}var s,l,c=this,d={};e=e||{},s=e.scope||c,l=e.toggleEvent||t,c.fire=i,c.on=o,c.off=r,c.has=a}var n=e.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate"," ");return t.isNative=function(e){return!!n[e.toLowerCase()]},t}),/**
 * Selector.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/Selector",["tinymce/util/Class"],function(e){function t(e){for(var t,n=[],i=e.length;i--;)t=e[i],t.__checked||(n.push(t),t.__checked=1);for(i=n.length;i--;)delete n[i].__checked;return n}var n,i=/^([\w\\*]+)?(?:#([\w\\]+))?(?:\.([\w\\\.]+))?(?:\[\@?([\w\\]+)([\^\$\*!~]?=)([\w\\]+)\])?(?:\:(.+))?/i,o=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,r=/^\s*|\s*$/g,a=e.extend({init:function(e){function t(e){return e?(e=e.toLowerCase(),function(t){return"*"===e||t.type===e}):void 0}function n(e){return e?function(t){return t._name===e}:void 0}function a(e){return e?(e=e.split("."),function(t){for(var n=e.length;n--;)if(!t.hasClass(e[n]))return!1;return!0}):void 0}function s(e,t,n){return e?function(i){var o=i[e]?i[e]():"";return t?"="===t?o===n:"*="===t?o.indexOf(n)>=0:"~="===t?(" "+o+" ").indexOf(" "+n+" ")>=0:"!="===t?o!=n:"^="===t?0===o.indexOf(n):"$="===t?o.substr(o.length-n.length)===n:!1:!!n}:void 0}function l(e){var t;return e?(e=/(?:not\((.+)\))|(.+)/i.exec(e),e[1]?(t=d(e[1],[]),function(e){return!u(e,t)}):(e=e[2],function(t,n,i){return"first"===e?0===n:"last"===e?n===i-1:"even"===e?n%2===0:"odd"===e?n%2===1:t[e]?t[e]():!1})):void 0}function c(e,o,c){function d(e){e&&o.push(e)}var u;return u=i.exec(e.replace(r,"")),d(t(u[1])),d(n(u[2])),d(a(u[3])),d(s(u[4],u[5],u[6])),d(l(u[7])),o.psuedo=!!u[7],o.direct=c,o}function d(e,t){var n,i,r,a=[];do if(o.exec(""),i=o.exec(e),i&&(e=i[3],a.push(i[1]),i[2])){n=i[3];break}while(i);for(n&&d(n,t),e=[],r=0;r<a.length;r++)">"!=a[r]&&e.push(c(a[r],[],">"===a[r-1]));return t.push(e),t}var u=this.match;this._selectors=d(e,[])},match:function(e,t){var n,i,o,r,a,s,l,c,d,u,f,h,m;for(t=t||this._selectors,n=0,i=t.length;i>n;n++){for(a=t[n],r=a.length,m=e,h=0,o=r-1;o>=0;o--)for(c=a[o];m;){if(c.psuedo)for(f=m.parent().items(),d=u=f.length;d--&&f[d]!==m;);for(s=0,l=c.length;l>s;s++)if(!c[s](m,d,u)){s=l+1;break}if(s===l){h++;break}if(o===r-1)break;m=m.parent()}if(h===r)return!0}return!1},find:function(e){function i(e,t,n){var o,r,a,l,c,d=t[n];for(o=0,r=e.length;r>o;o++){for(c=e[o],a=0,l=d.length;l>a;a++)if(!d[a](c,o,r)){a=l+1;break}if(a===l)n==t.length-1?s.push(c):c.items&&i(c.items(),t,n+1);else if(d.direct)return;c.items&&i(c.items(),t,n)}}var o,r,s=[],l=this._selectors;if(e.items){for(o=0,r=l.length;r>o;o++)i(e.items(),l[o],0);r>1&&(s=t(s))}return n||(n=a.Collection),new n(s)}});return a}),/**
 * Collection.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/Collection",["tinymce/util/Tools","tinymce/ui/Selector","tinymce/util/Class"],function(e,t,n){var i,o,r=Array.prototype.push,a=Array.prototype.slice;return o={length:0,init:function(e){e&&this.add(e)},add:function(t){var n=this;return e.isArray(t)?r.apply(n,t):t instanceof i?n.add(t.toArray()):r.call(n,t),n},set:function(e){var t,n=this,i=n.length;for(n.length=0,n.add(e),t=n.length;i>t;t++)delete n[t];return n},filter:function(e){var n,o,r,a,s=this,l=[];for("string"==typeof e?(e=new t(e),a=function(t){return e.match(t)}):a=e,n=0,o=s.length;o>n;n++)r=s[n],a(r)&&l.push(r);return new i(l)},slice:function(){return new i(a.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},each:function(t){return e.each(this,t),this},toArray:function(){return e.toArray(this)},indexOf:function(e){for(var t=this,n=t.length;n--&&t[n]!==e;);return n},reverse:function(){return new i(e.toArray(this).reverse())},hasClass:function(e){return this[0]?this[0].hasClass(e):!1},prop:function(e,t){var n,i,o=this;return t!==n?(o.each(function(n){n[e]&&n[e](t)}),o):(i=o[0],i&&i[e]?i[e]():void 0)},exec:function(t){var n=this,i=e.toArray(arguments).slice(1);return n.each(function(e){e[t]&&e[t].apply(e,i)}),n},remove:function(){for(var e=this.length;e--;)this[e].remove();return this}},e.each("fire on off show hide addClass removeClass append prepend before after reflow".split(" "),function(t){o[t]=function(){var n=e.toArray(arguments);return this.each(function(e){t in e&&e[t].apply(e,n)}),this}}),e.each("text name disabled active selected checked visible parent value data".split(" "),function(e){o[e]=function(t){return this.prop(e,t)}}),i=n.extend(o),t.Collection=i,i}),/**
 * DOMUtils.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/DomUtils",["tinymce/util/Tools","tinymce/dom/DOMUtils"],function(e,t){var n=0;return{id:function(){return"mceu_"+n++},createFragment:function(e){return t.DOM.createFragment(e)},getWindowSize:function(){return t.DOM.getViewPort()},getSize:function(e){var t,n;if(e.getBoundingClientRect){var i=e.getBoundingClientRect();t=Math.max(i.width||i.right-i.left,e.offsetWidth),n=Math.max(i.height||i.bottom-i.bottom,e.offsetHeight)}else t=e.offsetWidth,n=e.offsetHeight;return{width:t,height:n}},getPos:function(e,n){return t.DOM.getPos(e,n)},getViewPort:function(e){return t.DOM.getViewPort(e)},get:function(e){return document.getElementById(e)},addClass:function(e,n){return t.DOM.addClass(e,n)},removeClass:function(e,n){return t.DOM.removeClass(e,n)},hasClass:function(e,n){return t.DOM.hasClass(e,n)},toggleClass:function(e,n,i){return t.DOM.toggleClass(e,n,i)},css:function(e,n,i){return t.DOM.setStyle(e,n,i)},on:function(e,n,i,o){return t.DOM.bind(e,n,i,o)},off:function(e,n,i){return t.DOM.unbind(e,n,i)},fire:function(e,n,i){return t.DOM.fire(e,n,i)},innerHtml:function(e,n){t.DOM.setHTML(e,n)}}}),/**
 * Control.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/Control",["tinymce/util/Class","tinymce/util/Tools","tinymce/util/EventDispatcher","tinymce/ui/Collection","tinymce/ui/DomUtils"],function(e,t,n,i,o){function r(e){return e._eventDispatcher||(e._eventDispatcher=new n({scope:e,toggleEvent:function(t,i){i&&n.isNative(t)&&(e._nativeEvents||(e._nativeEvents={}),e._nativeEvents[t]=!0,e._rendered&&e.bindPendingEvents())}})),e._eventDispatcher}var a={},s="onmousewheel"in document,l=!1,c="mce-",d=e.extend({Statics:{elementIdCache:a,classPrefix:c},isRtl:function(){return d.rtl},classPrefix:c,init:function(e){var n,i,r=this;if(r.settings=e=t.extend({},r.Defaults,e),r._id=e.id||o.id(),r._text=r._name="",r._width=r._height=0,r._aria={role:e.role},n=e.classes)for(n=n.split(" "),n.map={},i=n.length;i--;)n.map[n[i]]=!0;r._classes=n||[],r.visible(!0),t.each("title text width height name classes visible disabled active value".split(" "),function(t){var n,i=e[t];i!==n?r[t](i):r["_"+t]===n&&(r["_"+t]=!1)}),r.on("click",function(){return r.disabled()?!1:void 0}),e.classes&&t.each(e.classes.split(" "),function(e){r.addClass(e)}),r.settings=e,r._borderBox=r.parseBox(e.border),r._paddingBox=r.parseBox(e.padding),r._marginBox=r.parseBox(e.margin),e.hidden&&r.hide()},Properties:"parent,title,text,width,height,disabled,active,name,value",Methods:"renderHtml",getContainerElm:function(){return document.body},getParentCtrl:function(e){for(var t,n=this.getRoot().controlIdLookup;e&&n&&!(t=n[e.id]);)e=e.parentNode;return t},parseBox:function(e){var t,n=10;if(e)return"number"==typeof e?(e=e||0,{top:e,left:e,bottom:e,right:e}):(e=e.split(" "),t=e.length,1===t?e[1]=e[2]=e[3]=e[0]:2===t?(e[2]=e[0],e[3]=e[1]):3===t&&(e[3]=e[1]),{top:parseInt(e[0],n)||0,right:parseInt(e[1],n)||0,bottom:parseInt(e[2],n)||0,left:parseInt(e[3],n)||0})},borderBox:function(){return this._borderBox},paddingBox:function(){return this._paddingBox},marginBox:function(){return this._marginBox},measureBox:function(e,t){function n(t){var n=document.defaultView;return n?(t=t.replace(/[A-Z]/g,function(e){return"-"+e}),n.getComputedStyle(e,null).getPropertyValue(t)):e.currentStyle[t]}function i(e){var t=parseFloat(n(e),10);return isNaN(t)?0:t}return{top:i(t+"TopWidth"),right:i(t+"RightWidth"),bottom:i(t+"BottomWidth"),left:i(t+"LeftWidth")}},initLayoutRect:function(){var e,t,n,i,r,a,s,l,c,d,u=this,f=u.settings,h=u.getEl();e=u._borderBox=u._borderBox||u.measureBox(h,"border"),u._paddingBox=u._paddingBox||u.measureBox(h,"padding"),u._marginBox=u._marginBox||u.measureBox(h,"margin"),d=o.getSize(h),l=f.minWidth,c=f.minHeight,r=l||d.width,a=c||d.height,n=f.width,i=f.height,s=f.autoResize,s="undefined"!=typeof s?s:!n&&!i,n=n||r,i=i||a;var m=e.left+e.right,g=e.top+e.bottom,p=f.maxWidth||65535,E=f.maxHeight||65535;return u._layoutRect=t={x:f.x||0,y:f.y||0,w:n,h:i,deltaW:m,deltaH:g,contentW:n-m,contentH:i-g,innerW:n-m,innerH:i-g,startMinWidth:l||0,startMinHeight:c||0,minW:Math.min(r,p),minH:Math.min(a,E),maxW:p,maxH:E,autoResize:s,scrollW:0},u._lastLayoutRect={},t},layoutRect:function(e){var t,n,i,o,r,a,s=this,l=s._layoutRect;return l||(l=s.initLayoutRect()),e?(i=l.deltaW,o=l.deltaH,e.x!==r&&(l.x=e.x),e.y!==r&&(l.y=e.y),e.minW!==r&&(l.minW=e.minW),e.minH!==r&&(l.minH=e.minH),n=e.w,n!==r&&(n=n<l.minW?l.minW:n,n=n>l.maxW?l.maxW:n,l.w=n,l.innerW=n-i),n=e.h,n!==r&&(n=n<l.minH?l.minH:n,n=n>l.maxH?l.maxH:n,l.h=n,l.innerH=n-o),n=e.innerW,n!==r&&(n=n<l.minW-i?l.minW-i:n,n=n>l.maxW-i?l.maxW-i:n,l.innerW=n,l.w=n+i),n=e.innerH,n!==r&&(n=n<l.minH-o?l.minH-o:n,n=n>l.maxH-o?l.maxH-o:n,l.innerH=n,l.h=n+o),e.contentW!==r&&(l.contentW=e.contentW),e.contentH!==r&&(l.contentH=e.contentH),t=s._lastLayoutRect,(t.x!==l.x||t.y!==l.y||t.w!==l.w||t.h!==l.h)&&(a=d.repaintControls,a&&a.map&&!a.map[s._id]&&(a.push(s),a.map[s._id]=!0),t.x=l.x,t.y=l.y,t.w=l.w,t.h=l.h),s):l},repaint:function(){var e,t,n,i,o,r,a=this,s=0,l=0;r=document.createRange?function(e){return e}:Math.round,e=a.getEl().style,n=a._layoutRect,o=a._lastRepaintRect||{},i=a._borderBox,s=i.left+i.right,l=i.top+i.bottom,n.x!==o.x&&(e.left=r(n.x)+"px",o.x=n.x),n.y!==o.y&&(e.top=r(n.y)+"px",o.y=n.y),n.w!==o.w&&(e.width=r(n.w-s)+"px",o.w=n.w),n.h!==o.h&&(e.height=r(n.h-l)+"px",o.h=n.h),a._hasBody&&n.innerW!==o.innerW&&(t=a.getEl("body").style,t.width=r(n.innerW)+"px",o.innerW=n.innerW),a._hasBody&&n.innerH!==o.innerH&&(t=t||a.getEl("body").style,t.height=r(n.innerH)+"px",o.innerH=n.innerH),a._lastRepaintRect=o,a.fire("repaint",{},!1)},on:function(e,t){function n(e){var t,n;return"string"!=typeof e?e:function(o){return t||i.parentsAndSelf().each(function(i){var o=i.settings.callbacks;return o&&(t=o[e])?(n=i,!1):void 0}),t.call(n,o)}}var i=this;return r(i).on(e,n(t)),i},off:function(e,t){return r(this).off(e,t),this},fire:function(e,t,n){var i=this;if(t=t||{},t.control||(t.control=i),t=r(i).fire(e,t),n!==!1&&i.parent)for(var o=i.parent();o&&!t.isPropagationStopped();)o.fire(e,t,!1),o=o.parent();return t},hasEventListeners:function(e){return r(this).has(e)},parents:function(e){var t,n=this,o=new i;for(t=n.parent();t;t=t.parent())o.add(t);return e&&(o=o.filter(e)),o},parentsAndSelf:function(e){return new i(this).add(this.parents(e))},next:function(){var e=this.parent().items();return e[e.indexOf(this)+1]},prev:function(){var e=this.parent().items();return e[e.indexOf(this)-1]},findCommonAncestor:function(e,t){for(var n;e;){for(n=t;n&&e!=n;)n=n.parent();if(e==n)break;e=e.parent()}return e},hasClass:function(e,t){var n=this._classes[t||"control"];return e=this.classPrefix+e,n&&!!n.map[e]},addClass:function(e,t){var n,i,o=this;return e=this.classPrefix+e,n=o._classes[t||"control"],n||(n=[],n.map={},o._classes[t||"control"]=n),n.map[e]||(n.map[e]=e,n.push(e),o._rendered&&(i=o.getEl(t),i&&(i.className=n.join(" ")))),o},removeClass:function(e,t){var n,i,o,r=this;if(e=this.classPrefix+e,n=r._classes[t||"control"],n&&n.map[e])for(delete n.map[e],i=n.length;i--;)n[i]===e&&n.splice(i,1);return r._rendered&&(o=r.getEl(t),o&&(o.className=n.join(" "))),r},toggleClass:function(e,t,n){var i=this;return t?i.addClass(e,n):i.removeClass(e,n),i},classes:function(e){var t=this._classes[e||"control"];return t?t.join(" "):""},innerHtml:function(e){return o.innerHtml(this.getEl(),e),this},getEl:function(e,t){var n,i=e?this._id+"-"+e:this._id;return n=a[i]=(t===!0?null:a[i])||o.get(i)},visible:function(e){var t,n=this;return"undefined"!=typeof e?(n._visible!==e&&(n._rendered&&(n.getEl().style.display=e?"":"none"),n._visible=e,t=n.parent(),t&&(t._lastRect=null),n.fire(e?"show":"hide")),n):n._visible},show:function(){return this.visible(!0)},hide:function(){return this.visible(!1)},focus:function(){try{this.getEl().focus()}catch(e){}return this},blur:function(){return this.getEl().blur(),this},aria:function(e,t){var n=this,i=n.getEl(n.ariaTarget);return"undefined"==typeof t?n._aria[e]:(n._aria[e]=t,n._rendered&&i.setAttribute("role"==e?e:"aria-"+e,t),n)},encode:function(e,t){return t!==!1&&(e=this.translate(e)),(e||"").replace(/[&<>"]/g,function(e){return"&#"+e.charCodeAt(0)+";"})},translate:function(e){return d.translate?d.translate(e):e},before:function(e){var t=this,n=t.parent();return n&&n.insert(e,n.items().indexOf(t),!0),t},after:function(e){var t=this,n=t.parent();return n&&n.insert(e,n.items().indexOf(t)),t},remove:function(){var e,t,n=this,i=n.getEl(),r=n.parent();if(n.items){var s=n.items().toArray();for(t=s.length;t--;)s[t].remove()}r&&r.items&&(e=[],r.items().each(function(t){t!==n&&e.push(t)}),r.items().set(e),r._lastRect=null),n._eventsRoot&&n._eventsRoot==n&&o.off(i);var l=n.getRoot().controlIdLookup;if(l&&delete l[n._id],delete a[n._id],i&&i.parentNode){var c=i.getElementsByTagName("*");for(t=c.length;t--;)delete a[c[t].id];i.parentNode.removeChild(i)}return n._rendered=!1,n},renderBefore:function(e){var t=this;return e.parentNode.insertBefore(o.createFragment(t.renderHtml()),e),t.postRender(),t},renderTo:function(e){var t=this;return e=e||t.getContainerElm(),e.appendChild(o.createFragment(t.renderHtml())),t.postRender(),t},postRender:function(){var e,t,n,i,r,a=this,s=a.settings;for(i in s)0===i.indexOf("on")&&a.on(i.substr(2),s[i]);if(a._eventsRoot){for(n=a.parent();!r&&n;n=n.parent())r=n._eventsRoot;if(r)for(i in r._nativeEvents)a._nativeEvents[i]=!0}a.bindPendingEvents(),s.style&&(e=a.getEl(),e&&(e.setAttribute("style",s.style),e.style.cssText=s.style)),a._visible||o.css(a.getEl(),"display","none"),a.settings.border&&(t=a.borderBox(),o.css(a.getEl(),{"border-top-width":t.top,"border-right-width":t.right,"border-bottom-width":t.bottom,"border-left-width":t.left}));var l=a.getRoot();l.controlIdLookup||(l.controlIdLookup={}),l.controlIdLookup[a._id]=a;for(var c in a._aria)a.aria(c,a._aria[c]);a.fire("postrender",{},!1)},scrollIntoView:function(e){function t(e,t){var n,i,o=e;for(n=i=0;o&&o!=t&&o.nodeType;)n+=o.offsetLeft||0,i+=o.offsetTop||0,o=o.offsetParent;return{x:n,y:i}}var n,i,o,r,a,s,l=this.getEl(),c=l.parentNode,d=t(l,c);return n=d.x,i=d.y,o=l.offsetWidth,r=l.offsetHeight,a=c.clientWidth,s=c.clientHeight,"end"==e?(n-=a-o,i-=s-r):"center"==e&&(n-=a/2-o/2,i-=s/2-r/2),c.scrollLeft=n,c.scrollTop=i,this},bindPendingEvents:function(){function e(e){var t=h.getParentCtrl(e.target);t&&t.fire(e.type,e)}function t(){var e=d._lastHoverCtrl;e&&(e.fire("mouseleave",{target:e.getEl()}),e.parents().each(function(e){e.fire("mouseleave",{target:e.getEl()})}),d._lastHoverCtrl=null)}function n(e){var t,n,i,o=h.getParentCtrl(e.target),r=d._lastHoverCtrl,a=0;if(o!==r){if(d._lastHoverCtrl=o,n=o.parents().toArray().reverse(),n.push(o),r){for(i=r.parents().toArray().reverse(),i.push(r),a=0;a<i.length&&n[a]===i[a];a++);for(t=i.length-1;t>=a;t--)r=i[t],r.fire("mouseleave",{target:r.getEl()})}for(t=a;t<n.length;t++)o=n[t],o.fire("mouseenter",{target:o.getEl()})}}function i(e){e.preventDefault(),"mousewheel"==e.type?(e.deltaY=-1/40*e.wheelDelta,e.wheelDeltaX&&(e.deltaX=-1/40*e.wheelDeltaX)):(e.deltaX=0,e.deltaY=e.detail),e=h.fire("wheel",e)}var r,a,c,d,u,f,h=this;if(h._rendered=!0,u=h._nativeEvents){for(c=h.parents().toArray(),c.unshift(h),r=0,a=c.length;!d&&a>r;r++)d=c[r]._eventsRoot;for(d||(d=c[c.length-1]||h),h._eventsRoot=d,a=r,r=0;a>r;r++)c[r]._eventsRoot=d;var m=d._delegates;m||(m=d._delegates={});for(f in u){if(!u)return!1;"wheel"!==f||l?("mouseenter"===f||"mouseleave"===f?d._hasMouseEnter||(o.on(d.getEl(),"mouseleave",t),o.on(d.getEl(),"mouseover",n),d._hasMouseEnter=1):m[f]||(o.on(d.getEl(),f,e),m[f]=!0),u[f]=!1):s?o.on(h.getEl(),"mousewheel",i):o.on(h.getEl(),"DOMMouseScroll",i)}}},getRoot:function(){for(var e,t=this,n=[];t;){if(t.rootControl){e=t.rootControl;break}n.push(t),e=t,t=t.parent()}e||(e=this);for(var i=n.length;i--;)n[i].rootControl=e;return e},reflow:function(){return this.repaint(),this}});return d}),/**
 * Factory.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/Factory",[],function(){var e,t={};return{add:function(e,n){t[e.toLowerCase()]=n},has:function(e){return!!t[e.toLowerCase()]},create:function(n,i){var o,r,a;if(!e){a=tinymce.ui;for(r in a)t[r.toLowerCase()]=a[r];e=!0}if("string"==typeof n?(i=i||{},i.type=n):(i=n,n=i.type),n=n.toLowerCase(),o=t[n],!o)throw new Error("Could not find control by type: "+n);return o=new o(i),o.type=n,o}}}),/**
 * KeyboardNavigation.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/KeyboardNavigation",[],function(){return function(e){function t(e){return e=e||v,e&&e.getAttribute("role")}function n(e){for(var n,i=e||v;i=i.parentNode;)if(n=t(i))return n}function i(e){var t=v;return t?t.getAttribute("aria-"+e):void 0}function o(e){var t=e.tagName.toUpperCase();return"INPUT"==t||"TEXTAREA"==t}function r(e){return o(e)&&!e.hidden?!0:/^(button|menuitem|checkbox|tab|menuitemcheckbox|option|gridcell)$/.test(t(e))?!0:!1}function a(e){function t(e){if(1==e.nodeType&&"none"!=e.style.display){r(e)&&n.push(e);for(var i=0;i<e.childNodes.length;i++)t(e.childNodes[i])}}var n=[];return t(e||C.getEl()),n}function s(e){var t,n;e=e||T,n=e.parents().toArray(),n.unshift(e);for(var i=0;i<n.length&&(t=n[i],!t.settings.ariaRoot);i++);return t}function l(e){var t=s(e),n=a(t.getEl());t.settings.ariaRemember&&"lastAriaIndex"in t?c(t.lastAriaIndex,n):c(0,n)}function c(e,t){return 0>e?e=t.length-1:e>=t.length&&(e=0),t[e]&&t[e].focus(),e}function d(e,t){var n=-1,i=s();t=t||a(i.getEl());for(var o=0;o<t.length;o++)t[o]===v&&(n=o);n+=e,i.lastAriaIndex=c(n,t)}function u(){var e=n();"tablist"==e?d(-1,a(v.parentNode)):T.parent().submenu?p():d(-1)}function f(){var e=t(),o=n();"tablist"==o?d(1,a(v.parentNode)):"menuitem"==e&&"menu"==o&&i("haspopup")?E():d(1)}function h(){d(-1)}function m(){var e=t(),o=n();"menuitem"==e&&"menubar"==o?E():"button"==e&&i("haspopup")?E({key:"down"}):d(1)}function g(e){var t=n();if("tablist"==t){var i=a(T.getEl("body"))[0];i&&i.focus()}else d(e.shiftKey?-1:1)}function p(){T.fire("cancel")}function E(e){e=e||{},T.fire("click",{target:v,aria:e})}var v,T,C=e.root;return v=document.activeElement,T=C.getParentCtrl(v),C.on("keydown",function(e){function t(e,t){o(v)||t(e)!==!1&&e.preventDefault()}if(!e.isDefaultPrevented())switch(e.keyCode){case 37:t(e,u);break;case 39:t(e,f);break;case 38:t(e,h);break;case 40:t(e,m);break;case 27:p();break;case 14:case 13:case 32:t(e,E);break;case 9:g(e)!==!1&&e.preventDefault()}}),C.on("focusin",function(e){v=e.target,T=e.control}),{focusFirst:l}}}),/**
 * Container.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/Container",["tinymce/ui/Control","tinymce/ui/Collection","tinymce/ui/Selector","tinymce/ui/Factory","tinymce/ui/KeyboardNavigation","tinymce/util/Tools","tinymce/ui/DomUtils"],function(e,t,n,i,o,r,a){var s={};return e.extend({layout:"",innerClass:"container-inner",init:function(e){var n=this;n._super(e),e=n.settings,n._fixed=e.fixed,n._items=new t,n.isRtl()&&n.addClass("rtl"),n.addClass("container"),n.addClass("container-body","body"),e.containerCls&&n.addClass(e.containerCls),n._layout=i.create((e.layout||n.layout)+"layout"),n.settings.items&&n.add(n.settings.items),n._hasBody=!0},items:function(){return this._items},find:function(e){return e=s[e]=s[e]||new n(e),e.find(this)},add:function(e){var t=this;return t.items().add(t.create(e)).parent(t),t},focus:function(e){var t,n,i,o=this;return e&&(n=o.keyboardNav||o.parents().eq(-1)[0].keyboardNav)?void n.focusFirst(o):(i=o.find("*"),o.statusbar&&i.add(o.statusbar.items()),i.each(function(e){return e.settings.autofocus?(t=null,!1):void(e.canFocus&&(t=t||e))}),t&&t.focus(),o)},replace:function(e,t){for(var n,i=this.items(),o=i.length;o--;)if(i[o]===e){i[o]=t;break}o>=0&&(n=t.getEl(),n&&n.parentNode.removeChild(n),n=e.getEl(),n&&n.parentNode.removeChild(n)),t.parent(this)},create:function(t){var n,o=this,a=[];return r.isArray(t)||(t=[t]),r.each(t,function(t){t&&(t instanceof e||("string"==typeof t&&(t={type:t}),n=r.extend({},o.settings.defaults,t),t.type=n.type=n.type||t.type||o.settings.defaultType||(n.defaults?n.defaults.type:null),t=i.create(n)),a.push(t))}),a},renderNew:function(){var e=this;return e.items().each(function(t,n){var i,o;t.parent(e),t._rendered||(i=e.getEl("body"),o=a.createFragment(t.renderHtml()),i.hasChildNodes()&&n<=i.childNodes.length-1?i.insertBefore(o,i.childNodes[n]):i.appendChild(o),t.postRender())}),e._layout.applyClasses(e),e._lastRect=null,e},append:function(e){return this.add(e).renderNew()},prepend:function(e){var t=this;return t.items().set(t.create(e).concat(t.items().toArray())),t.renderNew()},insert:function(e,t,n){var i,o,r,a=this;return e=a.create(e),i=a.items(),!n&&t<i.length-1&&(t+=1),t>=0&&t<i.length&&(o=i.slice(0,t).toArray(),r=i.slice(t).toArray(),i.set(o.concat(e,r))),a.renderNew()},fromJSON:function(e){var t=this;for(var n in e)t.find("#"+n).value(e[n]);return t},toJSON:function(){var e=this,t={};return e.find("*").each(function(e){var n=e.name(),i=e.value();n&&"undefined"!=typeof i&&(t[n]=i)}),t},preRender:function(){},renderHtml:function(){var e=this,t=e._layout,n=this.settings.role;return e.preRender(),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes()+'"'+(n?' role="'+this.settings.role+'"':"")+'><div id="'+e._id+'-body" class="'+e.classes("body")+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"},postRender:function(){var e,t=this;return t.items().exec("postRender"),t._super(),t._layout.postRender(t),t._rendered=!0,t.settings.style&&a.css(t.getEl(),t.settings.style),t.settings.border&&(e=t.borderBox(),a.css(t.getEl(),{"border-top-width":e.top,"border-right-width":e.right,"border-bottom-width":e.bottom,"border-left-width":e.left})),t.parent()||(t.keyboardNav=new o({root:t})),t},initLayoutRect:function(){var e=this,t=e._super();return e._layout.recalc(e),t},recalc:function(){var e=this,t=e._layoutRect,n=e._lastRect;return n&&n.w==t.w&&n.h==t.h?void 0:(e._layout.recalc(e),t=e.layoutRect(),e._lastRect={x:t.x,y:t.y,w:t.w,h:t.h},!0)},reflow:function(){var t;if(this.visible()){for(e.repaintControls=[],e.repaintControls.map={},this.recalc(),t=e.repaintControls.length;t--;)e.repaintControls[t].repaint();"flow"!==this.settings.layout&&"stack"!==this.settings.layout&&this.repaint(),e.repaintControls=[]}return this}})}),/**
 * DragHelper.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/DragHelper",["tinymce/ui/DomUtils"],function(e){function t(){var e,t,n,i,o,r,a,s,l=document,c=Math.max;return e=l.documentElement,t=l.body,n=c(e.scrollWidth,t.scrollWidth),i=c(e.clientWidth,t.clientWidth),o=c(e.offsetWidth,t.offsetWidth),r=c(e.scrollHeight,t.scrollHeight),a=c(e.clientHeight,t.clientHeight),s=c(e.offsetHeight,t.offsetHeight),{width:o>n?i:n,height:s>r?a:r}}return function(n,i){function o(){return f.getElementById(i.handle||n)}var r,a,s,l,c,d,u,f=document;i=i||{},s=function(n){var s,h,m=t();n.preventDefault(),a=n.button,s=o(),d=n.screenX,u=n.screenY,h=window.getComputedStyle?window.getComputedStyle(s,null).getPropertyValue("cursor"):s.runtimeStyle.cursor,r=f.createElement("div"),e.css(r,{position:"absolute",top:0,left:0,width:m.width,height:m.height,zIndex:2147483647,opacity:1e-4,background:"red",cursor:h}),f.body.appendChild(r),e.on(f,"mousemove",c),e.on(f,"mouseup",l),i.start(n)},c=function(e){return e.button!==a?l(e):(e.deltaX=e.screenX-d,e.deltaY=e.screenY-u,e.preventDefault(),void i.drag(e))},l=function(t){e.off(f,"mousemove",c),e.off(f,"mouseup",l),r.parentNode.removeChild(r),i.stop&&i.stop(t)},this.destroy=function(){e.off(o())},e.on(o(),"mousedown",s)}}),/**
 * Scrollable.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/Scrollable",["tinymce/ui/DomUtils","tinymce/ui/DragHelper"],function(e,t){return{init:function(){var e=this;e.on("repaint",e.renderScroll)},renderScroll:function(){function n(){function t(t,a,s,l,c,d){var u,f,h,m,g,p,E,v,T;if(f=o.getEl("scroll"+t)){if(v=a.toLowerCase(),T=s.toLowerCase(),o.getEl("absend")&&e.css(o.getEl("absend"),v,o.layoutRect()[l]-1),!c)return void e.css(f,"display","none");e.css(f,"display","block"),u=o.getEl("body"),h=o.getEl("scroll"+t+"t"),m=u["client"+s]-2*r,m-=n&&i?f["client"+d]:0,g=u["scroll"+s],p=m/g,E={},E[v]=u["offset"+a]+r,E[T]=m,e.css(f,E),E={},E[v]=u["scroll"+a]*p,E[T]=m*p,e.css(h,E)}}var n,i,a;a=o.getEl("body"),n=a.scrollWidth>a.clientWidth,i=a.scrollHeight>a.clientHeight,t("h","Left","Width","contentW",n,"Height"),t("v","Top","Height","contentH",i,"Width")}function i(){function n(n,i,a,s,l){var c,d=o._id+"-scroll"+n,u=o.classPrefix;o.getEl().appendChild(e.createFragment('<div id="'+d+'" class="'+u+"scrollbar "+u+"scrollbar-"+n+'"><div id="'+d+'t" class="'+u+'scrollbar-thumb"></div></div>')),o.draghelper=new t(d+"t",{start:function(){c=o.getEl("body")["scroll"+i],e.addClass(e.get(d),u+"active")},drag:function(e){var t,d,u,f,h=o.layoutRect();d=h.contentW>h.innerW,u=h.contentH>h.innerH,f=o.getEl("body")["client"+a]-2*r,f-=d&&u?o.getEl("scroll"+n)["client"+l]:0,t=f/o.getEl("body")["scroll"+a],o.getEl("body")["scroll"+i]=c+e["delta"+s]/t},stop:function(){e.removeClass(e.get(d),u+"active")}})}o.addClass("scroll"),n("v","Top","Height","Y","Width"),n("h","Left","Width","X","Height")}var o=this,r=2;o.settings.autoScroll&&(o._hasScroll||(o._hasScroll=!0,i(),o.on("wheel",function(e){var t=o.getEl("body");t.scrollLeft+=10*(e.deltaX||0),t.scrollTop+=10*e.deltaY,n()}),e.on(o.getEl("body"),"scroll",n)),n())}}}),/**
 * Panel.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/Panel",["tinymce/ui/Container","tinymce/ui/Scrollable"],function(e,t){return e.extend({Defaults:{layout:"fit",containerCls:"panel"},Mixins:[t],renderHtml:function(){var e=this,t=e._layout,n=e.settings.html;return e.preRender(),t.preRender(e),"undefined"==typeof n?n='<div id="'+e._id+'-body" class="'+e.classes("body")+'">'+t.renderHtml(e)+"</div>":("function"==typeof n&&(n=n.call(e)),e._hasBody=!1),'<div id="'+e._id+'" class="'+e.classes()+'" hidefocus="1" tabindex="-1" role="group">'+(e._preBodyHtml||"")+n+"</div>"}})}),/**
 * Movable.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/Movable",["tinymce/ui/DomUtils"],function(e){function t(t,n,i){var o,r,a,s,l,c,d,u,f,h;return f=e.getViewPort(),r=e.getPos(n),a=r.x,s=r.y,t._fixed&&(a-=f.x,s-=f.y),o=t.getEl(),h=e.getSize(o),l=h.width,c=h.height,h=e.getSize(n),d=h.width,u=h.height,i=(i||"").split(""),"b"===i[0]&&(s+=u),"r"===i[1]&&(a+=d),"c"===i[0]&&(s+=Math.round(u/2)),"c"===i[1]&&(a+=Math.round(d/2)),"b"===i[3]&&(s-=c),"r"===i[4]&&(a-=l),"c"===i[3]&&(s-=Math.round(c/2)),"c"===i[4]&&(a-=Math.round(l/2)),{x:a,y:s,w:l,h:c}}return{testMoveRel:function(n,i){for(var o=e.getViewPort(),r=0;r<i.length;r++){var a=t(this,n,i[r]);if(this._fixed){if(a.x>0&&a.x+a.w<o.w&&a.y>0&&a.y+a.h<o.h)return i[r]}else if(a.x>o.x&&a.x+a.w<o.w+o.x&&a.y>o.y&&a.y+a.h<o.h+o.y)return i[r]}return i[0]},moveRel:function(e,n){"string"!=typeof n&&(n=this.testMoveRel(e,n));var i=t(this,e,n);return this.moveTo(i.x,i.y)},moveBy:function(e,t){var n=this,i=n.layoutRect();return n.moveTo(i.x+e,i.y+t),n},moveTo:function(t,n){function i(e,t,n){return 0>e?0:e+n>t?(e=t-n,0>e?0:e):e}var o=this;if(o.settings.constrainToViewport){var r=e.getViewPort(window),a=o.layoutRect();t=i(t,r.w+r.x,a.w),n=i(n,r.h+r.y,a.h)}return o._rendered?o.layoutRect({x:t,y:n}).repaint():(o.settings.x=t,o.settings.y=n),o.fire("move",{x:t,y:n}),o}}}),/**
 * Resizable.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/Resizable",["tinymce/ui/DomUtils"],function(e){return{resizeToContent:function(){this._layoutRect.autoResize=!0,this._lastRect=null,this.reflow()},resizeTo:function(t,n){if(1>=t||1>=n){var i=e.getWindowSize();t=1>=t?t*i.w:t,n=1>=n?n*i.h:n}return this._layoutRect.autoResize=!1,this.layoutRect({minW:t,minH:n,w:t,h:n}).reflow()},resizeBy:function(e,t){var n=this,i=n.layoutRect();return n.resizeTo(i.w+e,i.h+t)}}}),/**
 * FloatPanel.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/FloatPanel",["tinymce/ui/Panel","tinymce/ui/Movable","tinymce/ui/Resizable","tinymce/ui/DomUtils"],function(e,t,n,i){function o(){function e(e,t){for(;e;){if(e==t)return!0;e=e.parent()}}c||(c=function(t){if(2!=t.button)for(var n=h.length;n--;){var i=h[n],o=i.getParentCtrl(t.target);if(i.settings.autohide){if(o&&(e(o,i)||i.parent()===o))continue;t=i.fire("autohide",{target:t.target}),t.isDefaultPrevented()||i.hide()}}},i.on(document,"click",c))}function r(){d||(d=function(){var e;for(e=h.length;e--;)s(h[e])},i.on(window,"scroll",d))}function a(){u||(u=function(){g.hideAll()},i.on(window,"resize",u))}function s(e){function t(t,n){for(var i,o=0;o<h.length;o++)if(h[o]!=e)for(i=h[o].parent();i&&(i=i.parent());)i==e&&h[o].fixed(t).moveBy(0,n).repaint()}var n=i.getViewPort().y;e.settings.autofix&&(e._fixed?e._autoFixY>n&&(e.fixed(!1).layoutRect({y:e._autoFixY}).repaint(),t(!1,e._autoFixY-n)):(e._autoFixY=e.layoutRect().y,e._autoFixY<n&&(e.fixed(!0).layoutRect({y:0}).repaint(),t(!0,n-e._autoFixY))))}function l(e){var t;for(t=h.length;t--;)h[t]===e&&h.splice(t,1);for(t=m.length;t--;)m[t]===e&&m.splice(t,1)}var c,d,u,f,h=[],m=[],g=e.extend({Mixins:[t,n],init:function(e){function t(){var e,t,o=g.zIndex||65535;if(m.length)for(e=0;e<m.length;e++)m[e].modal&&(o++,t=m[e]),m[e].getEl().style.zIndex=o,m[e].zIndex=o,o++;var r=document.getElementById(n.classPrefix+"modal-block");t?i.css(r,"z-index",t.zIndex-1):r&&(r.parentNode.removeChild(r),f=!1),g.currentZIndex=o}var n=this;n._super(e),n._eventsRoot=n,n.addClass("floatpanel"),e.autohide&&(o(),a(),h.push(n)),e.autofix&&(r(),n.on("move",function(){s(this)})),n.on("postrender show",function(e){if(e.control==n){var o,r=n.classPrefix;n.modal&&!f&&(o=i.createFragment('<div id="'+r+'modal-block" class="'+r+"reset "+r+'fade"></div>'),o=o.firstChild,n.getContainerElm().appendChild(o),setTimeout(function(){i.addClass(o,r+"in"),i.addClass(n.getEl(),r+"in")},0),f=!0),m.push(n),t()}}),n.on("close hide",function(e){if(e.control==n){for(var i=m.length;i--;)m[i]===n&&m.splice(i,1);t()}}),n.on("show",function(){n.parents().each(function(e){return e._fixed?(n.fixed(!0),!1):void 0})}),e.popover&&(n._preBodyHtml='<div class="'+n.classPrefix+'arrow"></div>',n.addClass("popover").addClass("bottom").addClass(n.isRtl()?"end":"start"))},fixed:function(e){var t=this;if(t._fixed!=e){if(t._rendered){var n=i.getViewPort();e?t.layoutRect().y-=n.y:t.layoutRect().y+=n.y}t.toggleClass("fixed",e),t._fixed=e}return t},show:function(){var e,t=this,n=t._super();for(e=h.length;e--&&h[e]!==t;);return-1===e&&h.push(t),n},hide:function(){return l(this),this._super()},hideAll:function(){g.hideAll()},close:function(){var e=this;return e.fire("close"),e.remove()},remove:function(){l(this),this._super()},postRender:function(){var e=this;return e.settings.bodyRole&&this.getEl("body").setAttribute("role",e.settings.bodyRole),e._super()}});return g.hideAll=function(){for(var e=h.length;e--;){var t=h[e];t&&t.settings.autohide&&(t.hide(),h.splice(e,1))}},g}),/**
 * Window.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/Window",["tinymce/ui/FloatPanel","tinymce/ui/Panel","tinymce/ui/DomUtils","tinymce/ui/DragHelper"],function(e,t,n,i){var o=e.extend({modal:!0,Defaults:{border:1,layout:"flex",containerCls:"panel",role:"dialog",callbacks:{submit:function(){this.fire("submit",{data:this.toJSON()})},close:function(){this.close()}}},init:function(e){var n=this;n._super(e),n.isRtl()&&n.addClass("rtl"),n.addClass("window"),n._fixed=!0,e.buttons&&(n.statusbar=new t({layout:"flex",border:"1 0 0 0",spacing:3,padding:10,align:"center",pack:n.isRtl()?"start":"end",defaults:{type:"button"},items:e.buttons}),n.statusbar.addClass("foot"),n.statusbar.parent(n)),n.on("click",function(e){-1!=e.target.className.indexOf(n.classPrefix+"close")&&n.close()}),n.on("cancel",function(){n.close()}),n.aria("describedby",n.describedBy||n._id+"-none"),n.aria("label",e.title),n._fullscreen=!1},recalc:function(){var e,t,i,o,r=this,a=r.statusbar;r._fullscreen&&(r.layoutRect(n.getWindowSize()),r.layoutRect().contentH=r.layoutRect().innerH),r._super(),e=r.layoutRect(),r.settings.title&&!r._fullscreen&&(t=e.headerW,t>e.w&&(i=e.x-Math.max(0,t/2),r.layoutRect({w:t,x:i}),o=!0)),a&&(a.layoutRect({w:r.layoutRect().innerW}).recalc(),t=a.layoutRect().minW+e.deltaW,t>e.w&&(i=e.x-Math.max(0,t-e.w),r.layoutRect({w:t,x:i}),o=!0)),o&&r.recalc()},initLayoutRect:function(){var e,t=this,i=t._super(),o=0;if(t.settings.title&&!t._fullscreen){e=t.getEl("head");var r=n.getSize(e);i.headerW=r.width,i.headerH=r.height,o+=i.headerH}t.statusbar&&(o+=t.statusbar.layoutRect().h),i.deltaH+=o,i.minH+=o,i.h+=o;var a=n.getWindowSize();return i.x=Math.max(0,a.w/2-i.w/2),i.y=Math.max(0,a.h/2-i.h/2),i},renderHtml:function(){var e=this,t=e._layout,n=e._id,i=e.classPrefix,o=e.settings,r="",a="",s=o.html;return e.preRender(),t.preRender(e),o.title&&(r='<div id="'+n+'-head" class="'+i+'window-head"><div id="'+n+'-title" class="'+i+'title">'+e.encode(o.title)+'</div><button type="button" class="'+i+'close" aria-hidden="true">\xd7</button><div id="'+n+'-dragh" class="'+i+'dragh"></div></div>'),o.url&&(s='<iframe src="'+o.url+'" tabindex="-1"></iframe>'),"undefined"==typeof s&&(s=t.renderHtml(e)),e.statusbar&&(a=e.statusbar.renderHtml()),'<div id="'+n+'" class="'+e.classes()+'" hidefocus="1"><div class="'+e.classPrefix+'reset" role="application">'+r+'<div id="'+n+'-body" class="'+e.classes("body")+'">'+s+"</div>"+a+"</div></div>"},fullscreen:function(e){var t,i,o=this,r=document.documentElement,a=o.classPrefix;if(e!=o._fullscreen)if(n.on(window,"resize",function(){var e;if(o._fullscreen)if(t)o._timer||(o._timer=setTimeout(function(){var e=n.getWindowSize();o.moveTo(0,0).resizeTo(e.w,e.h),o._timer=0},50));else{e=(new Date).getTime();var i=n.getWindowSize();o.moveTo(0,0).resizeTo(i.w,i.h),(new Date).getTime()-e>50&&(t=!0)}}),i=o.layoutRect(),o._fullscreen=e,e){o._initial={x:i.x,y:i.y,w:i.w,h:i.h},o._borderBox=o.parseBox("0"),o.getEl("head").style.display="none",i.deltaH-=i.headerH+2,n.addClass(r,a+"fullscreen"),n.addClass(document.body,a+"fullscreen"),o.addClass("fullscreen");var s=n.getWindowSize();o.moveTo(0,0).resizeTo(s.w,s.h)}else o._borderBox=o.parseBox(o.settings.border),o.getEl("head").style.display="",i.deltaH+=i.headerH,n.removeClass(r,a+"fullscreen"),n.removeClass(document.body,a+"fullscreen"),o.removeClass("fullscreen"),o.moveTo(o._initial.x,o._initial.y).resizeTo(o._initial.w,o._initial.h);return o.reflow()},postRender:function(){var e,t=this;setTimeout(function(){t.addClass("in")},0),t._super(),t.statusbar&&t.statusbar.postRender(),t.focus(),this.dragHelper=new i(t._id+"-dragh",{start:function(){e={x:t.layoutRect().x,y:t.layoutRect().y}},drag:function(n){t.moveTo(e.x+n.deltaX,e.y+n.deltaY)}}),t.on("submit",function(e){e.isDefaultPrevented()||t.close()})},submit:function(){return this.fire("submit",{data:this.toJSON()})},remove:function(){var e=this,t=e.classPrefix;e.dragHelper.destroy(),e._super(),e.statusbar&&this.statusbar.remove(),e._fullscreen&&(n.removeClass(document.documentElement,t+"fullscreen"),n.removeClass(document.body,t+"fullscreen"))},getContentWindow:function(){var e=this.getEl().getElementsByTagName("iframe")[0];return e?e.contentWindow:null}});return o}),/**
 * MessageBox.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/MessageBox",["tinymce/ui/Window"],function(e){var t=e.extend({init:function(e){e={border:1,padding:20,layout:"flex",pack:"center",align:"center",containerCls:"panel",autoScroll:!0,buttons:{type:"button",text:"Ok",action:"ok"},items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200}},this._super(e)},Statics:{OK:1,OK_CANCEL:2,YES_NO:3,YES_NO_CANCEL:4,msgBox:function(n){var i,o=n.callback||function(){};switch(n.buttons){case t.OK_CANCEL:i=[{type:"button",text:"Ok",subtype:"primary",onClick:function(e){e.control.parents()[1].close(),o(!0)}},{type:"button",text:"Cancel",onClick:function(e){e.control.parents()[1].close(),o(!1)}}];break;case t.YES_NO:i=[{type:"button",text:"Ok",subtype:"primary",onClick:function(e){e.control.parents()[1].close(),o(!0)}}];break;case t.YES_NO_CANCEL:i=[{type:"button",text:"Ok",subtype:"primary",onClick:function(e){e.control.parents()[1].close()}}];break;default:i=[{type:"button",text:"Ok",subtype:"primary",onClick:function(e){e.control.parents()[1].close(),o(!0)}}]}return new e({padding:20,x:n.x,y:n.y,minWidth:300,minHeight:100,layout:"flex",pack:"center",align:"center",buttons:i,title:n.title,role:"alertdialog",items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200,text:n.text},onPostRender:function(){this.aria("describedby",this.items()[0]._id)},onClose:n.onClose,onCancel:function(){o(!1)}}).renderTo(document.body).reflow()},alert:function(e,n){return"string"==typeof e&&(e={text:e}),e.callback=n,t.msgBox(e)},confirm:function(e,n){return"string"==typeof e&&(e={text:e}),e.callback=n,e.buttons=t.OK_CANCEL,t.msgBox(e)}}});return t}),/**
 * WindowManager.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/WindowManager",["tinymce/ui/Window","tinymce/ui/MessageBox"],function(e,t){return function(n){function i(){return r.length?r[r.length-1]:void 0}var o=this,r=[];o.windows=r,o.open=function(t,i){var o;return n.editorManager.activeEditor=n,t.title=t.title||" ",t.url=t.url||t.file,t.url&&(t.width=parseInt(t.width||320,10),t.height=parseInt(t.height||240,10)),t.body&&(t.items={defaults:t.defaults,type:t.bodyType||"form",items:t.body}),t.url||t.buttons||(t.buttons=[{text:"Ok",subtype:"primary",onclick:function(){o.find("form")[0].submit()}},{text:"Cancel",onclick:function(){o.close()}}]),o=new e(t),r.push(o),o.on("close",function(){for(var e=r.length;e--;)r[e]===o&&r.splice(e,1);n.focus()}),t.data&&o.on("postRender",function(){this.find("*").each(function(e){var n=e.name();n in t.data&&e.value(t.data[n])})}),o.features=t||{},o.params=i||{},n.nodeChanged(),o.renderTo().reflow()},o.alert=function(e,i,o){t.alert(e,function(){i?i.call(o||this):n.focus()})},o.confirm=function(e,n,i){t.confirm(e,function(e){n.call(i||this,e)})},o.close=function(){i()&&i().close()},o.getParams=function(){return i()?i().params:null},o.setParams=function(e){i()&&(i().params=e)},o.getWindows=function(){return r}}}),/**
 * Quirks.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 *
 * @ignore-file
 */
i("tinymce/util/Quirks",["tinymce/util/VK","tinymce/dom/RangeUtils","tinymce/html/Node","tinymce/html/Entities","tinymce/Env","tinymce/util/Tools"],function(e,t,n,i,o,r){return function(a){function s(e,t){try{a.getDoc().execCommand(e,!1,t)}catch(n){}}function l(){var e=a.getDoc().documentMode;return e?e:6}function c(e){return e.isDefaultPrevented()}function d(){function t(e){var t=new l(function(){});r.each(a.getBody().getElementsByTagName("*"),function(e){"SPAN"==e.tagName&&e.setAttribute("mce-data-marked",1),!e.hasAttribute("data-mce-style")&&e.hasAttribute("style")&&a.dom.setAttrib(e,"style",e.getAttribute("style"))}),t.observe(a.getDoc(),{childList:!0,attributes:!0,subtree:!0,attributeFilter:["style"]}),a.getDoc().execCommand(e?"ForwardDelete":"Delete",!1,null);var n=a.selection.getRng(),i=n.startContainer.parentNode;r.each(t.takeRecords(),function(e){if(q.isChildOf(e.target,a.getBody())){if("style"==e.attributeName){var t=e.target.getAttribute("data-mce-style");t?e.target.setAttribute("style",t):e.target.removeAttribute("style")}r.each(e.addedNodes,function(e){if("SPAN"==e.nodeName&&!e.getAttribute("mce-data-marked")){var t,o;e==i&&(t=n.startOffset,o=e.firstChild),q.remove(e,!0),o&&(n.setStart(o,t),n.setEnd(o,t),a.selection.setRng(n))}})}}),t.disconnect(),r.each(a.dom.select("span[mce-data-marked]"),function(e){e.removeAttribute("mce-data-marked")})}var n,i,o=a.getDoc(),s="data:text/mce-internal,",l=window.MutationObserver;l||(n=!0,l=function(){function e(e){var t=e.relatedNode||e.target;i.push({target:t,addedNodes:[t]})}function t(e){var t=e.relatedNode||e.target;i.push({target:t,attributeName:e.attrName})}var n,i=[];this.observe=function(i){n=i,n.addEventListener("DOMSubtreeModified",e,!1),n.addEventListener("DOMNodeInsertedIntoDocument",e,!1),n.addEventListener("DOMNodeInserted",e,!1),n.addEventListener("DOMAttrModified",t,!1)},this.disconnect=function(){n.removeEventListener("DOMSubtreeModified",e,!1),n.removeEventListener("DOMNodeInsertedIntoDocument",e,!1),n.removeEventListener("DOMNodeInserted",e,!1),n.removeEventListener("DOMAttrModified",t,!1)},this.takeRecords=function(){return i}}),a.on("keydown",function(n){var i=n.keyCode==V,o=e.metaKeyPressed(n);if(!c(n)&&(i||n.keyCode==z)){var r=a.selection.getRng(),s=r.startContainer,l=r.startOffset;if(!o&&r.collapsed&&3==s.nodeType&&(i?l<s.data.length:l>0))return;n.preventDefault(),o&&a.selection.getSel().modify("extend",i?"forward":"backward","word"),t(i)}}),a.on("keypress",function(n){c(n)||U.isCollapsed()||!n.charCode||e.metaKeyPressed(n)||(n.preventDefault(),t(!0),a.selection.setContent(String.fromCharCode(n.charCode)))}),a.addCommand("Delete",function(){t()}),a.addCommand("ForwardDelete",function(){t(!0)}),n||(a.on("dragstart",function(e){var t;a.selection.isCollapsed()&&"IMG"==e.target.tagName&&U.select(e.target),i=U.getRng(),t=a.selection.getContent(),t.length>0&&e.dataTransfer.setData("URL","data:text/mce-internal,"+escape(t))}),a.on("drop",function(e){if(!c(e)){var n=e.dataTransfer.getData("URL");if(!n||-1==n.indexOf(s)||!o.caretRangeFromPoint)return;n=unescape(n.substr(s.length)),o.caretRangeFromPoint&&(e.preventDefault(),window.setTimeout(function(){var r=o.caretRangeFromPoint(e.x,e.y);i&&(U.setRng(i),i=null),t(),U.setRng(r),a.insertContent(n)},0))}}),a.on("cut",function(e){!c(e)&&e.clipboardData&&(e.preventDefault(),e.clipboardData.clearData(),e.clipboardData.setData("text/html",a.selection.getContent()),e.clipboardData.setData("text/plain",a.selection.getContent({format:"text"})),t(!0))}))}function u(){function e(e){var t=q.create("body"),n=e.cloneContents();return t.appendChild(n),U.serializer.serialize(t,{format:"html"})}function n(n){if(!n.setStart){if(n.item)return!1;var i=n.duplicate();return i.moveToElementText(a.getBody()),t.compareRanges(n,i)}var o=e(n),r=q.createRng();r.selectNode(a.getBody());var s=e(r);return o===s}a.on("keydown",function(e){var t,i,o=e.keyCode;if(!c(e)&&(o==V||o==z)){if(t=a.selection.isCollapsed(),i=a.getBody(),t&&!q.isEmpty(i))return;if(!t&&!n(a.selection.getRng()))return;e.preventDefault(),a.setContent(""),i.firstChild&&q.isBlock(i.firstChild)?a.selection.setCursorLocation(i.firstChild,0):a.selection.setCursorLocation(i,0),a.nodeChanged()}})}function f(){a.on("keydown",function(t){!c(t)&&65==t.keyCode&&e.metaKeyPressed(t)&&(t.preventDefault(),a.execCommand("SelectAll"))})}function h(){a.settings.content_editable||(q.bind(a.getDoc(),"focusin",function(){U.setRng(U.getRng())}),q.bind(a.getDoc(),"mousedown",function(e){e.target==a.getDoc().documentElement&&(a.getBody().focus(),U.setRng(U.getRng()))}))}function m(){a.on("keydown",function(e){if(!c(e)&&e.keyCode===z&&U.isCollapsed()&&0===U.getRng(!0).startOffset){var t=U.getNode(),n=t.previousSibling;if("HR"==t.nodeName)return q.remove(t),void e.preventDefault();n&&n.nodeName&&"hr"===n.nodeName.toLowerCase()&&(q.remove(n),e.preventDefault())}})}function g(){window.Range.prototype.getClientRects||a.on("mousedown",function(e){if(!c(e)&&"HTML"===e.target.nodeName){var t=a.getBody();t.blur(),setTimeout(function(){t.focus()},0)}})}function p(){a.on("click",function(e){e=e.target,/^(IMG|HR)$/.test(e.nodeName)&&U.getSel().setBaseAndExtent(e,0,e,1),"A"==e.nodeName&&q.hasClass(e,"mce-item-anchor")&&U.select(e),a.nodeChanged()})}function E(){function e(){var e=q.getAttribs(U.getStart().cloneNode(!1));return function(){var t=U.getStart();t!==a.getBody()&&(q.setAttrib(t,"style",null),H(e,function(e){t.setAttributeNode(e.cloneNode(!0))}))}}function t(){return!U.isCollapsed()&&q.getParent(U.getStart(),q.isBlock)!=q.getParent(U.getEnd(),q.isBlock)}a.on("keypress",function(n){var i;return c(n)||8!=n.keyCode&&46!=n.keyCode||!t()?void 0:(i=e(),a.getDoc().execCommand("delete",!1,null),i(),n.preventDefault(),!1)}),q.bind(a.getDoc(),"cut",function(n){var i;!c(n)&&t()&&(i=e(),setTimeout(function(){i()},0))})}function v(){var e,n;a.on("selectionchange",function(){n&&(clearTimeout(n),n=0),n=window.setTimeout(function(){if(!a.removed){var n=U.getRng();e&&t.compareRanges(n,e)||(a.nodeChanged(),e=n)}},50)})}function T(){document.body.setAttribute("role","application")}function C(){a.on("keydown",function(e){if(!c(e)&&e.keyCode===z&&U.isCollapsed()&&0===U.getRng(!0).startOffset){var t=U.getNode().previousSibling;if(t&&t.nodeName&&"table"===t.nodeName.toLowerCase())return e.preventDefault(),!1}})}function b(){l()>7||(s("RespectVisibilityInDesign",!0),a.contentStyles.push(".mceHideBrInPre pre br {display: none}"),q.addClass(a.getBody(),"mceHideBrInPre"),j.addNodeFilter("pre",function(e){for(var t,i,o,r,a=e.length;a--;)for(t=e[a].getAll("br"),i=t.length;i--;)o=t[i],r=o.prev,r&&3===r.type&&"\n"!=r.value.charAt(r.value-1)?r.value+="\n":o.parent.insert(new n("#text",3),o,!0).value="\n"}),G.addNodeFilter("pre",function(e){for(var t,n,i,o,r=e.length;r--;)for(t=e[r].getAll("br"),n=t.length;n--;)i=t[n],o=i.prev,o&&3==o.type&&(o.value=o.value.replace(/\r?\n$/,""))}))}function y(){q.bind(a.getBody(),"mouseup",function(){var e,t=U.getNode();"IMG"==t.nodeName&&((e=q.getStyle(t,"width"))&&(q.setAttrib(t,"width",e.replace(/[^0-9%]+/g,"")),q.setStyle(t,"width","")),(e=q.getStyle(t,"height"))&&(q.setAttrib(t,"height",e.replace(/[^0-9%]+/g,"")),q.setStyle(t,"height","")))})}function I(){a.on("keydown",function(t){var n,i,o,r,s;if(!c(t)&&t.keyCode==e.BACKSPACE&&(n=U.getRng(),i=n.startContainer,o=n.startOffset,r=q.getRoot(),s=i,n.collapsed&&0===o)){for(;s&&s.parentNode&&s.parentNode.firstChild==s&&s.parentNode!=r;)s=s.parentNode;"BLOCKQUOTE"===s.tagName&&(a.formatter.toggle("blockquote",null,s),n=q.createRng(),n.setStart(i,0),n.setEnd(i,0),U.setRng(n))}})}function O(){function e(){a._refreshContentEditable(),s("StyleWithCSS",!1),s("enableInlineTableEditing",!1),W.object_resizing||s("enableObjectResizing",!1)}W.readonly||a.on("BeforeExecCommand MouseDown",e)}function D(){function e(){H(q.select("a"),function(e){var t=e.parentNode,n=q.getRoot();if(t.lastChild===e){for(;t&&!q.isBlock(t);){if(t.parentNode.lastChild!==t||t===n)return;t=t.parentNode}q.add(t,"br",{"data-mce-bogus":1})}})}a.on("SetContent ExecCommand",function(t){("setcontent"==t.type||"mceInsertLink"===t.command)&&e()})}function R(){W.forced_root_block&&a.on("init",function(){s("DefaultParagraphSeparator",W.forced_root_block)})}function _(){a.on("Undo Redo SetContent",function(e){e.initial||a.execCommand("mceRepaint")})}function k(){a.on("keydown",function(e){var t;c(e)||e.keyCode!=z||(t=a.getDoc().selection.createRange(),t&&t.item&&(e.preventDefault(),a.undoManager.beforeChange(),q.remove(t.item(0)),a.undoManager.add()))})}function K(){var e;l()>=10&&(e="",H("p div h1 h2 h3 h4 h5 h6".split(" "),function(t,n){e+=(n>0?",":"")+t+":empty"}),a.contentStyles.push(e+"{padding-right: 1px !important}"))}function x(){l()<9&&(j.addNodeFilter("noscript",function(e){for(var t,n,i=e.length;i--;)t=e[i],n=t.firstChild,n&&t.attr("data-mce-innertext",n.value)}),G.addNodeFilter("noscript",function(e){for(var t,o,r,a=e.length;a--;)t=e[a],o=e[a].firstChild,o?o.value=i.decode(o.value):(r=t.attributes.map["data-mce-innertext"],r&&(t.attr("data-mce-innertext",null),o=new n("#text",3),o.value=r,o.raw=!0,t.append(o)))}))}function w(){function e(e,t){var n=s.createTextRange();try{n.moveToPoint(e,t)}catch(i){n=null}return n}function t(t){var i;t.button?(i=e(t.x,t.y),i&&(i.compareEndPoints("StartToStart",o)>0?i.setEndPoint("StartToStart",o):i.setEndPoint("EndToEnd",o),i.select())):n()}function n(){var e=a.selection.createRange();o&&!e.item&&0===e.compareEndPoints("StartToEnd",e)&&o.select(),q.unbind(a,"mouseup",n),q.unbind(a,"mousemove",t),o=i=0}var i,o,r,a=q.doc,s=a.body;a.documentElement.unselectable=!0,q.bind(a,"mousedown contextmenu",function(s){if("HTML"===s.target.nodeName){if(i&&n(),r=a.documentElement,r.scrollHeight>r.clientHeight)return;i=1,o=e(s.x,s.y),o&&(q.bind(a,"mouseup",n),q.bind(a,"mousemove",t),q.getRoot().focus(),o.select())}})}function S(){a.on("keyup focusin mouseup",function(t){65==t.keyCode&&e.metaKeyPressed(t)||U.normalize()},!0)}function N(){a.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")}function A(){a.inline||a.on("keydown",function(){document.activeElement==document.body&&a.getWin().focus()})}function L(){a.inline||(a.contentStyles.push("body {min-height: 150px}"),a.on("click",function(e){"HTML"==e.target.nodeName&&(a.getBody().focus(),a.selection.normalize(),a.nodeChanged())}))}function B(){o.mac&&a.on("keydown",function(t){!e.metaKeyPressed(t)||37!=t.keyCode&&39!=t.keyCode||(t.preventDefault(),a.selection.getSel().modify("move",37==t.keyCode?"backward":"forward","word"))})}function P(){s("AutoUrlDetect",!1)}function F(){a.inline||a.on("focus blur beforegetcontent",function(){var e=a.dom.create("br");a.getBody().appendChild(e),e.parentNode.removeChild(e)},!0)}function M(){a.on("click",function(e){var t=e.target;do if("A"===t.tagName)return void e.preventDefault();while(t=t.parentNode)}),a.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")}function $(){a.on("init",function(){a.dom.bind(a.getBody(),"submit",function(e){e.preventDefault()})})}var H=r.each,z=e.BACKSPACE,V=e.DELETE,q=a.dom,U=a.selection,W=a.settings,j=a.parser,G=a.serializer,X=o.gecko,Y=o.ie,J=o.webkit;C(),I(),u(),S(),J&&(d(),h(),p(),R(),$(),o.iOS?(v(),A(),L(),M()):f()),Y&&o.ie<11&&(m(),T(),b(),y(),k(),K(),x(),w()),o.ie>=11&&(L(),F()),o.ie&&(f(),P()),X&&(m(),g(),E(),O(),D(),_(),N(),B())}}),/**
 * Observable.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/util/Observable",["tinymce/util/EventDispatcher"],function(e){function t(t){return t._eventDispatcher||(t._eventDispatcher=new e({scope:t,toggleEvent:function(n,i){e.isNative(n)&&t.toggleNativeEvent&&t.toggleNativeEvent(n,i)}})),t._eventDispatcher}return{fire:function(e,n,i){var o=this;if(o.removed&&"remove"!==e)return n;if(n=t(o).fire(e,n,i),i!==!1&&o.parent)for(var r=o.parent();r&&!n.isPropagationStopped();)r.fire(e,n,!1),r=r.parent();return n},on:function(e,n,i){return t(this).on(e,n,i)},off:function(e,n){return t(this).off(e,n)},hasEventListeners:function(e){return t(this).has(e)}}}),/**
 * EditorObservable.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/EditorObservable",["tinymce/util/Observable","tinymce/dom/DOMUtils","tinymce/util/Tools"],function(e,t,n){function i(e,t){return"selectionchange"==t?e.getDoc():!e.inline&&/^mouse|click|contextmenu|drop/.test(t)?e.getDoc():e.getBody()}function o(e,t){var n=e.settings.event_root,o=e.editorManager,a=o.eventRootElm||i(e,t);if(n){if(o.rootEvents||(o.rootEvents={},o.on("RemoveEditor",function(){o.activeEditor||(r.unbind(a),delete o.rootEvents)})),o.rootEvents[t])return;a==e.getBody()&&(a=r.select(n)[0],o.eventRootElm=a),o.rootEvents[t]=!0,r.bind(a,t,function(e){for(var n=e.target,i=o.editors,a=i.length;a--;){var s=i[a].getBody();(s===n||r.isChildOf(n,s))&&(i[a].hidden||i[a].fire(t,e))}})}else e.dom.bind(a,t,function(n){e.hidden||e.fire(t,n)})}var r=t.DOM,a={bindPendingEventDelegates:function(){var e=this;n.each(e._pendingNativeEvents,function(t){o(e,t)})},toggleNativeEvent:function(e,t){var n=this;n.settings.readonly||"focus"!=e&&"blur"!=e&&(t?n.initialized?o(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&n.dom.unbind(i(n,e),e))}};return a=n.extend({},e,a)}),/**
 * Shortcuts.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/Shortcuts",["tinymce/util/Tools","tinymce/Env"],function(e,t){var n=e.each,i=e.explode,o={f9:120,f10:121,f11:122};return function(r){var a=this,s={};r.on("keyup keypress keydown",function(e){(e.altKey||e.ctrlKey||e.metaKey)&&n(s,function(n){var i=t.mac?e.metaKey:e.ctrlKey;if(n.ctrl==i&&n.alt==e.altKey&&n.shift==e.shiftKey)return e.keyCode==n.keyCode||e.charCode&&e.charCode==n.charCode?(e.preventDefault(),"keydown"==e.type&&n.func.call(n.scope),!0):void 0})}),a.add=function(t,a,l,c){var d;return d=l,"string"==typeof l?l=function(){r.execCommand(d,!1,null)}:e.isArray(d)&&(l=function(){r.execCommand(d[0],d[1],d[2])}),n(i(t.toLowerCase()),function(e){var t={func:l,scope:c||r,desc:r.translate(a),alt:!1,ctrl:!1,shift:!1};n(i(e,"+"),function(e){switch(e){case"alt":case"ctrl":case"shift":t[e]=!0;break;default:/^[0-9]{2,}$/.test(e)?t.keyCode=parseInt(e,10):(t.charCode=e.charCodeAt(0),t.keyCode=o[e]||e.toUpperCase().charCodeAt(0))}}),s[(t.ctrl?"ctrl":"")+","+(t.alt?"alt":"")+","+(t.shift?"shift":"")+","+t.keyCode]=t}),!0}}}),/**
 * Editor.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/Editor",["tinymce/dom/DOMUtils","tinymce/AddOnManager","tinymce/html/Node","tinymce/dom/Serializer","tinymce/html/Serializer","tinymce/dom/Selection","tinymce/Formatter","tinymce/UndoManager","tinymce/EnterKey","tinymce/ForceBlocks","tinymce/EditorCommands","tinymce/util/URI","tinymce/dom/ScriptLoader","tinymce/dom/EventUtils","tinymce/WindowManager","tinymce/html/Schema","tinymce/html/DomParser","tinymce/util/Quirks","tinymce/Env","tinymce/util/Tools","tinymce/EditorObservable","tinymce/Shortcuts"],function(e,n,i,o,r,a,s,l,c,d,u,f,h,m,g,p,E,v,T,C,b,y){function I(e,t,i){var o,r,a=this;o=a.documentBaseUrl=i.documentBaseURL,r=i.baseURI,a.settings=t=_({id:e,theme:"modern",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:o,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,padd_empty_editor:!0,render_ui:!0,indentation:"30px",inline_styles:!0,convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,option,optgroup,datalist",validate:!0,entity_encoding:"named",url_converter:a.convertURL,url_converter_scope:a,ie7_compat:!0},t),n.language=t.language||"en",n.languageLoad=t.language_load,n.baseURL=i.baseURL,a.id=t.id=e,a.isNotDirty=!0,a.plugins={},a.documentBaseURI=new f(t.document_base_url||o,{base_uri:r}),a.baseURI=r,a.contentCSS=[],a.contentStyles=[],a.shortcuts=new y(a),a.execCommands={},a.queryStateCommands={},a.queryValueCommands={},a.loadedCSS={},a.suffix=i.suffix,a.editorManager=i,a.inline=t.inline,i.fire("SetupEditor",a),a.execCallback("setup",a)}var O=e.DOM,D=n.ThemeManager,R=n.PluginManager,_=C.extend,k=C.each,K=C.explode,x=C.inArray,w=C.trim,S=C.resolve,N=m.Event,A=T.gecko,L=T.ie;return I.prototype={render:function(){function e(){O.unbind(window,"ready",e),n.render()}function t(){var e=h.ScriptLoader;if(i.language&&"en"!=i.language&&!i.language_url&&(i.language_url=n.editorManager.baseURL+"/langs/"+i.language+".js"),i.language_url&&e.add(i.language_url),i.theme&&"function"!=typeof i.theme&&"-"!=i.theme.charAt(0)&&!D.urls[i.theme]){var t=i.theme_url;t=t?n.documentBaseURI.toAbsolute(t):"themes/"+i.theme+"/theme"+r+".js",D.load(i.theme,t)}C.isArray(i.plugins)&&(i.plugins=i.plugins.join(" ")),k(i.external_plugins,function(e,t){R.load(t,e),i.plugins+=" "+t}),k(i.plugins.split(/[ ,]/),function(e){if(e=w(e),e&&!R.urls[e])if("-"==e.charAt(0)){e=e.substr(1,e.length);var t=R.dependencies(e);k(t,function(e){var t={prefix:"plugins/",resource:e,suffix:"/plugin"+r+".js"};e=R.createUrl(t,e),R.load(e.resource,e)})}else R.load(e,{prefix:"plugins/",resource:e,suffix:"/plugin"+r+".js"})}),e.loadQueue(function(){n.removed||n.init()})}var n=this,i=n.settings,o=n.id,r=n.suffix;if(!N.domLoaded)return void O.bind(window,"ready",e);if(n.getElement()&&T.contentEditable){i.inline?n.inline=!0:(n.orgVisibility=n.getElement().style.visibility,n.getElement().style.visibility="hidden");var a=n.getElement().form||O.getParent(o,"form");a&&(n.formElement=a,i.hidden_input&&!/TEXTAREA|INPUT/i.test(n.getElement().nodeName)&&(O.insertAfter(O.create("input",{type:"hidden",name:o}),o),n.hasHiddenInput=!0),n.formEventDelegate=function(e){n.fire(e.type,e)},O.bind(a,"submit reset",n.formEventDelegate),n.on("reset",function(){n.setContent(n.startContent,{format:"raw"})}),!i.submit_patch||a.submit.nodeType||a.submit.length||a._mceOldSubmit||(a._mceOldSubmit=a.submit,a.submit=function(){return n.editorManager.triggerSave(),n.isNotDirty=!0,a._mceOldSubmit(a)})),n.windowManager=new g(n),"xml"==i.encoding&&n.on("GetContent",function(e){e.save&&(e.content=O.encode(e.content))}),i.add_form_submit_trigger&&n.on("submit",function(){n.initialized&&n.save()}),i.add_unload_trigger&&(n._beforeUnload=function(){!n.initialized||n.destroyed||n.isHidden()||n.save({format:"raw",no_events:!0,set_dirty:!1})},n.editorManager.on("BeforeUnload",n._beforeUnload)),t()}},init:function(){function e(t){var n,i,o=R.get(t);n=R.urls[t]||f.documentBaseUrl.replace(/\/$/,""),t=w(t),o&&-1===x(g,t)&&(k(R.dependencies(t),function(t){e(t)}),i=new o(f,n),f.plugins[t]=i,i.init&&(i.init(f,n),g.push(t)))}var t,n,i,o,r,a,s,l,c,d,u,f=this,h=f.settings,m=f.getElement(),g=[];if(f.rtl=this.editorManager.i18n.rtl,f.editorManager.add(f),h.aria_label=h.aria_label||O.getAttrib(m,"aria-label",f.getLang("aria.rich_text_area")),h.theme&&("function"!=typeof h.theme?(h.theme=h.theme.replace(/-/,""),a=D.get(h.theme),f.theme=new a(f,D.urls[h.theme]),f.theme.init&&f.theme.init(f,D.urls[h.theme]||f.documentBaseUrl.replace(/\/$/,""))):f.theme=h.theme),k(h.plugins.replace(/\-/g,"").split(/[ ,]/),e),h.render_ui&&f.theme&&(f.orgDisplay=m.style.display,"function"!=typeof h.theme?(t=h.width||m.style.width||m.offsetWidth,n=h.height||m.style.height||m.offsetHeight,i=h.min_height||100,d=/^[0-9\.]+(|px)$/i,d.test(""+t)&&(t=Math.max(parseInt(t,10),100)),d.test(""+n)&&(n=Math.max(parseInt(n,10),i)),r=f.theme.renderUI({targetNode:m,width:t,height:n,deltaWidth:h.delta_width,deltaHeight:h.delta_height}),h.content_editable||(O.setStyles(r.sizeContainer||r.editorContainer,{wi2dth:t,h2eight:n}),n=(r.iframeHeight||n)+("number"==typeof n?r.deltaHeight||0:""),i>n&&(n=i))):(r=h.theme(f,m),r.editorContainer.nodeType&&(r.editorContainer=r.editorContainer.id=r.editorContainer.id||f.id+"_parent"),r.iframeContainer.nodeType&&(r.iframeContainer=r.iframeContainer.id=r.iframeContainer.id||f.id+"_iframecontainer"),n=r.iframeHeight||m.offsetHeight),f.editorContainer=r.editorContainer),h.content_css&&k(K(h.content_css),function(e){f.contentCSS.push(f.documentBaseURI.toAbsolute(e))}),h.content_style&&f.contentStyles.push(h.content_style),h.content_editable)return m=o=r=null,f.initContentBody();for(f.iframeHTML=h.doctype+"<html><head>",h.document_base_url!=f.documentBaseUrl&&(f.iframeHTML+='<base href="'+f.documentBaseURI.getURI()+'" />'),!T.caretAfter&&h.ie7_compat&&(f.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=7" />'),f.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',u=0;u<f.contentCSS.length;u++){var p=f.contentCSS[u];f.iframeHTML+='<link type="text/css" rel="stylesheet" href="'+p+'" />',f.loadedCSS[p]=!0}l=h.body_id||"tinymce",-1!=l.indexOf("=")&&(l=f.getParam("body_id","","hash"),l=l[f.id]||l),c=h.body_class||"",-1!=c.indexOf("=")&&(c=f.getParam("body_class","","hash"),c=c[f.id]||""),f.iframeHTML+='</head><body id="'+l+'" class="mce-content-body '+c+'" onload="window.parent.tinymce.get(\''+f.id+"').fire('load');\"><br></body></html>";var E='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinymce.get("'+f.id+'");document.write(ed.iframeHTML);document.close();ed.initContentBody(true);})()';if(document.domain!=location.hostname&&(s=E),o=O.add(r.iframeContainer,"iframe",{id:f.id+"_ifr",src:s||'javascript:""',frameBorder:"0",allowTransparency:"true",title:f.editorManager.translate("Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help"),style:{width:"100%",height:n,display:"block"}}),L)try{f.getDoc()}catch(v){o.src=s=E}f.contentAreaContainer=r.iframeContainer,r.editorContainer&&(O.get(r.editorContainer).style.display=f.orgDisplay),O.get(f.id).style.display="none",O.setAttrib(f.id,"aria-hidden",!0),s||f.initContentBody(),m=o=r=null},initContentBody:function(t){var n,r,f=this,h=f.settings,m=O.get(f.id),g=f.getDoc();h.inline||(f.getElement().style.visibility=f.orgVisibility),t||h.content_editable||(g.open(),g.write(f.iframeHTML),g.close()),h.content_editable&&(f.on("remove",function(){var e=this.getBody();O.removeClass(e,"mce-content-body"),O.removeClass(e,"mce-edit-focus"),O.setAttrib(e,"contentEditable",null)}),O.addClass(m,"mce-content-body"),f.contentDocument=g=h.content_document||document,f.contentWindow=h.content_window||window,f.bodyElement=m,h.content_document=h.content_window=null,h.root_name=m.nodeName.toLowerCase()),n=f.getBody(),n.disabled=!0,h.readonly||(f.inline&&"static"==O.getStyle(n,"position",!0)&&(n.style.position="relative"),n.contentEditable=f.getParam("content_editable_state",!0)),n.disabled=!1,f.schema=new p(h),f.dom=new e(g,{keep_values:!0,url_converter:f.convertURL,url_converter_scope:f,hex_colors:h.force_hex_style_colors,class_filter:h.class_filter,update_styles:!0,root_element:h.content_editable?f.id:null,collect:h.content_editable,schema:f.schema,onSetAttrib:function(e){f.fire("SetAttrib",e)}}),f.parser=new E(h,f.schema),f.parser.addAttributeFilter("src,href,style,tabindex",function(e,t){for(var n,i,o,r=e.length,a=f.dom;r--;)n=e[r],i=n.attr(t),o="data-mce-"+t,n.attributes.map[o]||("style"===t?(i=a.serializeStyle(a.parseStyle(i),n.name),i.length||(i=null),n.attr(o,i),n.attr(t,i)):"tabindex"===t?(n.attr(o,i),n.attr(t,null)):n.attr(o,f.convertURL(i,t,n.name)))}),f.parser.addNodeFilter("script",function(e){for(var t,n=e.length;n--;)t=e[n],t.attr("type","mce-"+(t.attr("type")||"no/type"))}),f.parser.addNodeFilter("#cdata",function(e){for(var t,n=e.length;n--;)t=e[n],t.type=8,t.name="#comment",t.value="[CDATA["+t.value+"]]"}),f.parser.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(e){for(var t,n=e.length,o=f.schema.getNonEmptyElements();n--;)t=e[n],t.isEmpty(o)&&(t.empty().append(new i("br",1)).shortEnded=!0)}),f.serializer=new o(h,f),f.selection=new a(f.dom,f.getWin(),f.serializer,f),f.formatter=new s(f),f.undoManager=new l(f),f.forceBlocks=new d(f),f.enterKey=new c(f),f.editorCommands=new u(f),f.fire("PreInit"),h.browser_spellcheck||h.gecko_spellcheck||(g.body.spellcheck=!1,O.setAttrib(n,"spellcheck","false")),f.fire("PostRender"),f.quirks=v(f),h.directionality&&(n.dir=h.directionality),h.nowrap&&(n.style.whiteSpace="nowrap"),h.protect&&f.on("BeforeSetContent",function(e){k(h.protect,function(t){e.content=e.content.replace(t,function(e){return"<!--mce:protected "+escape(e)+"-->"})})}),f.on("SetContent",function(){f.addVisual(f.getBody())}),h.padd_empty_editor&&f.on("PostProcess",function(e){e.content=e.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")}),f.load({initial:!0,format:"html"}),f.startContent=f.getContent({format:"raw"}),f.initialized=!0,f.bindPendingEventDelegates(),f.fire("init"),f.focus(!0),f.nodeChanged({initial:!0}),f.execCallback("init_instance_callback",f),f.contentStyles.length>0&&(r="",k(f.contentStyles,function(e){r+=e+"\r\n"}),f.dom.addStyle(r)),k(f.contentCSS,function(e){f.loadedCSS[e]||(f.dom.loadCSS(e),f.loadedCSS[e]=!0)}),h.auto_focus&&setTimeout(function(){var e=f.editorManager.get(h.auto_focus);e.selection.select(e.getBody(),1),e.selection.collapse(1),e.getBody().focus(),e.getWin().focus()},100),m=g=n=null},focus:function(e){var t,n,i,o,r=this,a=r.selection,s=r.settings.content_editable,l=r.getDoc();if(!e){if(n=a.getRng(),n.item&&(i=n.item(0)),r._refreshContentEditable(),s||(T.opera||r.getBody().focus(),r.getWin().focus()),A||s){if(o=r.getBody(),o.setActive)try{o.setActive()}catch(c){o.focus()}else o.focus();s&&a.normalize()}i&&i.ownerDocument==l&&(n=l.body.createControlRange(),n.addElement(i),n.select())}r.editorManager.activeEditor!=r&&((t=r.editorManager.activeEditor)&&t.fire("deactivate",{relatedTarget:r}),r.fire("activate",{relatedTarget:t})),r.editorManager.activeEditor=r},execCallback:function(e){var t,n=this,i=n.settings[e];if(i)return n.callbackLookup&&(t=n.callbackLookup[e])&&(i=t.func,t=t.scope),"string"==typeof i&&(t=i.replace(/\.\w+$/,""),t=t?S(t):0,i=S(i),n.callbackLookup=n.callbackLookup||{},n.callbackLookup[e]={func:i,scope:t}),i.apply(t||n,Array.prototype.slice.call(arguments,1))},translate:function(e){var t=this.settings.language||"en",n=this.editorManager.i18n;return e?n.data[t+"."+e]||e.replace(/\{\#([^\}]+)\}/g,function(e,i){return n.data[t+"."+i]||"{#"+i+"}"}):""},getLang:function(e,n){return this.editorManager.i18n.data[(this.settings.language||"en")+"."+e]||(n!==t?n:"{#"+e+"}")},getParam:function(e,t,n){var i,o=e in this.settings?this.settings[e]:t;return"hash"===n?(i={},"string"==typeof o?k(o.indexOf("=")>0?o.split(/[;,](?![^=;,]*(?:[;,]|$))/):o.split(","),function(e){e=e.split("="),e.length>1?i[w(e[0])]=w(e[1]):i[w(e[0])]=w(e)}):i=o,i):o},nodeChanged:function(){var e,t,n,i=this,o=i.selection;!i.initialized||i.settings.disable_nodechange||i.settings.readonly||(n=i.getBody(),e=o.getStart()||n,e=L&&e.ownerDocument!=i.getDoc()?i.getBody():e,"IMG"==e.nodeName&&o.isCollapsed()&&(e=e.parentNode),t=[],i.dom.getParent(e,function(e){return e===n?!0:void t.push(e)}),i.fire("NodeChange",{element:e,parents:t}))},addButton:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),t.text||t.icon||(t.icon=e),n.buttons=n.buttons||{},t.tooltip=t.tooltip||t.title,n.buttons[e]=t},addMenuItem:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),n.menuItems=n.menuItems||{},n.menuItems[e]=t},addCommand:function(e,t,n){this.execCommands[e]={func:t,scope:n||this}},addQueryStateHandler:function(e,t,n){this.queryStateCommands[e]={func:t,scope:n||this}},addQueryValueHandler:function(e,t,n){this.queryValueCommands[e]={func:t,scope:n||this}},addShortcut:function(e,t,n,i){this.shortcuts.add(e,t,n,i)},execCommand:function(e,t,n,i){var o,r=this,a=0;if(/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(e)||i&&i.skip_focus||r.focus(),i=_({},i),i=r.fire("BeforeExecCommand",{command:e,ui:t,value:n}),i.isDefaultPrevented())return!1;if((o=r.execCommands[e])&&o.func.call(o.scope,t,n)!==!0)return r.fire("ExecCommand",{command:e,ui:t,value:n}),!0;if(k(r.plugins,function(i){return i.execCommand&&i.execCommand(e,t,n)?(r.fire("ExecCommand",{command:e,ui:t,value:n}),a=!0,!1):void 0}),a)return a;if(r.theme&&r.theme.execCommand&&r.theme.execCommand(e,t,n))return r.fire("ExecCommand",{command:e,ui:t,value:n}),!0;if(r.editorCommands.execCommand(e,t,n))return r.fire("ExecCommand",{command:e,ui:t,value:n}),!0;try{a=r.getDoc().execCommand(e,t,n)}catch(s){}return a?(r.fire("ExecCommand",{command:e,ui:t,value:n}),!0):!1},queryCommandState:function(e){var t,n,i=this;if(!i._isHidden()){if((t=i.queryStateCommands[e])&&(n=t.func.call(t.scope),n===!0||n===!1))return n;if(n=i.editorCommands.queryCommandState(e),-1!==n)return n;try{return i.getDoc().queryCommandState(e)}catch(o){}}},queryCommandValue:function(e){var n,i,o=this;if(!o._isHidden()){if((n=o.queryValueCommands[e])&&(i=n.func.call(n.scope),i!==!0))return i;if(i=o.editorCommands.queryCommandValue(e),i!==t)return i;try{return o.getDoc().queryCommandValue(e)}catch(r){}}},show:function(){var e=this;e.hidden&&(e.hidden=!1,e.inline?e.getBody().contentEditable=!0:(O.show(e.getContainer()),O.hide(e.id)),e.load(),e.fire("show"))},hide:function(){var e=this,t=e.getDoc();e.hidden||(L&&t&&!e.inline&&t.execCommand("SelectAll"),e.save(),e.inline?(e.getBody().contentEditable=!1,e==e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(O.hide(e.getContainer()),O.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.fire("hide"))},isHidden:function(){return!!this.hidden},setProgressState:function(e,t){this.fire("ProgressState",{state:e,time:t})},load:function(e){var n,i=this,o=i.getElement();return o?(e=e||{},e.load=!0,n=i.setContent(o.value!==t?o.value:o.innerHTML,e),e.element=o,e.no_events||i.fire("LoadContent",e),e.element=o=null,n):void 0},save:function(e){var t,n,i=this,o=i.getElement();if(o&&i.initialized)return e=e||{},e.save=!0,e.element=o,t=e.content=i.getContent(e),e.no_events||i.fire("SaveContent",e),t=e.content,/TEXTAREA|INPUT/i.test(o.nodeName)?o.value=t:(i.inline||(o.innerHTML=t),(n=O.getParent(i.id,"form"))&&k(n.elements,function(e){return e.name==i.id?(e.value=t,!1):void 0})),e.element=o=null,e.set_dirty!==!1&&(i.isNotDirty=!0),t},setContent:function(e,t){var n,i=this,o=i.getBody();return t=t||{},t.format=t.format||"html",t.set=!0,t.content=e,t.no_events||i.fire("BeforeSetContent",t),e=t.content,0===e.length||/^\s+$/.test(e)?(n=i.settings.forced_root_block,n&&i.schema.isValidChild(o.nodeName.toLowerCase(),n.toLowerCase())?(e=L&&11>L?"":'<br data-mce-bogus="1">',e=i.dom.createHTML(n,i.settings.forced_root_block_attrs,e)):L||(e='<br data-mce-bogus="1">'),o.innerHTML=e,i.fire("SetContent",t)):("raw"!==t.format&&(e=new r({},i.schema).serialize(i.parser.parse(e,{isRootContent:!0}))),t.content=w(e),i.dom.setHTML(o,t.content),t.no_events||i.fire("SetContent",t)),t.content},getContent:function(e){var t,n=this,i=n.getBody();return e=e||{},e.format=e.format||"html",e.get=!0,e.getInner=!0,e.no_events||n.fire("BeforeGetContent",e),t="raw"==e.format?i.innerHTML:"text"==e.format?i.innerText||i.textContent:n.serializer.serialize(i,e),"text"!=e.format?e.content=w(t):e.content=t,e.no_events||n.fire("GetContent",e),e.content},insertContent:function(e,t){t&&(e=_({content:e},t)),this.execCommand("mceInsertContent",!1,e)},isDirty:function(){return!this.isNotDirty},getContainer:function(){var e=this;return e.container||(e.container=O.get(e.editorContainer||e.id+"_parent")),e.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return O.get(this.settings.content_element||this.id)},getWin:function(){var e,t=this;return t.contentWindow||(e=O.get(t.id+"_ifr"),e&&(t.contentWindow=e.contentWindow)),t.contentWindow},getDoc:function(){var e,t=this;return t.contentDocument||(e=t.getWin(),e&&(t.contentDocument=e.document)),t.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(e,t,n){var i=this,o=i.settings;return o.urlconverter_callback?i.execCallback("urlconverter_callback",e,n,!0,t):!o.convert_urls||n&&"LINK"==n.nodeName||0===e.indexOf("file:")||0===e.length?e:o.relative_urls?i.documentBaseURI.toRelative(e):e=i.documentBaseURI.toAbsolute(e,o.remove_script_host)},addVisual:function(e){var n,i=this,o=i.settings,r=i.dom;e=e||i.getBody(),i.hasVisual===t&&(i.hasVisual=o.visual),k(r.select("table,a",e),function(e){var t;switch(e.nodeName){case"TABLE":return n=o.visual_table_class||"mce-item-table",t=r.getAttrib(e,"border"),void(t&&"0"!=t||(i.hasVisual?r.addClass(e,n):r.removeClass(e,n)));case"A":return void(r.getAttrib(e,"href",!1)||(t=r.getAttrib(e,"name")||e.id,n=o.visual_anchor_class||"mce-item-anchor",t&&(i.hasVisual?r.addClass(e,n):r.removeClass(e,n))))}}),i.fire("VisualAid",{element:e,hasVisual:i.hasVisual})},remove:function(){var e=this;if(!e.removed){e.removed=1,e.save(),e.hasHiddenInput&&O.remove(e.getElement().nextSibling),e.inline||(L&&10>L&&e.getDoc().execCommand("SelectAll",!1,null),O.setStyle(e.id,"display",e.orgDisplay),e.getBody().onload=null,N.unbind(e.getWin()),N.unbind(e.getDoc()));var t=e.getContainer();N.unbind(e.getBody()),N.unbind(t),e.fire("remove"),e.editorManager.remove(e),O.remove(t),e.destroy()}},destroy:function(e){var t,n=this;if(!n.destroyed){if(!e&&!n.removed)return void n.remove();e&&A&&(N.unbind(n.getDoc()),N.unbind(n.getWin()),N.unbind(n.getBody())),e||(n.editorManager.off("beforeunload",n._beforeUnload),n.theme&&n.theme.destroy&&n.theme.destroy(),n.selection.destroy(),n.dom.destroy()),t=n.formElement,t&&(t._mceOldSubmit&&(t.submit=t._mceOldSubmit,t._mceOldSubmit=null),O.unbind(t,"submit reset",n.formEventDelegate)),n.contentAreaContainer=n.formElement=n.container=n.editorContainer=null,n.settings.content_element=n.bodyElement=n.contentDocument=n.contentWindow=null,n.selection&&(n.selection=n.selection.win=n.selection.dom=n.selection.dom.doc=null),n.destroyed=1}},_refreshContentEditable:function(){var e,t,n=this;n._isHidden()&&(e=n.getBody(),t=e.parentNode,t.removeChild(e),t.appendChild(e),e.focus())},_isHidden:function(){var e;return A?(e=this.selection.getSel(),!e||!e.rangeCount||0===e.rangeCount):0}},_(I.prototype,b),I}),/**
 * I18n.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/util/I18n",[],function(){var e={};return{rtl:!1,add:function(t,n){for(var i in n)e[i]=n[i];this.rtl=this.rtl||"rtl"===e._dir},translate:function(t){if("undefined"==typeof t)return t;if("string"!=typeof t&&t.raw)return t.raw;if(t.push){var n=t.slice(1);t=(e[t[0]]||t[0]).replace(/\{([^\}]+)\}/g,function(e,t){return n[t]})}return e[t]||t},data:e}}),/**
 * FocusManager.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/FocusManager",["tinymce/dom/DOMUtils","tinymce/Env"],function(e,t){function n(e){function s(){try{return document.activeElement}catch(e){return document.body}}function l(e,t){if(t&&t.startContainer){if(!e.isChildOf(t.startContainer,e.getRoot())||!e.isChildOf(t.endContainer,e.getRoot()))return;return{startContainer:t.startContainer,startOffset:t.startOffset,endContainer:t.endContainer,endOffset:t.endOffset}}return t}function c(e,t){var n;return t.startContainer?(n=e.getDoc().createRange(),n.setStart(t.startContainer,t.startOffset),n.setEnd(t.endContainer,t.endOffset)):n=t,n}function d(e){return!!a.getParent(e,n.isEditorUIElement)}function u(n){var u=n.editor;u.on("init",function(){(u.inline||t.ie)&&(u.on("nodechange keyup",function(){var e=document.activeElement;e&&e.id==u.id+"_ifr"&&(e=u.getBody()),u.dom.isChildOf(e,u.getBody())&&(u.lastRng=u.selection.getRng())}),t.webkit&&!i&&(i=function(){var t=e.activeEditor;if(t&&t.selection){var n=t.selection.getRng();n&&!n.collapsed&&(u.lastRng=n)}},a.bind(document,"selectionchange",i)))}),u.on("setcontent",function(){u.lastRng=null}),u.on("mousedown",function(){u.selection.lastFocusBookmark=null}),u.on("focusin",function(){var t=e.focusedEditor;u.selection.lastFocusBookmark&&(u.selection.setRng(c(u,u.selection.lastFocusBookmark)),u.selection.lastFocusBookmark=null),t!=u&&(t&&t.fire("blur",{focusedEditor:u}),e.activeEditor=u,e.focusedEditor=u,u.fire("focus",{blurredEditor:t}),u.focus(!0)),u.lastRng=null}),u.on("focusout",function(){window.setTimeout(function(){var t=e.focusedEditor;d(s())||t!=u||(u.fire("blur",{focusedEditor:null}),e.focusedEditor=null,u.selection&&(u.selection.lastFocusBookmark=null))},0)}),o||(o=function(t){var n=e.activeEditor;n&&t.target.ownerDocument==document&&(n.selection&&(n.selection.lastFocusBookmark=l(n.dom,n.lastRng)),d(t.target)||e.focusedEditor!=n||(n.fire("blur",{focusedEditor:null}),e.focusedEditor=null))},a.bind(document,"focusin",o)),u.inline&&!r&&(r=function(t){var n=e.activeEditor;if(n.inline&&!n.dom.isChildOf(t.target,n.getBody())){var i=n.selection.getRng();i.collapsed||(n.lastRng=i)}},a.bind(document,"mouseup",r))}function f(t){e.focusedEditor==t.editor&&(e.focusedEditor=null),e.activeEditor||(a.unbind(document,"selectionchange",i),a.unbind(document,"focusin",o),a.unbind(document,"mouseup",r),i=o=r=null)}e.on("AddEditor",u),e.on("RemoveEditor",f)}var i,o,r,a=e.DOM;return n.isEditorUIElement=function(e){return-1!==e.className.toString().indexOf("mce-")},n}),/**
 * EditorManager.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/EditorManager",["tinymce/Editor","tinymce/dom/DOMUtils","tinymce/util/URI","tinymce/Env","tinymce/util/Tools","tinymce/util/Observable","tinymce/util/I18n","tinymce/FocusManager"],function(e,t,n,i,o,r,a,s){function l(e){var t,n=u.editors;delete n[e.id];for(var i=0;i<n.length;i++)if(n[i]==e){n.splice(i,1),t=!0;break}return u.activeEditor==e&&(u.activeEditor=n[0]),u.focusedEditor==e&&(u.focusedEditor=null),t}function c(e){return e&&!(e.getContainer()||e.getBody()).parentNode&&(l(e),e.destroy(!0),e=null),e}var d,u,f=t.DOM,h=o.explode,m=o.each,g=o.extend,p=0;return u={majorVersion:"4",minorVersion:"0.28",releaseDate:"2014-05-27",editors:[],i18n:a,activeEditor:null,setup:function(){var e,t,i,o,r=this,a="";if(t=document.location.href,/^[^:]+:\/\/[^\/]+\//.test(t)&&(t=t.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(t)||(t+="/")),i=window.tinymce||window.tinyMCEPreInit)e=i.base||i.baseURL,a=i.suffix;else{for(var l=document.getElementsByTagName("script"),c=0;c<l.length;c++)if(o=l[c].src,/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(o)){-1!=o.indexOf(".min")&&(a=".min"),e=o.substring(0,o.lastIndexOf("/"));break}!e&&document.currentScript&&(o=document.currentScript.src,-1!=o.indexOf(".min")&&(a=".min"),e=o.substring(0,o.lastIndexOf("/")))}r.baseURL=new n(t).toAbsolute(e),r.documentBaseURL=t,r.baseURI=new n(r.baseURL),r.suffix=a,r.focusManager=new s(r)},init:function(t){function n(e){var t=e.id;return t||(t=e.name,t=t&&!f.get(t)?e.name:f.uniqueId(),e.setAttribute("id",t)),t}function i(t,n){if(!c(l.get(t))){var i=new e(t,n,l);d.push(i),i.render()}}function o(e,t,n){var i=e[t];if(i)return i.apply(n||this,Array.prototype.slice.call(arguments,2))}function r(e,t){return t.constructor===RegExp?t.test(e.className):f.hasClass(e,t)}function a(){var c,u;if(f.unbind(window,"ready",a),o(t,"onpageload"),t.types)return void m(t.types,function(e){m(f.select(e.selector),function(o){i(n(o),g({},t,e))})});if(t.selector)return void m(f.select(t.selector),function(e){i(n(e),t)});switch(t.mode){case"exact":c=t.elements||"",c.length>0&&m(h(c),function(n){f.get(n)?(s=new e(n,t,l),d.push(s),s.render()):m(document.forms,function(e){m(e.elements,function(e){e.name===n&&(n="mce_editor_"+p++,f.setAttrib(e,"id",n),i(n,t))})})});break;case"textareas":case"specific_textareas":m(f.select("textarea"),function(e){t.editor_deselector&&r(e,t.editor_deselector)||(!t.editor_selector||r(e,t.editor_selector))&&i(n(e),t)})}t.oninit&&(c=u=0,m(d,function(e){u++,e.initialized?c++:e.on("init",function(){c++,c==u&&o(t,"oninit")}),c==u&&o(t,"oninit")}))}var s,l=this,d=[];l.settings=t,f.bind(window,"ready",a)},get:function(e){return arguments.length?e in this.editors?this.editors[e]:null:this.editors},add:function(e){var t=this,n=t.editors;return n[e.id]=e,n.push(e),t.activeEditor=e,t.fire("AddEditor",{editor:e}),d||(d=function(){t.fire("BeforeUnload")},f.bind(window,"beforeunload",d)),e},createEditor:function(t,n){return this.add(new e(t,n,this))},remove:function(e){var t,n,i=this,o=i.editors;{if(e)return"string"==typeof e?(e=e.selector||e,void m(f.select(e),function(e){i.remove(o[e.id])})):(n=e,o[n.id]?(l(n)&&i.fire("RemoveEditor",{editor:n}),o.length||f.unbind(window,"beforeunload",d),n.remove(),n):null);for(t=o.length-1;t>=0;t--)i.remove(o[t])}},execCommand:function(t,n,i){var o=this,r=o.get(i);switch(t){case"mceAddEditor":return o.get(i)||new e(i,o.settings,o).render(),!0;case"mceRemoveEditor":return r&&r.remove(),!0;case"mceToggleEditor":return r?(r.isHidden()?r.show():r.hide(),!0):(o.execCommand("mceAddEditor",0,i),!0)}return o.activeEditor?o.activeEditor.execCommand(t,n,i):!1},triggerSave:function(){m(this.editors,function(e){e.save()})},addI18n:function(e,t){a.add(e,t)},translate:function(e){return a.translate(e)}},g(u,r),u.setup(),window.tinymce=window.tinyMCE=u,u}),/**
 * LegacyInput.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/LegacyInput",["tinymce/EditorManager","tinymce/util/Tools"],function(e,t){var n=t.each,i=t.explode;e.on("AddEditor",function(e){var t=e.editor;t.on("preInit",function(){function e(e,t){n(t,function(t,n){t&&s.setStyle(e,n,t)}),s.rename(e,"span")}function o(e){s=t.dom,l.convert_fonts_to_spans&&n(s.select("font,u,strike",e.node),function(e){r[e.nodeName.toLowerCase()](s,e)})}var r,a,s,l=t.settings;l.inline_styles&&(a=i(l.font_size_legacy_values),r={font:function(t,n){e(n,{backgroundColor:n.style.backgroundColor,color:n.color,fontFamily:n.face,fontSize:a[parseInt(n.size,10)-1]})},u:function(t,n){e(n,{textDecoration:"underline"})},strike:function(t,n){e(n,{textDecoration:"line-through"})}},t.on("PreProcess SetContent",o))})})}),/**
 * XHR.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/util/XHR",[],function(){return{send:function(e){function t(){!e.async||4==n.readyState||i++>1e4?(e.success&&1e4>i&&200==n.status?e.success.call(e.success_scope,""+n.responseText,n,e):e.error&&e.error.call(e.error_scope,i>1e4?"TIMED_OUT":"GENERAL",n,e),n=null):setTimeout(t,10)}var n,i=0;if(e.scope=e.scope||this,e.success_scope=e.success_scope||e.scope,e.error_scope=e.error_scope||e.scope,e.async=e.async===!1?!1:!0,e.data=e.data||"",n=new XMLHttpRequest){if(n.overrideMimeType&&n.overrideMimeType(e.content_type),n.open(e.type||(e.data?"POST":"GET"),e.url,e.async),e.content_type&&n.setRequestHeader("Content-Type",e.content_type),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.send(e.data),!e.async)return t();setTimeout(t,10)}}}}),/**
 * JSON.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/util/JSON",[],function(){function e(t,n){var i,o,r,a;if(n=n||'"',null===t)return"null";if(r=typeof t,"string"==r)return o="\bb	t\nn\ff\rr\"\"''\\\\",n+t.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(e,t){return'"'===n&&"'"===e?e:(i=o.indexOf(t),i+1?"\\"+o.charAt(i+1):(e=t.charCodeAt().toString(16),"\\u"+"0000".substring(e.length)+e))})+n;if("object"==r){if(t.hasOwnProperty&&"[object Array]"===Object.prototype.toString.call(t)){for(i=0,o="[";i<t.length;i++)o+=(i>0?",":"")+e(t[i],n);return o+"]"}o="{";for(a in t)t.hasOwnProperty(a)&&(o+="function"!=typeof t[a]?(o.length>1?","+n:n)+a+n+":"+e(t[a],n):"");return o+"}"}return""+t}return{serialize:e,parse:function(e){try{return window[String.fromCharCode(101)+"val"]("("+e+")")}catch(t){}}}}),/**
 * JSONRequest.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/util/JSONRequest",["tinymce/util/JSON","tinymce/util/XHR","tinymce/util/Tools"],function(e,t,n){function i(e){this.settings=o({},e),this.count=0}var o=n.extend;return i.sendRPC=function(e){return(new i).send(e)},i.prototype={send:function(n){var i=n.error,r=n.success;n=o(this.settings,n),n.success=function(t,o){t=e.parse(t),"undefined"==typeof t&&(t={error:"JSON Parse error."}),t.error?i.call(n.error_scope||n.scope,t.error,o):r.call(n.success_scope||n.scope,t.result)},n.error=function(e,t){i&&i.call(n.error_scope||n.scope,e,t)},n.data=e.serialize({id:n.id||"c"+this.count++,method:n.method,params:n.params}),n.content_type="application/json",t.send(n)}},i}),/**
 * JSONP.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/util/JSONP",["tinymce/dom/DOMUtils"],function(e){return{callbacks:{},count:0,send:function(n){var i=this,o=e.DOM,r=n.count!==t?n.count:i.count,a="tinymce_jsonp_"+r;i.callbacks[r]=function(e){o.remove(a),delete i.callbacks[r],n.callback(e)},o.add(o.doc.body,"script",{id:a,src:n.url,type:"text/javascript"}),i.count++}}}),/**
 * LocalStorage.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/util/LocalStorage",[],function(){function e(){s=[];for(var e in a)s.push(e);o.length=s.length}function n(){function n(e){var n,i;return i=e!==t?d+e:o.indexOf(",",d),-1===i||i>o.length?null:(n=o.substring(d,i),d=i+1,n)}var i,o,s,d=0;if(a={},c){r.load(l),o=r.getAttribute(l)||"";do{var u=n();if(null===u)break;if(i=n(parseInt(u,32)||0),null!==i){if(u=n(),null===u)break;s=n(parseInt(u,32)||0),i&&(a[i]=s)}}while(null!==i);e()}}function i(){var t,n="";if(c){for(var i in a)t=a[i],n+=(n?",":"")+i.length.toString(32)+","+i+","+t.length.toString(32)+","+t;r.setAttribute(l,n);try{r.save(l)}catch(o){}e()}}var o,r,a,s,l,c;try{if(window.localStorage)return localStorage}catch(d){}return l="tinymce",r=document.documentElement,c=!!r.addBehavior,c&&r.addBehavior("#default#userData"),o={key:function(e){return s[e]},getItem:function(e){return e in a?a[e]:null},setItem:function(e,t){a[e]=""+t,i()},removeItem:function(e){delete a[e],i()},clear:function(){a={},i()}},n(),o}),/**
 * Compat.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/Compat",["tinymce/dom/DOMUtils","tinymce/dom/EventUtils","tinymce/dom/ScriptLoader","tinymce/AddOnManager","tinymce/util/Tools","tinymce/Env"],function(e,t,n,i,o,r){var a=window.tinymce;return a.DOM=e.DOM,a.ScriptLoader=n.ScriptLoader,a.PluginManager=i.PluginManager,a.ThemeManager=i.ThemeManager,a.dom=a.dom||{},a.dom.Event=t.Event,o.each(o,function(e,t){a[t]=e}),o.each("isOpera isWebKit isIE isGecko isMac".split(" "),function(e){a[e]=r[e.substr(2).toLowerCase()]}),{}}),/**
 * Layout.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/Layout",["tinymce/util/Class","tinymce/util/Tools"],function(e,t){return e.extend({Defaults:{firstControlClass:"first",lastControlClass:"last"},init:function(e){this.settings=t.extend({},this.Defaults,e)},preRender:function(e){e.addClass(this.settings.containerClass,"body")},applyClasses:function(e){var t,n,i,o=this,r=o.settings;t=e.items().filter(":visible"),n=r.firstControlClass,i=r.lastControlClass,t.each(function(e){e.removeClass(n).removeClass(i),r.controlClass&&e.addClass(r.controlClass)}),t.eq(0).addClass(n),t.eq(-1).addClass(i)},renderHtml:function(e){var t,n=this,i=n.settings,o="";return t=e.items(),t.eq(0).addClass(i.firstControlClass),t.eq(-1).addClass(i.lastControlClass),t.each(function(e){i.controlClass&&e.addClass(i.controlClass),o+=e.renderHtml()}),o},recalc:function(){},postRender:function(){}})}),/**
 * AbsoluteLayout.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/AbsoluteLayout",["tinymce/ui/Layout"],function(e){return e.extend({Defaults:{containerClass:"abs-layout",controlClass:"abs-layout-item"},recalc:function(e){e.items().filter(":visible").each(function(e){var t=e.settings;e.layoutRect({x:t.x,y:t.y,w:t.w,h:t.h}),e.recalc&&e.recalc()})},renderHtml:function(e){return'<div id="'+e._id+'-absend" class="'+e.classPrefix+'abs-end"></div>'+this._super(e)}})}),/**
 * Tooltip.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/Tooltip",["tinymce/ui/Control","tinymce/ui/Movable"],function(e,t){return e.extend({Mixins:[t],Defaults:{classes:"widget tooltip tooltip-n"},text:function(e){var t=this;return"undefined"!=typeof e?(t._value=e,t._rendered&&(t.getEl().lastChild.innerHTML=t.encode(e)),t):t._value},renderHtml:function(){var e=this,t=e.classPrefix;return'<div id="'+e._id+'" class="'+e.classes()+'" role="presentation"><div class="'+t+'tooltip-arrow"></div><div class="'+t+'tooltip-inner">'+e.encode(e._text)+"</div></div>"},repaint:function(){var e,t,n=this;e=n.getEl().style,t=n._layoutRect,e.left=t.x+"px",e.top=t.y+"px",e.zIndex=131070}})}),/**
 * Widget.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/Widget",["tinymce/ui/Control","tinymce/ui/Tooltip"],function(e,t){var n,i=e.extend({init:function(e){var t=this;t._super(e),e=t.settings,t.canFocus=!0,e.tooltip&&i.tooltips!==!1&&(t.on("mouseenter",function(n){var i=t.tooltip().moveTo(-65535);if(n.control==t){var o=i.text(e.tooltip).show().testMoveRel(t.getEl(),["bc-tc","bc-tl","bc-tr"]);i.toggleClass("tooltip-n","bc-tc"==o),i.toggleClass("tooltip-nw","bc-tl"==o),i.toggleClass("tooltip-ne","bc-tr"==o),i.moveRel(t.getEl(),o)}else i.hide()}),t.on("mouseleave mousedown click",function(){t.tooltip().hide()})),t.aria("label",e.ariaLabel||e.tooltip)},tooltip:function(){return n||(n=new t({type:"tooltip"}),n.renderTo()),n},active:function(e){var t,n=this;return e!==t&&(n.aria("pressed",e),n.toggleClass("active",e)),n._super(e)},disabled:function(e){var t,n=this;return e!==t&&(n.aria("disabled",e),n.toggleClass("disabled",e)),n._super(e)},postRender:function(){var e=this,t=e.settings;e._rendered=!0,e._super(),e.parent()||!t.width&&!t.height||(e.initLayoutRect(),e.repaint()),t.autofocus&&e.focus()},remove:function(){this._super(),n&&(n.remove(),n=null)}});return i}),/**
 * Button.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/Button",["tinymce/ui/Widget"],function(e){return e.extend({Defaults:{classes:"widget btn",role:"button"},init:function(e){var t,n=this;n.on("click mousedown",function(e){e.preventDefault()}),n._super(e),t=e.size,e.subtype&&n.addClass(e.subtype),t&&n.addClass("btn-"+t)},icon:function(e){var t=this,n=t.classPrefix;if("undefined"==typeof e)return t.settings.icon;if(t.settings.icon=e,e=e?n+"ico "+n+"i-"+t.settings.icon:"",t._rendered){var i=t.getEl().firstChild,o=i.getElementsByTagName("i")[0];e?(o&&o==i.firstChild||(o=document.createElement("i"),i.insertBefore(o,i.firstChild)),o.className=e):o&&i.removeChild(o),t.text(t._text)}return t},repaint:function(){var e=this.getEl().firstChild.style;e.width=e.height="100%",this._super()},text:function(e){var t=this;if(t._rendered){var n=t.getEl().lastChild.lastChild;n&&(n.data=t.translate(e))}return t._super(e)},renderHtml:function(){var e,t=this,n=t._id,i=t.classPrefix,o=t.settings.icon;return e=t.settings.image,e?(o="none","string"!=typeof e&&(e=window.getSelection?e[0]:e[1]),e=" style=\"background-image: url('"+e+"')\""):e="",o=t.settings.icon?i+"ico "+i+"i-"+o:"",'<div id="'+n+'" class="'+t.classes()+'" tabindex="-1" aria-labelledby="'+n+'"><button role="presentation" type="button" tabindex="-1">'+(o?'<i class="'+o+'"'+e+"></i>":"")+(t._text?(o?"\xa0":"")+t.encode(t._text):"")+"</button></div>"}})}),/**
 * ButtonGroup.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/ButtonGroup",["tinymce/ui/Container"],function(e){return e.extend({Defaults:{defaultType:"button",role:"group"},renderHtml:function(){var e=this,t=e._layout;return e.addClass("btn-group"),e.preRender(),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes()+'"><div id="'+e._id+'-body">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"}})}),/**
 * Checkbox.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/Checkbox",["tinymce/ui/Widget"],function(e){return e.extend({Defaults:{classes:"checkbox",role:"checkbox",checked:!1},init:function(e){var t=this;t._super(e),t.on("click mousedown",function(e){e.preventDefault()}),t.on("click",function(e){e.preventDefault(),t.disabled()||t.checked(!t.checked())}),t.checked(t.settings.checked)},checked:function(e){var t=this;return"undefined"!=typeof e?(e?t.addClass("checked"):t.removeClass("checked"),t._checked=e,t.aria("checked",e),t):t._checked},value:function(e){return this.checked(e)},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix;return'<div id="'+t+'" class="'+e.classes()+'" unselectable="on" aria-labelledby="'+t+'-al" tabindex="-1"><i class="'+n+"ico "+n+'i-checkbox"></i><span id="'+t+'-al" class="'+n+'label">'+e.encode(e._text)+"</span></div>"}})}),/**
 * PanelButton.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/PanelButton",["tinymce/ui/Button","tinymce/ui/FloatPanel"],function(e,t){return e.extend({showPanel:function(){var e=this,n=e.settings;if(e.active(!0),e.panel)e.panel.show();else{var i=n.panel;i.type&&(i={layout:"grid",items:i}),i.role=i.role||"dialog",i.popover=!0,i.autohide=!0,i.ariaRoot=!0,e.panel=new t(i).on("hide",function(){e.active(!1)}).on("cancel",function(t){t.stopPropagation(),e.focus(),e.hidePanel()}).parent(e).renderTo(e.getContainerElm()),e.panel.fire("show"),e.panel.reflow()}e.panel.moveRel(e.getEl(),n.popoverAlign||(e.isRtl()?["bc-tr","bc-tc"]:["bc-tl","bc-tc"]))},hidePanel:function(){var e=this;e.panel&&e.panel.hide()},postRender:function(){var e=this;return e.aria("haspopup",!0),e.on("click",function(t){t.control===e&&(e.panel&&e.panel.visible()?e.hidePanel():(e.showPanel(),e.panel.focus(!!t.aria)))}),e._super()}})}),/**
 * ColorButton.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/ColorButton",["tinymce/ui/PanelButton","tinymce/dom/DOMUtils"],function(e,t){var n=t.DOM;return e.extend({init:function(e){this._super(e),this.addClass("colorbutton")},color:function(e){return e?(this._color=e,this.getEl("preview").style.backgroundColor=e,this):this._color},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,i=e.settings.icon?n+"ico "+n+"i-"+e.settings.icon:"",o=e.settings.image?" style=\"background-image: url('"+e.settings.image+"')\"":"";return'<div id="'+t+'" class="'+e.classes()+'" role="button" tabindex="-1" aria-haspopup="true"><button role="presentation" hidefocus="1" type="button" tabindex="-1">'+(i?'<i class="'+i+'"'+o+"></i>":"")+'<span id="'+t+'-preview" class="'+n+'preview"></span>'+(e._text?(i?" ":"")+e._text:"")+'</button><button type="button" class="'+n+'open" hidefocus="1" tabindex="-1"> <i class="'+n+'caret"></i></button></div>'},postRender:function(){var e=this,t=e.settings.onclick;return e.on("click",function(i){i.aria&&"down"==i.aria.key||i.control!=e||n.getParent(i.target,"."+e.classPrefix+"open")||(i.stopImmediatePropagation(),t.call(e,i))}),delete e.settings.onclick,e._super()}})}),/**
 * ComboBox.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/ComboBox",["tinymce/ui/Widget","tinymce/ui/Factory","tinymce/ui/DomUtils"],function(e,t,n){return e.extend({init:function(e){var t=this;t._super(e),t.addClass("combobox"),t.subinput=!0,t.ariaTarget="inp",e=t.settings,e.menu=e.menu||e.values,e.menu&&(e.icon="caret"),t.on("click",function(n){for(var i=n.target,o=t.getEl();i&&i!=o;)i.id&&-1!=i.id.indexOf("-open")&&(t.fire("action"),e.menu&&(t.showMenu(),n.aria&&t.menu.items()[0].focus())),i=i.parentNode}),t.on("keydown",function(e){"INPUT"==e.target.nodeName&&13==e.keyCode&&t.parents().reverse().each(function(n){return e.preventDefault(),t.fire("change"),n.hasEventListeners("submit")&&n.toJSON?(n.fire("submit",{data:n.toJSON()}),!1):void 0})}),e.placeholder&&(t.addClass("placeholder"),t.on("focusin",function(){t._hasOnChange||(n.on(t.getEl("inp"),"change",function(){t.fire("change")}),t._hasOnChange=!0),t.hasClass("placeholder")&&(t.getEl("inp").value="",t.removeClass("placeholder"))}),t.on("focusout",function(){0===t.value().length&&(t.getEl("inp").value=e.placeholder,t.addClass("placeholder"))}))},showMenu:function(){var e,n=this,i=n.settings;n.menu||(e=i.menu||[],e.length?e={type:"menu",items:e}:e.type=e.type||"menu",n.menu=t.create(e).parent(n).renderTo(n.getContainerElm()),n.fire("createmenu"),n.menu.reflow(),n.menu.on("cancel",function(e){e.control===n.menu&&n.focus()}),n.menu.on("show hide",function(e){e.control.items().each(function(e){e.active(e.value()==n.value())})}).fire("show"),n.menu.on("select",function(e){n.value(e.control.value())}),n.on("focusin",function(e){"INPUT"==e.target.tagName.toUpperCase()&&n.menu.hide()}),n.aria("expanded",!0)),n.menu.show(),n.menu.layoutRect({w:n.layoutRect().w}),n.menu.moveRel(n.getEl(),n.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])},value:function(e){var t=this;return"undefined"!=typeof e?(t._value=e,t.removeClass("placeholder"),t._rendered&&(t.getEl("inp").value=e),t):t._rendered?(e=t.getEl("inp").value,e!=t.settings.placeholder?e:""):t._value},disabled:function(e){var t=this;return t._rendered&&"undefined"!=typeof e&&(t.getEl("inp").disabled=e),t._super(e)},focus:function(){this.getEl("inp").focus()},repaint:function(){var e,t,i=this,o=i.getEl(),r=i.getEl("open"),a=i.layoutRect();e=r?a.w-n.getSize(r).width-10:a.w-10;var s=document;return s.all&&(!s.documentMode||s.documentMode<=8)&&(t=i.layoutRect().h-2+"px"),n.css(o.firstChild,{width:e,lineHeight:t}),i._super(),i},postRender:function(){var e=this;return n.on(this.getEl("inp"),"change",function(){e.fire("change")}),e._super()},remove:function(){n.off(this.getEl("inp")),this._super()},renderHtml:function(){var e,t,n=this,i=n._id,o=n.settings,r=n.classPrefix,a=o.value||o.placeholder||"",s="",l="";return"spellcheck"in o&&(l+=' spellcheck="'+o.spellcheck+'"'),o.maxLength&&(l+=' maxlength="'+o.maxLength+'"'),o.size&&(l+=' size="'+o.size+'"'),o.subtype&&(l+=' type="'+o.subtype+'"'),n.disabled()&&(l+=' disabled="disabled"'),e=o.icon,e&&"caret"!=e&&(e=r+"ico "+r+"i-"+o.icon),t=n._text,(e||t)&&(s='<div id="'+i+'-open" class="'+r+"btn "+r+'open" tabIndex="-1" role="button"><button id="'+i+'-action" type="button" hidefocus="1" tabindex="-1">'+("caret"!=e?'<i class="'+e+'"></i>':'<i class="'+r+'caret"></i>')+(t?(e?" ":"")+t:"")+"</button></div>",n.addClass("has-open")),'<div id="'+i+'" class="'+n.classes()+'"><input id="'+i+'-inp" class="'+r+"textbox "+r+'placeholder" value="'+a+'" hidefocus="1"'+l+" />"+s+"</div>"}})}),/**
 * Path.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/Path",["tinymce/ui/Widget"],function(e){return e.extend({init:function(e){var t=this;e.delimiter||(e.delimiter="\xbb"),t._super(e),t.addClass("path"),t.canFocus=!0,t.on("click",function(e){var n,i=e.target;(n=i.getAttribute("data-index"))&&t.fire("select",{value:t.data()[n],index:n})})},focus:function(){var e=this;return e.getEl().firstChild.focus(),e},data:function(e){var t=this;return"undefined"!=typeof e?(t._data=e,t.update(),t):t._data},update:function(){this.innerHtml(this._getPathHtml())},postRender:function(){var e=this;e._super(),e.data(e.settings.data)},renderHtml:function(){var e=this;return'<div id="'+e._id+'" class="'+e.classes()+'">'+e._getPathHtml()+"</div>"},_getPathHtml:function(){var e,t,n=this,i=n._data||[],o="",r=n.classPrefix;for(e=0,t=i.length;t>e;e++)o+=(e>0?'<div class="'+r+'divider" aria-hidden="true"> '+n.settings.delimiter+" </div>":"")+'<div role="button" class="'+r+"path-item"+(e==t-1?" "+r+"last":"")+'" data-index="'+e+'" tabindex="-1" id="'+n._id+"-"+e+'" aria-level="'+e+'">'+i[e].name+"</div>";return o||(o='<div class="'+r+'path-item">\xa0</div>'),o}})}),/**
 * ElementPath.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/ElementPath",["tinymce/ui/Path","tinymce/EditorManager"],function(e,t){return e.extend({postRender:function(){function e(e){if(1===e.nodeType){if("BR"==e.nodeName||e.getAttribute("data-mce-bogus"))return!0;if("bookmark"===e.getAttribute("data-mce-type"))return!0}return!1}var n=this,i=t.activeEditor;return n.on("select",function(t){var n,o=[],r=i.getBody();for(i.focus(),n=i.selection.getStart();n&&n!=r;)e(n)||o.push(n),n=n.parentNode;i.selection.select(o[o.length-1-t.index]),i.nodeChanged()}),i.on("nodeChange",function(t){for(var o=[],r=t.parents,a=r.length;a--;)if(1==r[a].nodeType&&!e(r[a])){var s=i.fire("ResolveName",{name:r[a].nodeName.toLowerCase(),target:r[a]});o.push({name:s.name})}n.data(o)}),n._super()}})}),/**
 * FormItem.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/FormItem",["tinymce/ui/Container"],function(e){return e.extend({Defaults:{layout:"flex",align:"center",defaults:{flex:1}},renderHtml:function(){var e=this,t=e._layout,n=e.classPrefix;return e.addClass("formitem"),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes()+'" hidefocus="1" tabindex="-1">'+(e.settings.title?'<div id="'+e._id+'-title" class="'+n+'title">'+e.settings.title+"</div>":"")+'<div id="'+e._id+'-body" class="'+e.classes("body")+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"}})}),/**
 * Form.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/Form",["tinymce/ui/Container","tinymce/ui/FormItem"],function(e,t){return e.extend({Defaults:{containerCls:"form",layout:"flex",direction:"column",align:"stretch",flex:1,padding:20,labelGap:30,spacing:10,callbacks:{submit:function(){this.submit()}}},preRender:function(){var e=this,n=e.items();n.each(function(n){var i,o=n.settings.label;o&&(i=new t({layout:"flex",autoResize:"overflow",defaults:{flex:1},items:[{type:"label",id:n._id+"-l",text:o,flex:0,forId:n._id,disabled:n.disabled()}]}),i.type="formitem",n.aria("labelledby",n._id+"-l"),"undefined"==typeof n.settings.flex&&(n.settings.flex=1),e.replace(n,i),i.add(n))})},recalcLabels:function(){var e,t,n,i=this,o=0,r=[];if(i.settings.labelGapCalc!==!1)for(n="children"==i.settings.labelGapCalc?i.find("formitem"):i.items(),n.filter("formitem").each(function(e){var t=e.items()[0],n=t.getEl().clientWidth;o=n>o?n:o,r.push(t)}),t=i.settings.labelGap||0,e=r.length;e--;)r[e].settings.minWidth=o+t},visible:function(e){var t=this._super(e);return e===!0&&this._rendered&&this.recalcLabels(),t},submit:function(){return this.fire("submit",{data:this.toJSON()})},postRender:function(){var e=this;e._super(),e.recalcLabels(),e.fromJSON(e.settings.data)}})}),/**
 * FieldSet.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/FieldSet",["tinymce/ui/Form"],function(e){return e.extend({Defaults:{containerCls:"fieldset",layout:"flex",direction:"column",align:"stretch",flex:1,padding:"25 15 5 15",labelGap:30,spacing:10,border:1},renderHtml:function(){var e=this,t=e._layout,n=e.classPrefix;return e.preRender(),t.preRender(e),'<fieldset id="'+e._id+'" class="'+e.classes()+'" hidefocus="1" tabindex="-1">'+(e.settings.title?'<legend id="'+e._id+'-title" class="'+n+'fieldset-title">'+e.settings.title+"</legend>":"")+'<div id="'+e._id+'-body" class="'+e.classes("body")+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></fieldset>"}})}),/**
 * FilePicker.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/FilePicker",["tinymce/ui/ComboBox","tinymce/util/Tools"],function(e,t){return e.extend({init:function(e){var n,i,o=this,r=tinymce.activeEditor;e.spellcheck=!1,i=r.settings.file_browser_callback_types,i&&(i=t.makeMap(i,/[, ]/)),n=r.settings.file_browser_callback,!n||i&&!i[e.filetype]||(e.icon="browse",e.onaction=function(){n(o.getEl("inp").id,o.getEl("inp").value,e.filetype,window)}),o._super(e)}})}),/**
 * FitLayout.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/FitLayout",["tinymce/ui/AbsoluteLayout"],function(e){return e.extend({recalc:function(e){var t=e.layoutRect(),n=e.paddingBox();e.items().filter(":visible").each(function(e){e.layoutRect({x:n.left,y:n.top,w:t.innerW-n.right-n.left,h:t.innerH-n.top-n.bottom}),e.recalc&&e.recalc()})}})}),/**
 * FlexLayout.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/FlexLayout",["tinymce/ui/AbsoluteLayout"],function(e){return e.extend({recalc:function(e){var t,n,i,o,r,a,s,l,c,d,u,f,h,m,g,p,E,v,T,C,b,y,I,O,D,R,_,k,K,x,w,S,N,A,L,B,P,F,M=[],$=Math.max,H=Math.min;for(i=e.items().filter(":visible"),o=e.layoutRect(),r=e._paddingBox,a=e.settings,f=e.isRtl()?a.direction||"row-reversed":a.direction,s=a.align,l=e.isRtl()?a.pack||"end":a.pack,c=a.spacing||0,("row-reversed"==f||"column-reverse"==f)&&(i=i.set(i.toArray().reverse()),f=f.split("-")[0]),"column"==f?(D="y",I="h",O="minH",R="maxH",k="innerH",_="top",K="deltaH",x="contentH",L="left",N="w",w="x",S="innerW",A="minW",B="right",P="deltaW",F="contentW"):(D="x",I="w",O="minW",R="maxW",k="innerW",_="left",K="deltaW",x="contentW",L="top",N="h",w="y",S="innerH",A="minH",B="bottom",P="deltaH",F="contentH"),u=o[k]-r[_]-r[_],y=d=0,t=0,n=i.length;n>t;t++)h=i[t],m=h.layoutRect(),g=h.settings,p=g.flex,u-=n-1>t?c:0,p>0&&(d+=p,m[R]&&M.push(h),m.flex=p),u-=m[O],E=r[L]+m[A]+r[B],E>y&&(y=E);if(C={},0>u?C[O]=o[O]-u+o[K]:C[O]=o[k]-u+o[K],C[A]=y+o[P],C[x]=o[k]-u,C[F]=y,C.minW=H(C.minW,o.maxW),C.minH=H(C.minH,o.maxH),C.minW=$(C.minW,o.startMinWidth),C.minH=$(C.minH,o.startMinHeight),!o.autoResize||C.minW==o.minW&&C.minH==o.minH){for(T=u/d,t=0,n=M.length;n>t;t++)h=M[t],m=h.layoutRect(),v=m[R],E=m[O]+m.flex*T,E>v?(u-=m[R]-m[O],d-=m.flex,m.flex=0,m.maxFlexSize=v):m.maxFlexSize=0;for(T=u/d,b=r[_],C={},0===d&&("end"==l?b=u+r[_]:"center"==l?(b=Math.round(o[k]/2-(o[k]-u)/2)+r[_],0>b&&(b=r[_])):"justify"==l&&(b=r[_],c=Math.floor(u/(i.length-1)))),C[w]=r[L],t=0,n=i.length;n>t;t++)h=i[t],m=h.layoutRect(),E=m.maxFlexSize||m[O],"center"===s?C[w]=Math.round(o[S]/2-m[N]/2):"stretch"===s?(C[N]=$(m[A]||0,o[S]-r[L]-r[B]),C[w]=r[L]):"end"===s&&(C[w]=o[S]-m[N]-r.top),m.flex>0&&(E+=m.flex*T),C[I]=E,C[D]=b,h.layoutRect(C),h.recalc&&h.recalc(),b+=E+c}else if(C.w=C.minW,C.h=C.minH,e.layoutRect(C),this.recalc(e),null===e._lastRect){var z=e.parent();z&&(z._lastRect=null,z.recalc())}}})}),/**
 * FlowLayout.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/FlowLayout",["tinymce/ui/Layout"],function(e){return e.extend({Defaults:{containerClass:"flow-layout",controlClass:"flow-layout-item",endClass:"break"},recalc:function(e){e.items().filter(":visible").each(function(e){e.recalc&&e.recalc()})}})}),/**
 * FormatControls.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/FormatControls",["tinymce/ui/Control","tinymce/ui/Widget","tinymce/ui/FloatPanel","tinymce/util/Tools","tinymce/EditorManager","tinymce/Env"],function(e,t,n,i,o,r){function a(e){function t(t,n){return function(){var i=this;e.on("nodeChange",function(o){var r=e.formatter,a=null;s(o.parents,function(e){return s(t,function(t){return n?r.matchNode(e,n,{value:t.value})&&(a=t.value):r.matchNode(e,t.value)&&(a=t.value),a?!1:void 0}),a?!1:void 0}),i.value(a)})}}function i(e){e=e.replace(/;$/,"").split(";");for(var t=e.length;t--;)e[t]=e[t].split("=");return e}function o(){function t(e){var n=[];if(e)return s(e,function(e){var r={text:e.title,icon:e.icon};if(e.items)r.menu=t(e.items);else{var a=e.format||"custom"+i++;e.format||(e.name=a,o.push(e)),r.format=a,r.cmd=e.cmd}n.push(r)}),n}function n(){var n;return n=t(e.settings.style_formats_merge?e.settings.style_formats?r.concat(e.settings.style_formats):r:e.settings.style_formats||r)}var i=0,o=[],r=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"}]}];return e.on("init",function(){s(o,function(t){e.formatter.register(t.name,t)})}),{type:"menu",items:n(),onPostRender:function(t){e.fire("renderFormatsMenu",{control:t.control})},itemDefaults:{preview:!0,textStyle:function(){return this.settings.format?e.formatter.getCssText(this.settings.format):void 0},onPostRender:function(){var t=this;t.parent().on("show",function(){var n,i;n=t.settings.format,n&&(t.disabled(!e.formatter.canApply(n)),t.active(e.formatter.match(n))),i=t.settings.cmd,i&&t.active(e.queryCommandState(i))})},onclick:function(){this.settings.format&&l(this.settings.format),this.settings.cmd&&e.execCommand(this.settings.cmd)}}}}function r(t){return function(){function n(){return e.undoManager?e.undoManager[t]():!1}var i=this;t="redo"==t?"hasRedo":"hasUndo",i.disabled(!n()),e.on("Undo Redo AddUndo TypingUndo ClearUndos",function(){i.disabled(!n())})}}function a(){var t=this;e.on("VisualAid",function(e){t.active(e.hasVisual)}),t.active(e.hasVisual)}function l(t){t.control&&(t=t.control.value()),t&&e.execCommand("mceToggleFormat",!1,t)}var c;c=o(),s({bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript"},function(t,n){e.addButton(n,{tooltip:t,onPostRender:function(){var t=this;e.formatter?e.formatter.formatChanged(n,function(e){t.active(e)}):e.on("init",function(){e.formatter.formatChanged(n,function(e){t.active(e)})})},onclick:function(){l(n)}})}),s({outdent:["Decrease indent","Outdent"],indent:["Increase indent","Indent"],cut:["Cut","Cut"],copy:["Copy","Copy"],paste:["Paste","Paste"],help:["Help","mceHelp"],selectall:["Select all","SelectAll"],hr:["Insert horizontal rule","InsertHorizontalRule"],removeformat:["Clear formatting","RemoveFormat"],visualaid:["Visual aids","mceToggleVisualAid"],newdocument:["New document","mceNewDocument"]},function(t,n){e.addButton(n,{tooltip:t[0],cmd:t[1]})}),s({blockquote:["Blockquote","mceBlockQuote"],numlist:["Numbered list","InsertOrderedList"],bullist:["Bullet list","InsertUnorderedList"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],alignleft:["Align left","JustifyLeft"],aligncenter:["Align center","JustifyCenter"],alignright:["Align right","JustifyRight"],alignjustify:["Justify","JustifyFull"]},function(t,n){e.addButton(n,{tooltip:t[0],cmd:t[1],onPostRender:function(){var t=this;e.formatter?e.formatter.formatChanged(n,function(e){t.active(e)}):e.on("init",function(){e.formatter.formatChanged(n,function(e){t.active(e)})})}})}),e.addButton("undo",{tooltip:"Undo",onPostRender:r("undo"),cmd:"undo"}),e.addButton("redo",{tooltip:"Redo",onPostRender:r("redo"),cmd:"redo"}),e.addMenuItem("newdocument",{text:"New document",shortcut:"Ctrl+N",icon:"newdocument",cmd:"mceNewDocument"}),e.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Ctrl+Z",onPostRender:r("undo"),cmd:"undo"}),e.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Ctrl+Y",onPostRender:r("redo"),cmd:"redo"}),e.addMenuItem("visualaid",{text:"Visual aids",selectable:!0,onPostRender:a,cmd:"mceToggleVisualAid"}),s({cut:["Cut","Cut","Ctrl+X"],copy:["Copy","Copy","Ctrl+C"],paste:["Paste","Paste","Ctrl+V"],selectall:["Select all","SelectAll","Ctrl+A"],bold:["Bold","Bold","Ctrl+B"],italic:["Italic","Italic","Ctrl+I"],underline:["Underline","Underline"],strikethrough:["Strikethrough","Strikethrough"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],removeformat:["Clear formatting","RemoveFormat"]},function(t,n){e.addMenuItem(n,{text:t[0],icon:n,shortcut:t[2],cmd:t[1]})}),e.on("mousedown",function(){n.hideAll()}),e.addButton("styleselect",{type:"menubutton",text:"Formats",menu:c}),e.addButton("formatselect",function(){var n=[],o=i(e.settings.block_formats||"Paragraph=p;Address=address;Pre=pre;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6");return s(o,function(t){n.push({text:t[0],value:t[1],textStyle:function(){return e.formatter.getCssText(t[1])}})}),{type:"listbox",text:o[0][0],values:n,fixedWidth:!0,onselect:l,onPostRender:t(n)}}),e.addButton("fontselect",function(){var n="Andale Mono=andale mono,times;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier;Georgia=georgia,palatino;Helvetica=helvetica;Impact=impact,chicago;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco;Times New Roman=times new roman,times;Trebuchet MS=trebuchet ms,geneva;Verdana=verdana,geneva;Webdings=webdings;Wingdings=wingdings,zapf dingbats",o=[],r=i(e.settings.font_formats||n);return s(r,function(e){o.push({text:{raw:e[0]},value:e[1],textStyle:-1==e[1].indexOf("dings")?"font-family:"+e[1]:""})}),{type:"listbox",text:"Font Family",tooltip:"Font Family",values:o,fixedWidth:!0,onPostRender:t(o,"fontname"),onselect:function(t){t.control.settings.value&&e.execCommand("FontName",!1,t.control.settings.value)}}}),e.addButton("fontsizeselect",function(){var n=[],i="8pt 10pt 12pt 14pt 18pt 24pt 36pt",o=e.settings.fontsize_formats||i;return s(o.split(" "),function(e){var t=e,i=e,o=e.split("=");o.length>1&&(t=o[0],i=o[1]),n.push({text:t,value:i})}),{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:n,fixedWidth:!0,onPostRender:t(n,"fontsize"),onclick:function(t){t.control.settings.value&&e.execCommand("FontSize",!1,t.control.settings.value)}}}),e.addMenuItem("formats",{text:"Formats",menu:c})}var s=i.each;o.on("AddEditor",function(t){t.editor.rtl&&(e.rtl=!0),a(t.editor)}),e.translate=function(e){return o.translate(e)},t.tooltips=!r.iOS}),/**
 * GridLayout.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/GridLayout",["tinymce/ui/AbsoluteLayout"],function(e){return e.extend({recalc:function(e){var t,n,i,o,r,a,s,l,c,d,u,f,h,m,g,p,E,v,T,C,b,y,I,O,D,R,_=e.settings,k=[],K=[];for(_=e.settings,i=e.items().filter(":visible"),o=e.layoutRect(),n=_.columns||Math.ceil(Math.sqrt(i.length)),t=Math.ceil(i.length/n),E=_.spacingH||_.spacing||0,v=_.spacingV||_.spacing||0,T=_.alignH||_.align,C=_.alignV||_.align,g=e._paddingBox,T&&"string"==typeof T&&(T=[T]),C&&"string"==typeof C&&(C=[C]),d=0;n>d;d++)k.push(0);for(u=0;t>u;u++)K.push(0);for(u=0;t>u;u++)for(d=0;n>d&&(c=i[u*n+d],c);d++)l=c.layoutRect(),I=l.minW,O=l.minH,k[d]=I>k[d]?I:k[d],K[u]=O>K[u]?O:K[u];for(D=o.innerW-g.left-g.right,b=0,d=0;n>d;d++)b+=k[d]+(d>0?E:0),D-=(d>0?E:0)+k[d];for(R=o.innerH-g.top-g.bottom,y=0,u=0;t>u;u++)y+=K[u]+(u>0?v:0),R-=(u>0?v:0)+K[u];if(b+=g.left+g.right,y+=g.top+g.bottom,s={},s.minW=b+(o.w-o.innerW),s.minH=y+(o.h-o.innerH),s.contentW=s.minW-o.deltaW,s.contentH=s.minH-o.deltaH,s.minW=Math.min(s.minW,o.maxW),s.minH=Math.min(s.minH,o.maxH),s.minW=Math.max(s.minW,o.startMinWidth),s.minH=Math.max(s.minH,o.startMinHeight),!o.autoResize||s.minW==o.minW&&s.minH==o.minH){o.autoResize&&(s=e.layoutRect(s),s.contentW=s.minW-o.deltaW,s.contentH=s.minH-o.deltaH);var x;x="start"==_.packV?0:R>0?Math.floor(R/t):0;var w=0,S=_.flexWidths;if(S)for(d=0;d<S.length;d++)w+=S[d];else w=n;var N=D/w;for(d=0;n>d;d++)k[d]+=S?S[d]*N:N;for(h=g.top,u=0;t>u;u++){for(f=g.left,a=K[u]+x,d=0;n>d&&(c=i[u*n+d],c);d++)m=c.settings,l=c.layoutRect(),r=Math.max(k[d],l.startMinWidth),l.x=f,l.y=h,p=m.alignH||(T?T[d]||T[0]:null),"center"==p?l.x=f+r/2-l.w/2:"right"==p?l.x=f+r-l.w:"stretch"==p&&(l.w=r),p=m.alignV||(C?C[d]||C[0]:null),"center"==p?l.y=h+a/2-l.h/2:"bottom"==p?l.y=h+a-l.h:"stretch"==p&&(l.h=a),c.layoutRect(l),f+=r+E,c.recalc&&c.recalc();h+=a+v}}else if(s.w=s.minW,s.h=s.minH,e.layoutRect(s),this.recalc(e),null===e._lastRect){var A=e.parent();A&&(A._lastRect=null,A.recalc())}}})}),/**
 * Iframe.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/Iframe",["tinymce/ui/Widget"],function(e){return e.extend({renderHtml:function(){var e=this;return e.addClass("iframe"),e.canFocus=!1,'<iframe id="'+e._id+'" class="'+e.classes()+'" tabindex="-1" src="'+(e.settings.url||"javascript:''")+'" frameborder="0"></iframe>'},src:function(e){this.getEl().src=e},html:function(e,t){var n=this,i=this.getEl().contentWindow.document.body;return i?(i.innerHTML=e,t&&t()):setTimeout(function(){n.html(e)},0),this}})}),/**
 * Label.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/Label",["tinymce/ui/Widget","tinymce/ui/DomUtils"],function(e,t){return e.extend({init:function(e){var t=this;t._super(e),t.addClass("widget"),t.addClass("label"),t.canFocus=!1,e.multiline&&t.addClass("autoscroll"),e.strong&&t.addClass("strong")},initLayoutRect:function(){var e=this,n=e._super();if(e.settings.multiline){var i=t.getSize(e.getEl());i.width>n.maxW&&(n.minW=n.maxW,e.addClass("multiline")),e.getEl().style.width=n.minW+"px",n.startMinH=n.h=n.minH=Math.min(n.maxH,t.getSize(e.getEl()).height)}return n},repaint:function(){var e=this;return e.settings.multiline||(e.getEl().style.lineHeight=e.layoutRect().h+"px"),e._super()},text:function(e){var t=this;return t._rendered&&e&&this.innerHtml(t.encode(e)),t._super(e)},renderHtml:function(){var e=this,t=e.settings.forId;return'<label id="'+e._id+'" class="'+e.classes()+'"'+(t?' for="'+t+'"':"")+">"+e.encode(e._text)+"</label>"}})}),/**
 * Toolbar.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/Toolbar",["tinymce/ui/Container"],function(e){return e.extend({Defaults:{role:"toolbar",layout:"flow"},init:function(e){var t=this;t._super(e),t.addClass("toolbar")},postRender:function(){var e=this;return e.items().addClass("toolbar-item"),e._super()}})}),/**
 * MenuBar.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/MenuBar",["tinymce/ui/Toolbar"],function(e){return e.extend({Defaults:{role:"menubar",containerCls:"menubar",ariaRoot:!0,defaults:{type:"menubutton"}}})}),/**
 * MenuButton.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/MenuButton",["tinymce/ui/Button","tinymce/ui/Factory","tinymce/ui/MenuBar"],function(e,t,n){function i(e,t){for(;e;){if(t===e)return!0;e=e.parentNode}return!1}var o=e.extend({init:function(e){var t=this;t._renderOpen=!0,t._super(e),t.addClass("menubtn"),e.fixedWidth&&t.addClass("fixed-width"),t.aria("haspopup",!0),t.hasPopup=!0},showMenu:function(){var e,n=this,i=n.settings;return n.menu&&n.menu.visible()?n.hideMenu():(n.menu||(e=i.menu||[],e.length?e={type:"menu",items:e}:e.type=e.type||"menu",n.menu=t.create(e).parent(n).renderTo(),n.fire("createmenu"),n.menu.reflow(),n.menu.on("cancel",function(e){e.control.parent()===n.menu&&(e.stopPropagation(),n.focus(),n.hideMenu())}),n.menu.on("select",function(){n.focus()}),n.menu.on("show hide",function(e){e.control==n.menu&&n.activeMenu("show"==e.type),n.aria("expanded","show"==e.type)}).fire("show")),n.menu.show(),n.menu.layoutRect({w:n.layoutRect().w}),void n.menu.moveRel(n.getEl(),n.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"]))},hideMenu:function(){var e=this;e.menu&&(e.menu.items().each(function(e){e.hideMenu&&e.hideMenu()}),e.menu.hide())},activeMenu:function(e){this.toggleClass("active",e)},renderHtml:function(){var e=this,t=e._id,i=e.classPrefix,o=e.settings.icon?i+"ico "+i+"i-"+e.settings.icon:"";return e.aria("role",e.parent()instanceof n?"menuitem":"button"),'<div id="'+t+'" class="'+e.classes()+'" tabindex="-1" aria-labelledby="'+t+'"><button id="'+t+'-open" role="presentation" type="button" tabindex="-1">'+(o?'<i class="'+o+'"></i>':"")+"<span>"+(e._text?(o?"\xa0":"")+e.encode(e._text):"")+'</span> <i class="'+i+'caret"></i></button></div>'},postRender:function(){var e=this;return e.on("click",function(t){t.control===e&&i(t.target,e.getEl())&&(e.showMenu(),t.aria&&e.menu.items()[0].focus())}),e.on("mouseenter",function(t){var n,i=t.control,r=e.parent();i&&r&&i instanceof o&&i.parent()==r&&(r.items().filter("MenuButton").each(function(e){e.hideMenu&&e!=i&&(e.menu&&e.menu.visible()&&(n=!0),e.hideMenu())}),n&&(i.focus(),i.showMenu()))}),e._super()},text:function(e){var t,n,i=this;if(i._rendered)for(n=i.getEl("open").getElementsByTagName("span"),t=0;t<n.length;t++)n[t].innerHTML=(i.settings.icon&&e?"\xa0":"")+i.encode(e);return this._super(e)},remove:function(){this._super(),this.menu&&this.menu.remove()}});return o}),/**
 * ListBox.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/ListBox",["tinymce/ui/MenuButton"],function(e){return e.extend({init:function(e){function t(n){for(var r=0;r<n.length;r++){if(i=n[r].selected||e.value===n[r].value){o=o||n[r].text,a._value=n[r].value;break}n[r].menu&&t(n[r].menu)}}var n,i,o,r,a=this;a._values=n=e.values,n&&(t(n),!i&&n.length>0&&(o=n[0].text,a._value=n[0].value),e.menu=n),e.text=e.text||o||n[0].text,a._super(e),a.addClass("listbox"),a.on("select",function(t){var n=t.control;r&&(t.lastControl=r),e.multiple?n.active(!n.active()):a.value(t.control.settings.value),r=n})},value:function(e){function t(e,n){e.items().each(function(e){i=e.value()===n,i&&(o=o||e.text()),e.active(i),e.menu&&t(e.menu,n)})}function n(t){for(var r=0;r<t.length;r++)i=t[r].value==e,i&&(o=o||t[r].text),t[r].active=i,t[r].menu&&n(t[r].menu)}var i,o,r,a=this;return"undefined"!=typeof e&&(a.menu?t(a.menu,e):(r=a.settings.menu,n(r)),a.text(o||this.settings.text)),a._super(e)}})}),/**
 * MenuItem.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/MenuItem",["tinymce/ui/Widget","tinymce/ui/Factory","tinymce/Env"],function(e,t,n){return e.extend({Defaults:{border:0,role:"menuitem"},init:function(e){var t=this;t.hasPopup=!0,t._super(e),e=t.settings,t.addClass("menu-item"),e.menu&&t.addClass("menu-item-expand"),e.preview&&t.addClass("menu-item-preview"),("-"===t._text||"|"===t._text)&&(t.addClass("menu-item-sep"),t.aria("role","separator"),t._text="-"),e.selectable&&(t.aria("role","menuitemcheckbox"),t.addClass("menu-item-checkbox"),e.icon="selected"),e.preview||e.selectable||t.addClass("menu-item-normal"),t.on("mousedown",function(e){e.preventDefault()}),e.menu&&!e.ariaHideMenu&&t.aria("haspopup",!0)},hasMenus:function(){return!!this.settings.menu},showMenu:function(){var e,n=this,i=n.settings,o=n.parent();if(o.items().each(function(e){e!==n&&e.hideMenu()}),i.menu){e=n.menu,e?e.show():(e=i.menu,e.length?e={type:"menu",items:e}:e.type=e.type||"menu",o.settings.itemDefaults&&(e.itemDefaults=o.settings.itemDefaults),e=n.menu=t.create(e).parent(n).renderTo(),e.reflow(),e.on("cancel",function(t){t.stopPropagation(),n.focus(),e.hide()}),e.on("show hide",function(e){e.control.items().each(function(e){e.active(e.settings.selected)})}).fire("show"),e.on("hide",function(t){t.control===e&&n.removeClass("selected")}),e.submenu=!0),e._parentMenu=o,e.addClass("menu-sub");var r=e.testMoveRel(n.getEl(),n.isRtl()?["tl-tr","bl-br","tr-tl","br-bl"]:["tr-tl","br-bl","tl-tr","bl-br"]);e.moveRel(n.getEl(),r),e.rel=r,r="menu-sub-"+r,e.removeClass(e._lastRel),e.addClass(r),e._lastRel=r,n.addClass("selected"),n.aria("expanded",!0)}},hideMenu:function(){var e=this;return e.menu&&(e.menu.items().each(function(e){e.hideMenu&&e.hideMenu()}),e.menu.hide(),e.aria("expanded",!1)),e},renderHtml:function(){var e=this,t=e._id,i=e.settings,o=e.classPrefix,r=e.encode(e._text),a=e.settings.icon,s="",l=i.shortcut;return a&&e.parent().addClass("menu-has-icons"),i.image&&(a="none",s=" style=\"background-image: url('"+i.image+"')\""),l&&n.mac&&(l=l.replace(/ctrl\+alt\+/i,"&#x2325;&#x2318;"),l=l.replace(/ctrl\+/i,"&#x2318;"),l=l.replace(/alt\+/i,"&#x2325;"),l=l.replace(/shift\+/i,"&#x21E7;")),a=o+"ico "+o+"i-"+(e.settings.icon||"none"),'<div id="'+t+'" class="'+e.classes()+'" tabindex="-1">'+("-"!==r?'<i class="'+a+'"'+s+"></i>\xa0":"")+("-"!==r?'<span id="'+t+'-text" class="'+o+'text">'+r+"</span>":"")+(l?'<div id="'+t+'-shortcut" class="'+o+'menu-shortcut">'+l+"</div>":"")+(i.menu?'<div class="'+o+'caret"></div>':"")+"</div>"},postRender:function(){var e=this,t=e.settings,n=t.textStyle;if("function"==typeof n&&(n=n.call(this)),n){var i=e.getEl("text");i&&i.setAttribute("style",n)}return e.on("mouseenter click",function(n){n.control===e&&(t.menu||"click"!==n.type?(e.showMenu(),n.aria&&e.menu.focus(!0)):(e.fire("select"),e.parent().hideAll()))}),e._super(),e},active:function(e){return"undefined"!=typeof e&&this.aria("checked",e),this._super(e)},remove:function(){this._super(),this.menu&&this.menu.remove()}})}),/**
 * Menu.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/Menu",["tinymce/ui/FloatPanel","tinymce/ui/MenuItem","tinymce/util/Tools"],function(e,t,n){var i=e.extend({Defaults:{defaultType:"menuitem",border:1,layout:"stack",role:"application",bodyRole:"menu",ariaRoot:!0},init:function(e){var t=this;if(e.autohide=!0,e.constrainToViewport=!0,e.itemDefaults)for(var i=e.items,o=i.length;o--;)i[o]=n.extend({},e.itemDefaults,i[o]);t._super(e),t.addClass("menu")},repaint:function(){return this.toggleClass("menu-align",!0),this._super(),this.getEl().style.height="",this.getEl("body").style.height="",this},cancel:function(){var e=this;e.hideAll(),e.fire("select")},hideAll:function(){var e=this;return this.find("menuitem").exec("hideMenu"),e._super()},preRender:function(){var e=this;return e.items().each(function(t){var n=t.settings;return n.icon||n.selectable?(e._hasIcons=!0,!1):void 0}),e._super()}});return i}),/**
 * Radio.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/Radio",["tinymce/ui/Checkbox"],function(e){return e.extend({Defaults:{classes:"radio",role:"radio"}})}),/**
 * ResizeHandle.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/ResizeHandle",["tinymce/ui/Widget","tinymce/ui/DragHelper"],function(e,t){return e.extend({renderHtml:function(){var e=this,t=e.classPrefix;return e.addClass("resizehandle"),"both"==e.settings.direction&&e.addClass("resizehandle-both"),e.canFocus=!1,'<div id="'+e._id+'" class="'+e.classes()+'"><i class="'+t+"ico "+t+'i-resize"></i></div>'},postRender:function(){var e=this;e._super(),e.resizeDragHelper=new t(this._id,{start:function(){e.fire("ResizeStart")},drag:function(t){"both"!=e.settings.direction&&(t.deltaX=0),e.fire("Resize",t)},stop:function(){e.fire("ResizeEnd")}})},remove:function(){return this.resizeDragHelper&&this.resizeDragHelper.destroy(),this._super()}})}),/**
 * Spacer.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/Spacer",["tinymce/ui/Widget"],function(e){return e.extend({renderHtml:function(){var e=this;return e.addClass("spacer"),e.canFocus=!1,'<div id="'+e._id+'" class="'+e.classes()+'"></div>'}})}),/**
 * SplitButton.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/SplitButton",["tinymce/ui/MenuButton","tinymce/ui/DomUtils"],function(e,t){return e.extend({Defaults:{classes:"widget btn splitbtn",role:"button"},repaint:function(){var e,n,i=this,o=i.getEl(),r=i.layoutRect();return i._super(),e=o.firstChild,n=o.lastChild,t.css(e,{width:r.w-t.getSize(n).width,height:r.h-2}),t.css(n,{height:r.h-2}),i},activeMenu:function(e){var n=this;t.toggleClass(n.getEl().lastChild,n.classPrefix+"active",e)},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,i=e.settings.icon?n+"ico "+n+"i-"+e.settings.icon:"";return'<div id="'+t+'" class="'+e.classes()+'" role="button" tabindex="-1"><button type="button" hidefocus="1" tabindex="-1">'+(i?'<i class="'+i+'"></i>':"")+(e._text?(i?" ":"")+e._text:"")+'</button><button type="button" class="'+n+'open" hidefocus="1" tabindex="-1">'+(e._menuBtnText?(i?"\xa0":"")+e._menuBtnText:"")+' <i class="'+n+'caret"></i></button></div>'},postRender:function(){var e=this,t=e.settings.onclick;return e.on("click",function(e){var n=e.target;if(e.control==this)for(;n;){if(e.aria&&"down"!=e.aria.key||"BUTTON"==n.nodeName&&-1==n.className.indexOf("open"))return e.stopImmediatePropagation(),void t.call(this,e);n=n.parentNode}}),delete e.settings.onclick,e._super()}})}),/**
 * StackLayout.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/StackLayout",["tinymce/ui/FlowLayout"],function(e){return e.extend({Defaults:{containerClass:"stack-layout",controlClass:"stack-layout-item",endClass:"break"}})}),/**
 * TabPanel.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/TabPanel",["tinymce/ui/Panel","tinymce/ui/DomUtils"],function(e,t){return e.extend({lastIdx:0,Defaults:{layout:"absolute",defaults:{type:"panel"}},activateTab:function(e){var n;this.activeTabId&&(n=this.getEl(this.activeTabId),t.removeClass(n,this.classPrefix+"active"),n.setAttribute("aria-selected","false")),this.activeTabId="t"+e,n=this.getEl("t"+e),n.setAttribute("aria-selected","true"),t.addClass(n,this.classPrefix+"active"),e!=this.lastIdx&&(this.items()[this.lastIdx].hide(),this.lastIdx=e),this.items()[e].show().fire("showtab"),this.reflow()},renderHtml:function(){var e=this,t=e._layout,n="",i=e.classPrefix;return e.preRender(),t.preRender(e),e.items().each(function(t,o){var r=e._id+"-t"+o;t.aria("role","tabpanel"),t.aria("labelledby",r),n+='<div id="'+r+'" class="'+i+'tab" unselectable="on" role="tab" aria-controls="'+t._id+'" aria-selected="false" tabIndex="-1">'+e.encode(t.settings.title)+"</div>"}),'<div id="'+e._id+'" class="'+e.classes()+'" hidefocus="1" tabindex="-1"><div id="'+e._id+'-head" class="'+i+'tabs" role="tablist">'+n+'</div><div id="'+e._id+'-body" class="'+e.classes("body")+'">'+t.renderHtml(e)+"</div></div>"},postRender:function(){var e=this;e._super(),e.settings.activeTab=e.settings.activeTab||0,e.activateTab(e.settings.activeTab),this.on("click",function(t){var n=t.target.parentNode;if(t.target.parentNode.id==e._id+"-head")for(var i=n.childNodes.length;i--;)n.childNodes[i]==t.target&&e.activateTab(i)})},initLayoutRect:function(){var e,n,i,o=this;n=t.getSize(o.getEl("head")).width,n=0>n?0:n,i=0,o.items().each(function(e,t){n=Math.max(n,e.layoutRect().minW),i=Math.max(i,e.layoutRect().minH),o.settings.activeTab!=t&&e.hide()}),o.items().each(function(e){e.settings.x=0,e.settings.y=0,e.settings.w=n,e.settings.h=i,e.layoutRect({x:0,y:0,w:n,h:i})});var r=t.getSize(o.getEl("head")).height;return o.settings.minWidth=n,o.settings.minHeight=i+r,e=o._super(),e.deltaH+=r,e.innerH=e.h-e.deltaH,e}})}),/**
 * TextBox.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/TextBox",["tinymce/ui/Widget","tinymce/ui/DomUtils"],function(e,t){return e.extend({init:function(e){var t=this;t._super(e),t._value=e.value||"",t.addClass("textbox"),e.multiline?t.addClass("multiline"):t.on("keydown",function(e){13==e.keyCode&&t.parents().reverse().each(function(t){return e.preventDefault(),t.hasEventListeners("submit")&&t.toJSON?(t.fire("submit",{data:t.toJSON()}),!1):void 0})})},disabled:function(e){var t=this;return t._rendered&&"undefined"!=typeof e&&(t.getEl().disabled=e),t._super(e)},value:function(e){var t=this;return"undefined"!=typeof e?(t._value=e,t._rendered&&(t.getEl().value=e),t):t._rendered?t.getEl().value:t._value},repaint:function(){var e,t,n,i,o=this,r=0,a=0;e=o.getEl().style,t=o._layoutRect,i=o._lastRepaintRect||{};var s=document;return!o.settings.multiline&&s.all&&(!s.documentMode||s.documentMode<=8)&&(e.lineHeight=t.h-a+"px"),n=o._borderBox,r=n.left+n.right+8,a=n.top+n.bottom+(o.settings.multiline?8:0),t.x!==i.x&&(e.left=t.x+"px",i.x=t.x),t.y!==i.y&&(e.top=t.y+"px",i.y=t.y),t.w!==i.w&&(e.width=t.w-r+"px",i.w=t.w),t.h!==i.h&&(e.height=t.h-a+"px",i.h=t.h),o._lastRepaintRect=i,o.fire("repaint",{},!1),o},renderHtml:function(){var e=this,t=e._id,n=e.settings,i=e.encode(e._value,!1),o="";return"spellcheck"in n&&(o+=' spellcheck="'+n.spellcheck+'"'),n.maxLength&&(o+=' maxlength="'+n.maxLength+'"'),n.size&&(o+=' size="'+n.size+'"'),n.subtype&&(o+=' type="'+n.subtype+'"'),e.disabled()&&(o+=' disabled="disabled"'),n.multiline?'<textarea id="'+t+'" class="'+e.classes()+'" '+(n.rows?' rows="'+n.rows+'"':"")+' hidefocus="1"'+o+">"+i+"</textarea>":'<input id="'+t+'" class="'+e.classes()+'" value="'+i+'" hidefocus="1"'+o+" />"},postRender:function(){var e=this;return t.on(e.getEl(),"change",function(t){e.fire("change",t)}),e._super()},remove:function(){t.off(this.getEl()),this._super()}})}),/**
 * Throbber.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/Throbber",["tinymce/ui/DomUtils","tinymce/ui/Control"],function(e,t){return function(n,i){var o,r=this,a=t.classPrefix;r.show=function(t){return r.hide(),o=!0,window.setTimeout(function(){o&&n.appendChild(e.createFragment('<div class="'+a+"throbber"+(i?" "+a+"throbber-inline":"")+'"></div>'))},t||0),r},r.hide=function(){var e=n.lastChild;return e&&-1!=e.className.indexOf("throbber")&&e.parentNode.removeChild(e),o=!1,r}}}),r(["tinymce/dom/EventUtils","tinymce/dom/Sizzle","tinymce/dom/DomQuery","tinymce/html/Styles","tinymce/dom/TreeWalker","tinymce/util/Tools","tinymce/dom/Range","tinymce/html/Entities","tinymce/Env","tinymce/dom/DOMUtils","tinymce/dom/ScriptLoader","tinymce/AddOnManager","tinymce/html/Node","tinymce/html/Schema","tinymce/html/SaxParser","tinymce/html/DomParser","tinymce/html/Writer","tinymce/html/Serializer","tinymce/dom/Serializer","tinymce/dom/TridentSelection","tinymce/util/VK","tinymce/dom/ControlSelection","tinymce/dom/BookmarkManager","tinymce/dom/Selection","tinymce/dom/ElementUtils","tinymce/Formatter","tinymce/UndoManager","tinymce/EnterKey","tinymce/ForceBlocks","tinymce/EditorCommands","tinymce/util/URI","tinymce/util/Class","tinymce/util/EventDispatcher","tinymce/ui/Selector","tinymce/ui/Collection","tinymce/ui/DomUtils","tinymce/ui/Control","tinymce/ui/Factory","tinymce/ui/KeyboardNavigation","tinymce/ui/Container","tinymce/ui/DragHelper","tinymce/ui/Scrollable","tinymce/ui/Panel","tinymce/ui/Movable","tinymce/ui/Resizable","tinymce/ui/FloatPanel","tinymce/ui/Window","tinymce/ui/MessageBox","tinymce/WindowManager","tinymce/util/Quirks","tinymce/util/Observable","tinymce/EditorObservable","tinymce/Shortcuts","tinymce/Editor","tinymce/util/I18n","tinymce/FocusManager","tinymce/EditorManager","tinymce/LegacyInput","tinymce/util/XHR","tinymce/util/JSON","tinymce/util/JSONRequest","tinymce/util/JSONP","tinymce/util/LocalStorage","tinymce/Compat","tinymce/ui/Layout","tinymce/ui/AbsoluteLayout","tinymce/ui/Tooltip","tinymce/ui/Widget","tinymce/ui/Button","tinymce/ui/ButtonGroup","tinymce/ui/Checkbox","tinymce/ui/PanelButton","tinymce/ui/ColorButton","tinymce/ui/ComboBox","tinymce/ui/Path","tinymce/ui/ElementPath","tinymce/ui/FormItem","tinymce/ui/Form","tinymce/ui/FieldSet","tinymce/ui/FilePicker","tinymce/ui/FitLayout","tinymce/ui/FlexLayout","tinymce/ui/FlowLayout","tinymce/ui/FormatControls","tinymce/ui/GridLayout","tinymce/ui/Iframe","tinymce/ui/Label","tinymce/ui/Toolbar","tinymce/ui/MenuBar","tinymce/ui/MenuButton","tinymce/ui/ListBox","tinymce/ui/MenuItem","tinymce/ui/Menu","tinymce/ui/Radio","tinymce/ui/ResizeHandle","tinymce/ui/Spacer","tinymce/ui/SplitButton","tinymce/ui/StackLayout","tinymce/ui/TabPanel","tinymce/ui/TextBox","tinymce/ui/Throbber"])}(this);